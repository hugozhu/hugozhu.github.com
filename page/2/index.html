<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>All about Raspberry Pi</title>
  
  <meta name="author" content="Hugo Zhu"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "All about Raspberry Pi",
    
    "url": "https:\/\/blog.hugozhu.site\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/blog.hugozhu.site\/"
  
  
  
  
}
</script>

<meta property="og:title" content="All about Raspberry Pi" />
<meta property="og:image" content="https://blog.hugozhu.site/img/pi.png" />
<meta property="og:url" content="https://blog.hugozhu.site/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="All about Raspberry Pi" />

  <meta name="twitter:title" content="All about Raspberry Pi" />
  <meta name="twitter:image" content="https://blog.hugozhu.site/img/pi.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <link href='https://blog.hugozhu.site/img/pi.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.128.2">
  <link rel="alternate" href="https://blog.hugozhu.site/index.xml" type="application/rss+xml" title="All about Raspberry Pi"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="https://blog.hugozhu.site/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://blog.hugozhu.site/css/highlight.min.css" /><link rel="stylesheet" href="https://blog.hugozhu.site/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-W88HDMN"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'GTM-W88HDMN');
        }
      </script>
    
  


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://blog.hugozhu.site/">All about Raspberry Pi</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="All about Raspberry Pi" href="https://blog.hugozhu.site/">
            <img class="avatar-img" src="https://blog.hugozhu.site/img/pi.png" alt="All about Raspberry Pi" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="page-heading">
              
                <h1>All about Raspberry Pi</h1>
              
              
                <hr class="small">
              
              
                
                  <span class="page-subheading">Hugo Zhu&#39;s Blog</span>
                
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
  <div role="main" class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
        
<a href="https://apps.apple.com/app/apple-store/id1659622164?pt=118612019&ct=hugo&mt=8"><img width="200" src="https://is1-ssl.mzstatic.com/image/thumb/Purple211/v4/51/c6/ff/51c6ff77-e5b0-c53d-2f1a-b659fbc20581/AppIcon-0-0-85-220-0-0-4-0-2x.png/492x0w.webp"/></a>
<a href="https://apps.apple.com/app/apple-store/id1659622164?pt=118612019&ct=hugo&mt=8"><img width="200" src="https://static-00.iconduck.com/assets.00/app-ios-icon-2048x607-djvn0n0l.png"></a></a>        

        <div class="posts-list">
          
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/67-use-free-google-cloud-service-to-deliver-github-webhook-events-to-dingtalk/">
        <h2 class="post-title">用免费的Google云服务将Github项目Webhook事件通知到钉钉</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on May 15, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;237&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        本教程使用Go语言来实现
+ 准备开发环境 首先你需要下载Google AppEngine的SDK：https://cloud.google.com/appengine/downloads#Google_App_Engine_SDK_for_Go
安装好后执行goapp确认已安装好
4:30:40 Hugo-Mac-mini ~/Projects/hugozhu/godingtalk $ goapp env GOARCH=&#34;amd64&#34; GOBIN=&#34;&#34; GOEXE=&#34;&#34; GOHOSTARCH=&#34;amd64&#34; GOHOSTOS=&#34;darwin&#34; GOOS=&#34;darwin&#34; GOPATH=&#34;/Users/hugozhu/Projects/hugozhu/godingtalk&#34; GORACE=&#34;&#34; GOROOT=&#34;/Users/hugozhu/Projects/share/go_appengine/goroot&#34; GOTOOLDIR=&#34;/Users/hugozhu/Projects/share/go_appengine/goroot/pkg/tool/darwin_amd64&#34; GO15VENDOREXPERIMENT=&#34;1&#34; CC=&#34;clang&#34; GOGCCFLAGS=&#34;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fno-common&#34; CXX=&#34;clang++&#34; CGO_ENABLED=&#34;1&#34; Checkout代码 export GOPATH=`pwd` 14:34:49 Hugo-Mac-mini ~/Projects/hugozhu/github_alert $ go get github.com/hugozhu/godingtalk/demo/github/appengine package appengine: unrecognized import path &#34;appengine&#34; (import path does not begin with hostname) package appengine/memcache: unrecognized import path &#34;appengine/memcache&#34; (import path does not begin with hostname) package appengine/urlfetch: unrecognized import path &#34;appengine/urlfetch&#34; (import path does not begin with hostname) 修改配置 cd src/github.
        <a href="https://blog.hugozhu.site/post/2016/67-use-free-google-cloud-service-to-deliver-github-webhook-events-to-dingtalk/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/66-use-dingtalk-golang-sdk-to-send-message-on-pi/">
        <h2 class="post-title">从树莓派上发消息到手机或桌面钉钉</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on May 2, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;73&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        钉钉是阿里巴巴专为中小企业和团队打造的沟通、协同的多端平台，钉钉开放平台旨在为企业提供更为丰富的办公协同解决方案。通过钉钉开放平台，企业或第三方合作伙伴可以帮助企业快速、低成本的实现高质量的移动微应用，实现生产、管理、协作、运营的移动化。
访问钉钉开放平台的文档，请戳此
下面将介绍如何使用钉钉开放平台SDK在树莓派上发送消息到手机和桌面钉钉。
准备工作 首先，你需要在钉钉上创建一个组织，点这里开始
注册好后创建微应用
获取微应用的 agentid
获取 corpid和corpsecret，非常重要
下载钉钉SDK 这里我们使用Go语言版的钉钉开放平台SDK，这样可以直接在树莓派上编译运行
export GOPATH=`pwd` go get github.com/hugozhu/godingtalk 企业应用消息发送代码 下面的代码使用钉钉开放平台的企业应用消息接口来发送消息
package main import ( &#34;github.com/hugozhu/godingtalk&#34; &#34;log&#34; &#34;os&#34; ) func main() { c := godingtalk.NewDingTalkClient(os.Getenv(&#34;corpid&#34;), os.Getenv(&#34;corpsecret&#34;)) c.RefreshAccessToken() err := c.SendAppMessage(os.Args[1], os.Args[2], os.Args[3]) if err != nil { log.Println(err) } } 将上面的代码保存在src/push.go里，执行go build src/push.go生成可执行文件push，并复制到~/bin目录下
消息发送脚本 在准备工作中获取到的corpid,corpsecret 和 agentid这里就有用了
创建一个push.sh文件，内容如下：
#!/bin/sh export corpid=&lt;corpid&gt; export corpsecret=&lt;corpsecret&gt; timeout 10 ~/bin/push &lt;agentid&gt; &#34;@all&#34; &#34;$1&#34; 使用消息发送脚本 push.sh &#34;树莓派发来的钉钉消息&#34; 通过这个脚本就可以在树莓派上发消息到钉钉上了
        <a href="https://blog.hugozhu.site/post/2016/66-use-dingtalk-golang-sdk-to-send-message-on-pi/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/65-running-grafana-on-raspberry-pi-3/">
        <h2 class="post-title">用Grafana制作树莓派上的监控大盘</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 24, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;83&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        <p><a href="http://grafana.org">Grafana</a>是一个优秀的开源图表系统，支持多种数据源，其中包括
<a href="https://influxdata.com">InfluxDB</a>和<a href="http://hugozhu.myalert.info/2016/04/17/64-set-up-monitor-system-with-prometheus-on-raspberry.html">Prometheus</a></p>
<p><a href="http://grafana.org/assets/img/features/dashboard_ex.png"><img src="http://grafana.org/assets/img/features/dashboard_ex.png" width="500"/></a></p>
<h1 id="安装">安装</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="n">export</span><span class="w"> </span><span class="n">GOPATH</span><span class="o">=`</span><span class="n">pwd</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">go</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="n">grafana</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">cd</span><span class="w"> </span><span class="err">$</span><span class="n">GOPATH</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="n">grafana</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">go</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">build</span><span class="p">.</span><span class="n">go</span><span class="w"> </span><span class="n">setup</span><span class="w">              </span><span class="c1"># (only needed once to install godep)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">$</span><span class="n">GOPATH</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">godep</span><span class="w"> </span><span class="n">restore</span><span class="w">          </span><span class="c1"># (will pull down all golang lib dependencies in your current GOPATH)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">go</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">build</span><span class="p">.</span><span class="n">go</span><span class="w"> </span><span class="n">build</span><span class="w">              </span><span class="c1"># (or &#39;go build .&#39;)
</span></span></span></code></pre></div><p>编译好后会在bin目录下生成<code>grafana-server</code>和<code>grafana-cli</code></p>
<p>第二步需要生成资源文件，但是从源代码编译会遇到<code>phantomjs-prebuild</code>依赖包不存在arm版本的问题，可以直接下载windows版本解开里面的public目录到bin/public下</p>
<h1 id="启动">启动</h1>
<p>在bin/conf下拷贝生成<code>defaults.ini</code>文件，执行<code> ./grafana-server</code>即可</p>
<h1 id="配置">配置</h1>
<p>用浏览器打开 <code>http://&lt;pi:ip&gt;:3000</code> 用帐号：<code>admin</code>，密码：<code>admin</code> 登录</p>
<p>首先要配置好<code>Prometheus</code>数据源：</p>
<img src="http://ww2.sinaimg.cn/mw690/6bc40342gw1f382aqrlkkj20e80g2myb.jpg"/>
<p>下面是获取网络的上下行流量数据的采集脚本，通过Prometheus Push Gateway提交，可以每5分钟运行一次</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">DATA=`ifconfig eth1 | grep bytes | sed &#39;s/:/ /g&#39; | awk &#39;{print &#34;bytes_rx &#34;$3&#34;\nbytes_tx &#34;$8}&#39;`
</span></span><span class="line"><span class="cl">cat &lt;&lt;EOF | curl --data-binary @- http://pi3:9091/metrics/job/raspberrypi/instance/test
</span></span><span class="line"><span class="cl">$DATA
</span></span><span class="line"><span class="cl">EOF
</span></span></code></pre></div><p>然后在Grafana里可以按下图方式增加一个每小时网络流量的图表，<code>increase(bytes_rx[1h])</code>是<code>Prometheus</code>所支持的查询表达式。</p>
<p><a href="http://ww4.sinaimg.cn/mw690/6bc40342gw1f382mb41cvj20lz0ob422.jpg"><img src="http://ww4.sinaimg.cn/mw690/6bc40342gw1f382mb41cvj20lz0ob422.jpg" width="600"/></a></p>

        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/63-raspberrypi-as-ibeacon-transmitter/">
        <h2 class="post-title">树莓派3变身iBeacon发射器</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 19, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;326&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        iBeacon是apple公司提出的“一种可以让附近手持电子设备检测到的一种新的低功耗、低成本信号传送器”的一套可用于室内定位系统的协议。iBeacon技术通过低功耗蓝牙（BLE），也就是我们所说的智能蓝牙来实现。
设置 树莓派3内置了蓝牙芯片，最新的Raspian也已经安装好bluez，所以基本上不用什么设置，就可以把树莓派3当做iBeacon基站来使用了。
通过以下命令可以确认蓝牙芯片工作正常
hugo@raspberrypi3:~ $ sudo hciconfig hci0:	Type: BR/EDR Bus: UART BD Address: B8:27:EB:BF:E0:C5 ACL MTU: 1021:8 SCO MTU: 64:1 UP RUNNING RX bytes:3841 acl:0 sco:0 events:239 errors:0 TX bytes:5213 acl:0 sco:0 commands:237 errors:0 脚本 iBeacon使用的是BLE技术，具体而言，利用的是BLE中名为“通告帧”（Advertising）的广播帧。通告帧是定期发送的帧，只要是支持BLE的设备就可以接收到。iBeacon通过在这种通告帧的有效负载部分嵌入苹果自主格式的数据来实现。 iBeacon的数据主要由四种资讯构成，分别是UUID（通用唯一标识符）、Major、Minor、Measured Power。 UUID是规定为ISO/IEC11578:1996标准的128位标识符。 Major和Minor由iBeacon发布者自行设定，都是16位的标识符。比如，连锁店可以在Major中写入区域资讯，可在Minor中写入个别店铺的ID等。另外，在家电中嵌入iBeacon功能时，可以用Major表示产品型号，用Minor表示错误代码，用来向外部通知故障。 Measured Power是iBeacon模块与接收器之间相距1m时的参考接收信号强（RSSI：Received Signal Strength Indicator）。接收器根据该参考RSSI与接收信号的强度来推算发送模块与接收器的距离。
iBeacon发射的信号格式如下：
消息头 1E 02 # Number of bytes that follow in first AD structure 01 # Flags AD type 1A # Flags value 0x1A = 000011010 bit 0 (OFF) LE Limited Discoverable Mode bit 1 (ON) LE General Discoverable Mode bit 2 (OFF) BR/EDR Not Supported bit 3 (ON) Simultaneous LE and BR/EDR to Same Device Capable (controller) bit 4 (ON) Simultaneous LE and BR/EDR to Same Device Capable (Host) 1A # Number of bytes that follow in second (and last) AD structure Vendor的标识 FF # Manufacturer specific data AD type 4C 00 # Company identifier code (0x004C == Apple) 02 # Byte 0 of iBeacon advertisement indicator 15 # Byte 1 of iBeacon advertisement indicator 通告帧信息 F6 BC 15 E0 93 90 46 67 9B E1 86 6E C8 A1 99 DC # our iBeacon proximity uuid 00 00 # Major 00 00 # Minor C8 00 # Calibrated Tx power 以下脚本会随机生成一个UUID和相应的iBeacon发射命令
        <a href="https://blog.hugozhu.site/post/2016/63-raspberrypi-as-ibeacon-transmitter/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
        
       
       <a href="https://blog.hugozhu.site/tags/bluetooth/">Bluetooth</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/64-set-up-monitor-system-with-prometheus-on-raspberry/">
        <h2 class="post-title">在树莓派3上搭建监控系统</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 17, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;214&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        之前用过tsar做监控，但没有基于浏览器的图表展示，而且tsar收集数据很频繁，容易写坏SD卡。后来一直用Xively SaaS服务，但因为服务在国外，访问速度一直不尽人意。直到今天早上读到InfoQ的一篇文章才知道了Prometheus，看了一下介绍后发现Prometheus的以下特点非常合适在树莓派上部署：
采用Go实现支持，天然支持跨平台，配置相当简单，维护和二次开发的成本小； 采集数据支持Pull和Push模式，可以自定义不同采集点的采样频率，适合轻量型应用降低能耗； 二次计算和查询方式很灵活 自带 Grafana数据可视化工具； 可配置的内存+磁盘存储大小，采用的时间序列文件和Level DB做索引效率较高，不会让监控软件本身消耗过多的树莓派计算和存储资源 监控系统架构 安装 Prometheus采集数据的主要方式是通过HTTP到指定的URL上定时采集，为了支持Push方式收集数据，我们还需要安装一个Prometheus Pushgateway作为HTTP服务器来给Prometheus提供数据，你的应用则可以通过命令行或编程接口方式将数据推送到Pushgateway
安装Prometheus 到 https://prometheus.io/download/ 选择armv7架构后可以直接下载树莓派3可运行的版本，解压后可以直接运行；缺省配置文件将监控Prometheus自身。
安装Prometheus Pushgateway 假设你在树莓派上已经安装好了Go
git clone https://github.com/prometheus/pushgateway.git cd pushgateway.git export GOPATH=`pwd` go get -d go build *.go 编译成功后在当前目录下会生成可执行文件：bindata
配置 Prometheus启动后，缺省用9090 HTTP端口，Prometheus Pushgateway则是9091 HTTP端口, 以下文件配置了每15秒定时抓取Pushgateway上的监控数据。
hugo@raspberrypi3:~/prometheus $ cat prometheus.yml # my global config global: scrape_interval: 15s # By default, scrape targets every 15 seconds. evaluation_interval: 15s # By default, scrape targets every 15 seconds. # scrape_timeout is set to the global default (10s).
        <a href="https://blog.hugozhu.site/post/2016/64-set-up-monitor-system-with-prometheus-on-raspberry/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/62-raspberrypi-3/">
        <h2 class="post-title">树莓派3初体验</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 13, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;96&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        树莓派基金会今年推出的新品Raspberry Pi 3已经到手，官方宣传性能比树莓派2代快50%，比树莓派1代快10倍，第一次使用的64位四核处理器（博通BCM2837）配备了ARM Cortex-A53处理器，内置了802.11 b/g/n 2.4GHz WIFI和蓝牙4.1，显卡没变，还是双核VideoCore IV（并不支持4K视频）。CPU升级也对能耗有了更高的要求，官方说法最好是使用5V 2.5A的电源输入（iPad充电器），实测在无外设的情况下，2A的电流输出也可以让Pi 3正常运行。价格和树莓派2也一样，官方售价税前35美金，国内可以在淘宝上买到，238元一枚，点此购买
我深深的认为每个程序员都需要有一块树莓派，24*7的运行在家里的网络上 ，投入成本在300人民币以内（树莓派加电源：250，SD卡：50），每年电费在10元以内。树莓派支持各种编程语言的开发，安装体验各种操作系统非常简单，丰富的外部接口，支持很多类型的传感器和控制器外设，可以让你轻松设计和实现智能硬件，技术让生活更美好~
外观 树莓派3的规格大小则和树莓派2完全一样，你甚至可以直接用树莓派2的外壳，完全贴合。
背面看略有不同，中间的芯片是1G内存，树莓派3的内存速度快了1倍，右边是CF卡插槽，树莓派2是回弹式卡槽（取出CF卡时只要往力再摁一下就会弹出），树莓派3可能为了降低成本或是因为板卡空间的问题改成了更紧凑的插入式，装上外壳后取出的时候有点费劲，我需要用瑞士军刀的镊子夹出来。
（下图是树莓派3）
安装启动 如果你不需要GUI,推荐安装Raspbian Jessie Lite，大小只有298.3M，下载完成后解压缩成img文件后用dd命令写到CF卡上去。你也可以下载NOOBS完整安装。
WIFI 编辑无线配置文件/etc/wpa_supplicant/wpa_supplicant.conf
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev update_config=1 network={ ssid=&#34;&lt;无线AP的名称&gt;&#34; psk=&#34;&lt;无线密码&gt;&#34; } 如果有多个无线网络可以接入，增加network即可
修改好后如果没有自动生效连上网络可以通过以下命令强制生效
ifdown wlan0 ifup wlan0 非常重要的一点是：如果你希望无线网络一直连接，需要关闭掉无线模块的电源管理，否则没有网络流量后，WIFI会自动关闭。。。
sudo iwconfig wlan0 power off 测试wifi速度：从通过网线连接到极路由2的Mac拷贝文件到树莓派3上，内置网卡的传输速度在4MB/s左右，如果换上300Mbps的USB无线网卡EDUP EP-N1557则可以达到9MB/s左右，速度要快1倍。结论是内置的wifi模块速度只有150Mbps，如果对网络速度要求较高，最稳定的方法还是插根网线。
安装好nginx后，用ab测试最简单的HTML网页性能，树莓派3可以轻松超过1000 QPS，满足个人网站的性能需求。
CPU 树莓派3使用的4核Cortex-A53 BCM2837 SoC为了向下兼容，架构上和树莓派2使用的4核Cortex-A7 BCM2836差不多，在32位模式运行下，速度要快50~60%（时钟频率1.2GHz vs 900MHz），尽管CPU已经支持64位，官方的操作系统Raspbian还是32位，当然树莓派3内存只有1G，运行64位操作系统可能会有点累,。 如果要体验真64位系统，目前可以考虑带2G内存，千兆网口的ODROID-C2，可装Ubuntu 16.04和Android 5.1。
一般情况下，不带散热片的CPU温度在45度左右，我有个脚本会每五分钟上传一下温度：https://personal.xively.com/feeds/1480103458
Node.js 安装5.0.0
wget https://nodejs.org/dist/v5.0.0/node-v5.0.0-linux-armv7l.tar.gz tar -xvf node-v5.0.0-linux-armv7l.tar.gz cd node-v5.0.0-linux-armv7l sudo cp -R * /usr/local/ 升级
        <a href="https://blog.hugozhu.site/post/2016/62-raspberrypi-3/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2016/61-smart-router-with-iptable/">
        <h2 class="post-title">用iptables搭建稳定的加速代理</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 6, 2016
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;195&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        设置步骤 在阿里云中国和美国都购买一个VPS，用同样的操作系统，都安装好 shadowsocks-libev ( https://github.com/shadowsocks/shadowsocks-libev )
编辑配置文件 config.json 如下： { &#34;server&#34;:&#34;&lt;your_ip_address&gt;&#34;, &#34;local_address&#34;:&#34;0.0.0.0&#34;, &#34;server_port&#34;:10080, &#34;local_port&#34;:1080, &#34;password&#34;:&#34;password&#34;, &#34;method&#34;:&#34;bf-cfb&#34;, &#34;timeout&#34;:600 } 在美国的服务器上执行： nohup ss-server config.json &amp; 在中国的服务器上执行： nohup ss-redir config.json &amp; 在中国的服务器上安装好L2TP服务， /etc/xl2tpd/xl2tpd.conf 里设置好vpn ip段
[global] ipsec saref = yes listen-addr = &lt;外网IP&gt; [lns default] ip range = 192.168.1.10-192.168.1.20 local ip = 192.168.1.1 ;require chap = yes refuse chap = yes refuse pap = yes require authentication = yes ppp debug = yes pppoptfile = /etc/ppp/xl2tpd-options length bit = yes /etc/ppp/xl2tpd-options 里设置通过vpn接入进来的设备DNS
        <a href="https://blog.hugozhu.site/post/2016/61-smart-router-with-iptable/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
        
       
       <a href="https://blog.hugozhu.site/tags/iptables/">iptables</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2015/60-run-docker-on-raspberry-pi/">
        <h2 class="post-title">在树莓派上运行Docker</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 12, 2015
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;215&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        Docker Docker是目前非常流行的代码运行容器，操作系统虚拟化，运维自动化架构和开源的解决方案。
Docker的基础是Linux容器（LXC）技术，相比传统的VM虚拟化技术, LXC更轻量，性能更好。
Docker采用Golang语言开发，在LXC基础上Docker进行了封装，简化了容器的管理。
Docker还提供了一个标准(Dockerile)来实现软件部署环境代码化，全球的开发和运维工程师可以通过官方的Docker Hub仓库分享自己创建的镜像，使用者则可以快速的把系统和应用部署到自己的环境。
树莓派二代 树莓派二代的CPU有4核，运行速度是第一代的6倍，通过Docker快速部署开发环境，开发应用，再把开发好的系统通过镜像分享和发布出去也是非常有意义的事。因为树莓派的官方操作系统Raspbian并不支持Docker，本文主要介绍下如何在树莓派二代上运行Docker的几种方法。
Arch Linux ARM Arch Linux ARM 是由开源社区维护专为ARMv6（如树莓派一代）和 ARMv7（如树莓派二代, pcDuino3）等嵌入式硬件提供内核及软件支持的Linux发行版本。
在树莓派上安装Arch Linux和Raspbian略有不同，详细步骤可以看参考链接4。 总得来说是你需要在SD卡上分两个区并格式化，一个是FAT 32(LBA)格式的引导分区(/boot)，另一个是系统根分区（/root）。然后把下载下来的文件解开来复制到这两个分区就可以了。
你也可以只在SD卡上放/boot分区（这样可以用较小的如1G的SD卡引导树莓派），在U盘上放根分区，通过USB扩展存储可以允许你存放很多的镜像文件。
安装好Arch Linux后，参考这篇文章做完基础设置。
安装docker pacman -S docker 目前安装好的版本是1.5
开机自动docker systemctl enable docker 把登录用户加到docker组 这样不需要root也能执行docker了
gpasswd -a &lt;your_login&gt; docker 执行docker Docker Hub上搜索rpi已经可以找到不少适合Raspberry Pi运行的镜像了，热心网友都是棒棒哒。
[hugo@alarmpi ~]$ docker -v Docker version 1.5.0, build a8a31e [hugo@alarmpi ~]$ docker search rpi NAME DESCRIPTION STARS OFFICIAL AUTOMATED resin/rpi-raspbian Base image for the Raspberry Pi. Contains .
        <a href="https://blog.hugozhu.site/post/2015/60-run-docker-on-raspberry-pi/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
        
       
       <a href="https://blog.hugozhu.site/tags/docker/">docker</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2015/59-use-raspberrypi-to-build-an-augmented-traffic-control-system/">
        <h2 class="post-title">使用树莓派搭建低成本，便携，多用户的弱网模拟器：高效测试手机App在弱网下的可用性</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on March 28, 2015
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;311&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        背景 我们的手机经常会处于弱网情况下，电梯里，高铁上，在地铁站，电影院里。。。如果手机应用不针对弱网做优化，就会出现：白屏页面刷不出来，界面卡死，错误提示一堆，菊花转不停，用户抓狂。。。
移动应用开发团队应该将App在弱网下的可用性作为一个重要的性能指标，在设计和开发阶段考虑在弱网下的体验。
Linux可以使用netem或iptables来实现以下网络模拟：
packet delay 网络包延迟 packet loss 网络包丢失 packet corruption 错误的网络包 packet duplication 重复发送网络包 packet re-ordering 网络包传输顺序 bandwidth 带宽控制 Facebook最近也开源了他们的augmented traffic control: https://github.com/facebook/augmented-traffic-control 主要使用iptables和python实现，架构合理容易扩展，其控制方法允许多台手机同时使用，并应用不同的网络控制策略；因为提供了RPC接口，在其基础上二次开发也可以较方便的实现自动化弱网测试。
将树莓派设置成路由器，集成上面提到的软件+二次开发后，我们可以打造出一个低成本，便携，多用户的弱网模拟器。
硬件准备 树莓派一只 USB无线网卡（芯片使用RealTek RT5370的最方便，RT8188C, RTL8192CU的需要patch hostapd） 8G TF卡 5V/2A充电器 Micro USB线 以太网线 USB 3G网卡 + SIM卡（可选） 10000mAh 移动电源（可选） 硬件成本300~500元。
安装系统 插上后无线网卡后先执行lsusb看系统是否已经识别，我们要将无线网卡设置成AP模式，WAN口接外网，让手机通过Wifi接入上网。
hugo@raspberrypi2 ~ $ lsusb ... Bus 001 Device 005: ID 0bda:8178 Realtek Semiconductor Corp. RTL8192CU 802.11n WLAN Adapter 修改/etc/network/interfaces为以下内容，设置无线LAN的静态IP为192.168.3.1
auto lo iface lo inet loopback iface eth0 inet dhcp allow-hotplug wlan0 #iface wlan0 inet manual #wpa-roam /etc/wpa_supplicant/wpa_supplicant.
        <a href="https://blog.hugozhu.site/post/2015/59-use-raspberrypi-to-build-an-augmented-traffic-control-system/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
         
    </div>
    

</article>
          
            <article class="post-preview">
    <a href="https://blog.hugozhu.site/post/2015/58-diy-airplay-hifi-audio-system/">
        <h2 class="post-title">自己搭建Airplay高清音乐播放系统</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on March 15, 2015
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;424&nbsp;words
  
  
  
</span>


    </p>
    <div class="post-entry">
        
        先看一下在iPhone 6 plus上用虾米播放高音质音乐的效果：
苹果的Airplay协议是通过基于RSTP（Real Time Streaming Protocol）协议通过UDP传输的无损编码音频流(Apple Lossless codec，音频流本身经过了AES加密，私钥是不公开的，这样只有苹果和其合作伙伴才能使用这个协议。但是2004年有人通过逆向工程获得了私钥并将其公开，这样我们也可以自己搭建低成本高音质的基于Airplay的音乐系统。在iPhone成为街机的时代，每个人的手机里有很多喜欢的音乐，如果在家里可以通过无线网络在音响系统里播放会方便很多。
硬件 pcDunio Acadia 或 Raspberry Pi 一只 3.5mm音频线一根，类似这种 有源音箱一对 网线一根或USB无线网卡一只 音频芯片 好的音质需要好的音源，无损音乐加好的前端输出是必不可少的。 pcDuino Acadia集成的音频芯片是业界领先的英国Wolfson（欧胜微电子）为高清音频设计的WM8962 。树莓派集成的音频芯片则是由美国Broadcom（博通）封装在主芯片BCM2835里通过PWM (pulse-width modulation) 提供的，比较简单音质一般，达不到高清音频的要求。
下面是树莓派音频口播放1kHz正弦信号的输出波形，可以看出来波形并不好。 正是因为板载音频质量差强人意，Wolfson也专为树莓派设计了基于WM5102 codec芯片的Wolfson Audio Card （售价高达$34.95，性价比不高，这块芯片也用在了魅族MX3上）。 更好的方案是使用USB声卡，如淘宝上可以购买的基于德州仪器的PCM2704的USB声卡，40多人民币。
综上，如果想DIY自己的高清音乐播放系统，只有树莓派还是不够的，可以考虑用pcDunio Acadia或额外购买USB DAC。
声音测试和调节 声音测试 首先需要用音频线把板子和有源音箱连接起来，如果线材或音箱质量不够好，会立刻听到背景噪音，实测树莓派的背景噪音比pcDuino Acadia要大一些。
注：普通用户不一定有权限使用系统音频设备，所以以下测试需要root或audio group里的用户。
首先可以用speaker-test命令测试是否能出声。
hugo@raspberrypi2 ~ $ sudo speaker-test speaker-test 1.0.25 Playback device is default Stream parameters are 48000Hz, S16_LE, 1 channels Using 16 octaves of pink noise Rate set to 48000Hz (requested 48000Hz) Buffer size range from 512 to 32768 Period size range from 512 to 32768 Using max buffer size 32768 Periods = 4 was set period_size = 8192 was set buffer_size = 32768 0 - Front Left Time per period = 2.
        <a href="https://blog.hugozhu.site/post/2015/58-diy-airplay-hifi-audio-system/" class="post-read-more">[Read More]</a>
        
    </div>

    
    <div class="blog-tags">
        
       
       <a href="https://blog.hugozhu.site/tags/raspberry-pi/">Raspberry Pi</a>&nbsp;
        
       
       <a href="https://blog.hugozhu.site/tags/pcdunio-acadia/">pcDunio Acadia</a>&nbsp;
         
    </div>
    

</article>
          
        </div>

        
          <ul class="pager main-pager">
            
              <li class="previous">
                <a href="https://blog.hugozhu.site/page/1/">&larr; Newer Posts</a>
              </li>
            
            
              <li class="next">
                <a href="https://blog.hugozhu.site/page/3/">Older Posts &rarr;</a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>

      
    <div class="page-meta">
  
  
  
</div>


  
<footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
		
		  <a href="mailto:hugozhu@gmail.com" title="Email me">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://www.facebook.com/hugozhu" title="Facebook">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://github.com/hugozhu" title="GitHub">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://linkedin.com/in/username" title="LinkedIn">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://weibo.com/hugozhu" title="Weibo">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-weibo fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="/index.xml" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="hugozhu.site">Hugo Zhu</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2024
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://blog.hugozhu.site/">All about Raspberry Pi</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.128.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="https://blog.hugozhu.site/js/main.js"></script>
<script src="https://blog.hugozhu.site/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://blog.hugozhu.site/js/load-photoswipe.js"></script>








<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'hugozhu';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//hugozhu.disqus.com/count.js" async></script>




    
  </body>
</html>

