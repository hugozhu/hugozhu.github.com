<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>All about Raspberry Pi</title><link>https://hugozhu.site/</link><description>Recent content on All about Raspberry Pi</description><generator>Hugo</generator><language>en</language><lastBuildDate>Sat, 03 Jan 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://hugozhu.site/index.xml" rel="self" type="application/rss+xml"/><item><title>Agent强化学习的最佳实践：并行任务处理与性能优化</title><link>https://hugozhu.site/post/2026/91-agent-reinforcement-learning-best-practices/</link><pubDate>Sat, 03 Jan 2026 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2026/91-agent-reinforcement-learning-best-practices/</guid><description>&lt;p>在2026年的AI应用场景中，Agent系统已经成为解决复杂任务的核心技术。无论是代码生成助手、自动化运维系统，还是智能客服机器人，如何让Agent高效地处理多个任务并从经验中学习，直接决定了系统的实用性和用户体验。本文将深入探讨Agent强化学习的工程实践，重点解决一个关键问题：&lt;strong>如何让Agent并行处理任务以提升性能？&lt;/strong>&lt;/p></description></item><item><title>Claude Code自动修正生成代码的原理解析：Agent Loop最佳实践</title><link>https://hugozhu.site/post/2025/113-claude-code-auto-correction-agent-loop/</link><pubDate>Wed, 24 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/113-claude-code-auto-correction-agent-loop/</guid><description>&lt;p>在AI辅助编程的时代，Claude Code等智能代码助手已经成为开发者的得力助手。但你是否好奇过：为什么Claude Code能够自动发现并修正生成代码中的错误？这背后的&amp;quot;Agent Loop&amp;quot;机制究竟是如何工作的？本文将深入剖析Claude Code的自动修正原理，并分享Agent Loop的最佳实践。&lt;/p></description></item><item><title>如何用 AI 将个人网站转化为专业的 Google 求职简历</title><link>https://hugozhu.site/post/2025/112-ai-powered-google-resume-from-personal-website/</link><pubDate>Tue, 23 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/112-ai-powered-google-resume-from-personal-website/</guid><description>&lt;p>在科技行业求职，特别是向 Google 这样的顶级科技公司投递简历时，如何将个人网站上丰富的项目经验、技术博客和开源贡献转化为一份专业、精准的简历是关键。传统方式需要手动整理、提炼和格式化，既费时又容易遗漏重点。本文将介绍如何利用 AI 工具，特别是大语言模型（LLM），智能地将个人网站内容转化为符合 Google 招聘标准的专业简历。&lt;/p></description></item><item><title>多模态AI驱动的B2B订单归一化：从非标准文档到MES系统的智能工作流</title><link>https://hugozhu.site/post/2025/101-multimodal-ai-b2b-order-normalization/</link><pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/101-multimodal-ai-b2b-order-normalization/</guid><description>&lt;p>传统制造企业在数字化转型过程中，面临着一个普遍而棘手的问题：来自不同客户的订单文档格式千差万别，有PDF、Excel、Word、扫描件、甚至手写订单。这些非标准化的订单数据需要人工录入MES（制造执行系统）才能启动生产流程，不仅效率低下，而且容易出错。&lt;/p>
&lt;p>随着GPT-4V、Claude 3.5 Sonnet等多模态大模型的成熟，我们终于有了一个优雅的解决方案：结合视觉识别能力、自然语言理解和代码生成能力，构建一个智能的订单归一化工作流。在这个工作流中，AI Agent承担大部分繁重工作，人类只需在关键节点进行验证和确认，实现真正的人机协作自动化。&lt;/p></description></item><item><title>小学标准化试卷AI批改Agent最佳工程实践</title><link>https://hugozhu.site/post/2025/110-ai-exam-grading-agent-best-practices/</link><pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/110-ai-exam-grading-agent-best-practices/</guid><description>&lt;p>在教育科技领域,AI自动批改试卷已经从概念走向现实应用。本文通过一个小学标准化试卷高准确度批改的Agent实践案例,系统性地总结了如何将传统行业数据转化为AI-Ready格式的工程范式,为类似场景提供可复用的方法论。&lt;/p></description></item><item><title>构建高质量订单文档分类器：智能导流到专业Agent</title><link>https://hugozhu.site/post/2025/111-order-document-classifier-agent-routing/</link><pubDate>Sat, 20 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/111-order-document-classifier-agent-routing/</guid><description>&lt;p>在现代企业的订单处理流程中，不同类型的订单文档往往需要不同的处理逻辑和专业知识。传统的人工分类方式效率低下且容易出错，而基于规则的自动化系统又难以应对复杂多变的业务场景。本文将介绍如何利用大语言模型（LLM）构建一个高质量的订单文档分类器，实现智能路由到专业Agent的完整解决方案。&lt;/p></description></item><item><title>API、MCP和Skills：三个概念的本质区别</title><link>https://hugozhu.site/post/2025/109-api-mcp-skills-explained/</link><pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/109-api-mcp-skills-explained/</guid><description>&lt;p>当我们谈论AI应用开发时，经常会听到API、MCP（Model Context Protocol）和Skills这三个词。它们看起来都是让程序之间&amp;quot;对话&amp;quot;的方式，但究竟有什么不同？让我用一个简单的餐厅比喻来解释。&lt;/p>
&lt;p>想象你要解决&amp;quot;吃饭&amp;quot;这个问题，有三种不同的方式可以选择。每种方式代表了不同的技术范式，适用于不同的场景。&lt;/p></description></item><item><title>E2B：构建安全可靠的 AI 代理执行环境最佳实践</title><link>https://hugozhu.site/post/2025/106-e2b-ai-infrastructure-best-practices/</link><pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/106-e2b-ai-infrastructure-best-practices/</guid><description>&lt;p>当你构建一个能够自主编写和执行代码的 AI 代理时，安全性和隔离性成为了首要考虑的问题。如何让 AI 安全地运行用户或自身生成的代码，而不会影响主系统？E2B（Execute to Build）正是为解决这个问题而生的云沙箱平台。本文将深入探讨 E2B 在 AI 基础设施中的最佳实践。&lt;/p></description></item><item><title>压缩即智能：从信息论看机器学习的本质</title><link>https://hugozhu.site/post/2025/108-compression-is-intelligence/</link><pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/108-compression-is-intelligence/</guid><description>&lt;p>如果我告诉你，ChatGPT 本质上是一个文本压缩器，你会相信吗？如果我说，智能的核心就是找到更好的压缩算法，这听起来是不是过于简化了？然而，这个看似激进的观点——&amp;ldquo;压缩即智能&amp;rdquo;（Compression is Intelligence）——正在成为理解机器学习和人工智能本质的一个关键视角。&lt;/p>
&lt;p>这不仅仅是一个比喻。从信息论的角度看，压缩、预测和理解本质上是同一件事的不同侧面。当我们深入探讨这个观点时，会发现它不仅优雅地解释了为什么深度学习如此有效，还为我们思考通用人工智能（AGI）提供了一个全新的框架。&lt;/p></description></item><item><title>意图识别模块实现的最佳实践</title><link>https://hugozhu.site/post/2025/107-intent-recognition-best-practices/</link><pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/107-intent-recognition-best-practices/</guid><description>&lt;p>在构建智能对话系统、聊天机器人或语音助手时，意图识别（Intent Recognition）是最核心的组件之一。一个设计良好的意图识别模块不仅能准确理解用户需求，还能随着业务发展灵活扩展。本文将深入探讨意图识别模块实现的最佳实践，帮助你构建生产级的意图识别系统。&lt;/p></description></item><item><title>深入理解RAG：检索增强生成技术的原理与实践</title><link>https://hugozhu.site/post/2025/105-rag-retrieval-augmented-generation-guide/</link><pubDate>Fri, 19 Dec 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/105-rag-retrieval-augmented-generation-guide/</guid><description>&lt;p>在大语言模型(LLM)快速发展的今天，我们面临一个核心挑战：如何让模型能够访问和利用实时、专业或私有的知识？纯粹依赖预训练的模型往往会出现知识过时、幻觉问题，或者无法回答特定领域的问题。这就是检索增强生成(Retrieval-Augmented Generation, RAG)技术应运而生的原因。&lt;/p>
&lt;p>RAG通过将外部知识库的检索能力与LLM的生成能力相结合，为这个问题提供了一个优雅的解决方案。它不需要重新训练模型，就能让AI系统访问最新的、特定领域的知识，同时显著降低幻觉问题。本文将深入探讨RAG的核心原理、架构设计以及实际应用中的最佳实践。&lt;/p></description></item><item><title>使用docker容器来实现动态执行AI生成的代码</title><link>https://hugozhu.site/post/2025/104-e2b-with-self-host-docker-container/</link><pubDate>Sun, 22 Jun 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/104-e2b-with-self-host-docker-container/</guid><description>&lt;p>E2B是一个专为AI代码执行设计的沙盒环境，通过Docker容器提供安全隔离的代码运行空间。相比传统执行方式，E2B具有显著优势：
&lt;strong>安全性&lt;/strong>方面完全隔离宿主机，防止恶意代码损害
&lt;strong>便捷性&lt;/strong>上提供开箱即用的Python环境和丰富的预装库
&lt;strong>稳定性&lt;/strong>强，支持长时间运行和状态保持
&lt;strong>可扩展性&lt;/strong>好，支持多语言和自定义环境配置。
特别适合AI助手、代码生成工具、在线编程教育等场景，让AI生成的代码能够安全、快速地验证和执行。&lt;/p></description></item><item><title>实现docker中的Tailscale做为路由器</title><link>https://hugozhu.site/post/2025/103-wifi-to-tailscale-in-docker-bridge/</link><pubDate>Mon, 28 Apr 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/103-wifi-to-tailscale-in-docker-bridge/</guid><description>&lt;p>tailscale docker容器做为局域网的网关，前面有介绍用macvlan来实现，这次介绍bridge来实现的方案，适合不允许创建macvlan的机器。&lt;/p>
&lt;p>! docker 28后似乎不行了，不能做为路由器。&lt;/p></description></item><item><title>在Mac上用AppleScript一键排列窗口：打造高效副屏工作区</title><link>https://hugozhu.site/post/2025/102-code-mode-with-automator-and-shortcut/</link><pubDate>Tue, 15 Apr 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/102-code-mode-with-automator-and-shortcut/</guid><description>&lt;p>很多开发者在使用外接显示器时，希望可以快速恢复特定窗口布局，比如：将 &lt;code>Cursor&lt;/code> 和 &lt;code>iTerm2&lt;/code> 按照一定比例排列在副屏上。手动拖动窗口太麻烦？让我们用一段 AppleScript 自动化搞定它。&lt;/p></description></item><item><title>tailscale是事实上的个人弹性云基础网络</title><link>https://hugozhu.site/post/2025/101-tailscale-base-networking-for-personal-cloud/</link><pubDate>Thu, 27 Mar 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/101-tailscale-base-networking-for-personal-cloud/</guid><description>&lt;p>从软件能力和易用性来说，tailscale已经是事实上的个人弹性云基础网络软件。在这个软件的支撑下，个人智能设备的算力，带宽和网络资源都能被充分利用和挖掘，智能体持续发展，“挖矿”（用知识训练AI，获得相应报酬）将成为职业。&lt;/p></description></item><item><title>树莓派热点通过tailscale exit节点上网</title><link>https://hugozhu.site/post/2025/100-tailscale-hostapd/</link><pubDate>Mon, 24 Mar 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/100-tailscale-hostapd/</guid><description>&lt;p>将接入tailnet的树莓派hostapd client通过tailscale exit节点上网&lt;/p></description></item><item><title>Armbian 内核降级指南：恢复系统正常启动的完整流程</title><link>https://hugozhu.site/post/2025/90-downgrade-kernal-on-armbian/</link><pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/90-downgrade-kernal-on-armbian/</guid><description>&lt;p>R2S常规apt upgrade升级后重启，系统就启动不了了。怀疑是内核不兼容，把TF卡取出后通过USB转换器插入到树莓派USB口，尝试降级内核后解决了。&lt;/p></description></item><item><title>通过Tailscale Derp节点的公网和私网IP高性能打通网络</title><link>https://hugozhu.site/post/2025/89-tailscale-derp-node-with-two-ip-address/</link><pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/89-tailscale-derp-node-with-two-ip-address/</guid><description>&lt;p>Tailscale 是一个基于 WireGuard 的零配置 VPN 方案，使用官方 Derp（Distributed Exit Relay Protocol）中继服务器可以轻松穿透 NAT 进行设备互联。但在特定场景下，例如企业内网或跨地域机房互联时，默认的 Derp 可能不是最优解。本文介绍如何通过配置自建 Derp 服务器，使 A 网络解析为内网 IP，B 网络解析为公网 IP，实现高性能互联。&lt;/p></description></item><item><title>Tailscale Exit Node</title><link>https://hugozhu.site/post/2025/88-tailscale-exit-node-on-docker/</link><pubDate>Wed, 12 Mar 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/88-tailscale-exit-node-on-docker/</guid><description>&lt;p>&lt;a href="https://tailscale.com/">Tailscale&lt;/a> 是基于 WireGuard 的零配置 VPN 解决方案，可以轻松创建私有网络，让设备之间实现安全连接。而 &lt;strong>Exit Node（出口节点）&lt;/strong> 功能允许你将某台设备作为所有流量的出口，就像 VPN 一样，帮助你绕过网络限制或访问受地理位置限制的内容。&lt;/p></description></item><item><title>通过wifi热点接入tailscale网络</title><link>https://hugozhu.site/post/2025/87-tailscale-to-ap/</link><pubDate>Mon, 27 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/87-tailscale-to-ap/</guid><description>&lt;p>tailscale docker容器做为局域网的网关，可以让局域网内的设备无需安装tailscale客户端即可访问tailscale网络内的其他设备。
提升了便利性，安全性通过局域网访问控制来保障。&lt;/p>
&lt;p>适用场景：&lt;/p>
&lt;ul>
&lt;li>你的 Tailscale 容器充当 VPN 代理，让设备通过它访问互联网。&lt;/li>
&lt;li>你希望本机（或其他 Docker 容器）能够访问 Tailscale 网络中的设备。&lt;/li>
&lt;/ul></description></item><item><title>最简单的异地组网方案</title><link>https://hugozhu.site/post/2025/86-tailscale-docker/</link><pubDate>Sun, 26 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/86-tailscale-docker/</guid><description>&lt;p>前面介绍了使用openwrt来跑tailscale，比较合适硬路由，更简单更通用的方法是官方的用tailscale docker镜像来搭建。&lt;/p></description></item><item><title>用coredns做为主DNS解析内网的短域名</title><link>https://hugozhu.site/post/2025/85-use-coredns-to-resolve-short-dns-name/</link><pubDate>Fri, 24 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/85-use-coredns-to-resolve-short-dns-name/</guid><description>&lt;p>在内网环境中，我们常常需要使用简单易记的短域名，而不是一些严格符合域名规范的全域名。通过CoreDNS，我们可以实现对短域名的自动解析，使内网运营更加高效和便捷。这篇文章将记录如何配置CoreDNS来支持这一功能。&lt;/p></description></item><item><title>通过主路由的路由分流策略将异地内网流量转发到docker里的openwrt</title><link>https://hugozhu.site/post/2025/84-use-route-rules-to-redirect-traffic/</link><pubDate>Fri, 24 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/84-use-route-rules-to-redirect-traffic/</guid><description>&lt;p>在之前的文章中，我们已经介绍了如何通过 Docker 启动一个内置 Tailscale 的 OpenWrt。本文将进一步介绍如何结合主路由的智能路由策略，将异地内网流量高效转发到这个 OpenWrt 实例中，实现异地内网的无缝互联。&lt;/p></description></item><item><title>构建可通过IP访问的tailscale的derp relay节点</title><link>https://hugozhu.site/post/2025/83-tailscale-derp-node-with-ip/</link><pubDate>Fri, 10 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/83-tailscale-derp-node-with-ip/</guid><description>&lt;p>虽然tailscale用了很多NAT穿透 &lt;a href="https://zh.wikipedia.org/zh-cn/NAT%E7%A9%BF%E9%80%8F">NAT traversal&lt;/a>技术，但仍然会有不能P2P自连的情况，这时候tailscale就会使用最近的derp节点来建立连接，自建derper可用于加速tailscale网络的连通性能&lt;/p></description></item><item><title>使用tailscale+openwrt+docker+macvlan将异地两机房组成一个局域网</title><link>https://hugozhu.site/post/2025/82-tailscale-vpn-with-openwrt-in-docker/</link><pubDate>Sat, 04 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/82-tailscale-vpn-with-openwrt-in-docker/</guid><description>&lt;p>在现代网络环境中，将位于不同地理位置的两个数据中心组成一个虚拟局域网，可以有效提升资源共享和管理效率。本文将介绍如何在 Docker 中使用 macvlan 网络模式安装 OpenWrt，并通过 Tailscale 实现异地数据中心的互联。&lt;/p></description></item><item><title>StreamPi - 低成本快速响应系统监控工具</title><link>https://hugozhu.site/post/2025/81-streamdeck-streamdock-with-raspberry-pi/</link><pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2025/81-streamdeck-streamdock-with-raspberry-pi/</guid><description>&lt;p>在云原生时代，应用的稳定性至关重要。本文将介绍如何利用树莓派和国产StreamDeck 这两个低成本的硬件来灵活监控云原生应用的稳定性，提高运维效率。&lt;/p>
&lt;p>本文介绍如何使用Raspberry Pi和Streamdeck，以及Uptime Kuma监控线上系统的稳定性。&lt;/p></description></item><item><title>About me</title><link>https://hugozhu.site/page/about/</link><pubDate>Fri, 13 Sep 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/page/about/</guid><description>&lt;p>My name is Hugo Zhu. Please contact me at hugozhu at gmail.com&lt;/p>
&lt;p>&lt;a href="https://www.linkedin.com/in/hugozhu/">https://www.linkedin.com/in/hugozhu/&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://apps.apple.com/app/apple-store/id1659622164?pt=118612019&amp;ct=hugo&amp;mt=8">&lt;img width="200" src="https://is1-ssl.mzstatic.com/image/thumb/Purple211/v4/51/c6/ff/51c6ff77-e5b0-c53d-2f1a-b659fbc20581/AppIcon-0-0-85-220-0-0-4-0-2x.png/492x0w.webp"/>&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://apps.apple.com/app/apple-store/id1659622164?pt=118612019&amp;ct=hugo&amp;mt=8">&lt;img width="200" src="https://static-00.iconduck.com/assets.00/app-ios-icon-2048x607-djvn0n0l.png">&lt;/a>&lt;/p>
&lt;h1 id="friend-links">Friend Links:&lt;/h1>
&lt;ol>
&lt;li>7sGood: &lt;a href="https://www.7sgood.com">https://www.7sgood.com&lt;/a>&lt;/li>
&lt;li>1688Japan: &lt;a href="https://1688japan.co.jp">https://1688japan.co.jp&lt;/a>&lt;/li>
&lt;li>VidHub: &lt;a href="https://apps.apple.com/app/apple-store/id1659622164?pt=118612019&amp;amp;ct=hugo&amp;amp;mt=8">https://apps.apple.com/app/apple-store/id1659622164?pt=118612019&amp;amp;ct=hugo&amp;amp;mt=8&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>使用Apache Seatunnel跨境（低带宽丢包率高网络）同步postgres数据表</title><link>https://hugozhu.site/post/2024/80-postgres-to-postgres/</link><pubDate>Fri, 13 Sep 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/80-postgres-to-postgres/</guid><description>&lt;p>将杭州的一张表每天定时增量同步一次到新加坡的同一张表，如何稳定可靠的解决问题呢？&lt;/p>
&lt;p>首先这个场景不需要准时同步，所以并不考虑CDC方案，postgres内置的复制功能对网络要求比较高，容错性不够好。查阅资料后决定尝试下 Seatunnel: &lt;a href="https://seatunnel.apache.org/">https://seatunnel.apache.org/&lt;/a> 过程比较简单，2个小时内完成了任务，中间遇到了字段格式的问题，花了点时间找解决方案， 但最终达到了预期的效果。&lt;/p></description></item><item><title>使用clickhouse来关联查询postgres数据库</title><link>https://hugozhu.site/post/2024/79-postgres-to-clickhouse/</link><pubDate>Fri, 13 Sep 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/79-postgres-to-clickhouse/</guid><description>&lt;p>在现代数据分析领域，不同的数据库系统各有优点。PostgreSQL（Postgres）因其强大的事务处理和灵活的查询功能而备受欢迎，而ClickHouse则以其超高速的OLAP查询性能著称。虽然Postgres擅长处理关系型数据并提供强大的ACID支持，但在大规模分析查询场景中，ClickHouse显然更具优势。如果我们能在分析过程中将两者结合起来，就能同时利用Postgres的数据管理和ClickHouse的查询性能。&lt;/p>
&lt;p>本文将介绍如何通过ClickHouse来关联查询Postgres数据库的数据，实现两种数据库的无缝对接。&lt;/p></description></item><item><title>使用Airflow开发大数据生产任务</title><link>https://hugozhu.site/post/2024/78-airflow-tasks-development/</link><pubDate>Sat, 24 Aug 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/78-airflow-tasks-development/</guid><description>&lt;p>在大数据领域，任务调度和工作流管理是核心需求。无论是数据的抽取、转化、加载（ETL），还是数据分析任务，管理复杂的任务依赖性、监控任务执行情况并确保任务按时完成都十分重要。Apache Airflow 是一个开源的工作流管理平台，能够帮助你解决这些问题。&lt;/p></description></item><item><title>Blog迁移到hugo模版引擎</title><link>https://hugozhu.site/post/2024/77-migrate-from-gor-to-hugo/</link><pubDate>Sun, 07 Jul 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/77-migrate-from-gor-to-hugo/</guid><description>&lt;p>因为Blog的模版太老，不支持手机，花一点时间快速升级下，选用了hugo这个静态网站模板引擎。&lt;/p></description></item><item><title>使用acme_docker自动更新免费域名证书</title><link>https://hugozhu.site/post/2024/76-acme-docker-auto-uptime/</link><pubDate>Sun, 07 Jul 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/76-acme-docker-auto-uptime/</guid><description>&lt;h2 id="问题和解决方案">问题和解决方案&lt;/h2>
&lt;ol>
&lt;li>免费域名证书需要三个月更新一次&lt;/li>
&lt;li>解决方案：apisix, docker, acme.sh, dnspod&lt;/li>
&lt;/ol></description></item><item><title>VidHub vs. Infuse - Which one is the best video player on iOS Platform</title><link>https://hugozhu.site/post/2024/75-vidhub-infuse-which-one-is-the-best/</link><pubDate>Tue, 02 Jul 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/75-vidhub-infuse-which-one-is-the-best/</guid><description>&lt;p>Compare VidHub vs Infuse&lt;/p></description></item><item><title>R2S妙用：Armbian + docker + openwrt + hostapd，用USB网卡做热点，无线有线接入都通过openwrt做路由</title><link>https://hugozhu.site/post/2024/74-armbian-bridge-network-hostapd/</link><pubDate>Sun, 30 Jun 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/74-armbian-bridge-network-hostapd/</guid><description>&lt;h2 id="背景">背景&lt;/h2>
&lt;p>Armbian 是一款基于 Debian 或 Ubuntu 的开源操作系统，专门针对嵌入式 ARM 平台进行优化和定制。它可以运行在多种不同的嵌入式设备上，例如树莓派、R2S，R4S，玩客云等等。Armbian 针对不同的嵌入式平台，提供了相应的硬件支持，可以让用户轻松地在这些平台上搭建自己的嵌入式系统。&lt;/p>
&lt;p>刚好有一块闲置了几年的R2S卡片机和树莓派2时代的无线网卡。&lt;/p></description></item><item><title>Ubuntu 22 Remote Desktop Sharing Without Real Monitor</title><link>https://hugozhu.site/post/2024/73-ubuntu-22-remote-desktop/</link><pubDate>Tue, 20 Feb 2024 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2024/73-ubuntu-22-remote-desktop/</guid><description>Ubuntu 22 remote desktop sharing without monitor.</description></item><item><title>Use Rancher to manage k8s cluster</title><link>https://hugozhu.site/post/2022/73-use-rancher-to-create-k8s-cluster/</link><pubDate>Tue, 16 Aug 2022 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2022/73-use-rancher-to-create-k8s-cluster/</guid><description>&lt;p>How to use Rancher to manage k8s cluster?&lt;/p></description></item><item><title>Bash-Oneliner</title><link>https://hugozhu.site/post/2022/72-bash-oneliner/</link><pubDate>Mon, 18 Jul 2022 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2022/72-bash-oneliner/</guid><description>&lt;p>&lt;a href="https://onceupon.github.io/Bash-Oneliner/#time">https://onceupon.github.io/Bash-Oneliner/#time&lt;/a>&lt;/p></description></item><item><title>用Gitlab Runner来打包并上传Harbor</title><link>https://hugozhu.site/post/2022/71-gitlab-runner-using-docker-build/</link><pubDate>Mon, 16 May 2022 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2022/71-gitlab-runner-using-docker-build/</guid><description>&lt;p>&lt;a href="https://docs.gitlab.com/ee/ci/docker/using_docker_build.html">https://docs.gitlab.com/ee/ci/docker/using_docker_build.html&lt;/a>&lt;/p></description></item><item><title>Google Analytics 4 简介</title><link>https://hugozhu.site/post/2022/70-google-analytics-101/</link><pubDate>Thu, 10 Mar 2022 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2022/70-google-analytics-101/</guid><description>&lt;h2 id="google-analytics-4-简介">Google Analytics 4 简介&lt;/h2>
&lt;p>Google Analytics（分析）可帮助您了解人们使用您的 Web、Apple 或 Android 应用的方式。SDK 会自动收集大量事件和用户属性，您也可以定义自定义事件，以便衡量对您的业务有特殊影响的因素。收集到数据后，可通过 Firebase 控制台到信息中心中查看。通过此信息中心，您可以深入、详细地了解您的数据，包括摘要数据（如活跃用户和受众特征）和更详细的数据（如识别您最畅销的商品）。&lt;/p></description></item><item><title>在iPad上写Blog</title><link>https://hugozhu.site/post/2020/69-write-your-blog-on-ipad/</link><pubDate>Fri, 20 Mar 2020 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2020/69-write-your-blog-on-ipad/</guid><description>&lt;p>iPad的创作能力越来越强，直接修改Github上的文件就可以写Blog了，方法是在Github上建一个自动更新网站的Workflow&lt;/p></description></item><item><title>把树莓派4设置成路由器和热点</title><link>https://hugozhu.site/post/2020/68-turn-raspberrypi-4-to-a-router-and-wifi-ap/</link><pubDate>Mon, 17 Feb 2020 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2020/68-turn-raspberrypi-4-to-a-router-and-wifi-ap/</guid><description>&lt;p>树莓派4的性能非常好，内置千兆网卡和AC无线，非常合适做路由器和热点，加上USB 3.0的接口，做NAS也绰绰有余。&lt;/p></description></item><item><title>Big Image Sample</title><link>https://hugozhu.site/page/tools/</link><pubDate>Tue, 07 Mar 2017 00:00:00 +0000</pubDate><guid>https://hugozhu.site/page/tools/</guid><description>&lt;p>The image banners at the top of the page are refered to as &amp;ldquo;bigimg&amp;rdquo; in this theme. They are optional, and one more more can be specified. If more than one is specified, the images rotate every 10 seconds. In the front matter, bigimgs are specified using an array of hashes.&lt;/p></description></item><item><title>用免费的Google云服务将Github项目Webhook事件通知到钉钉</title><link>https://hugozhu.site/post/2016/67-use-free-google-cloud-service-to-deliver-github-webhook-events-to-dingtalk/</link><pubDate>Sun, 15 May 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/67-use-free-google-cloud-service-to-deliver-github-webhook-events-to-dingtalk/</guid><description>&lt;p>本教程使用&lt;code>Go&lt;/code>语言来实现&lt;/p>
&lt;p>&lt;img src="http://static.dingtalk.com/media/lALOAQ6nfSvM5Q_229_43.png" alt="image">&lt;/p></description></item><item><title>从树莓派上发消息到手机或桌面钉钉</title><link>https://hugozhu.site/post/2016/66-use-dingtalk-golang-sdk-to-send-message-on-pi/</link><pubDate>Mon, 02 May 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/66-use-dingtalk-golang-sdk-to-send-message-on-pi/</guid><description>&lt;p>&lt;img src="http://static.dingtalk.com/media/lALOAQ6nfSvM5Q_229_43.png" alt="image">&lt;/p>
&lt;p>钉钉是阿里巴巴专为中小企业和团队打造的沟通、协同的多端平台，钉钉开放平台旨在为企业提供更为丰富的办公协同解决方案。通过钉钉开放平台，企业或第三方合作伙伴可以帮助企业快速、低成本的实现高质量的移动微应用，实现生产、管理、协作、运营的移动化。&lt;/p></description></item><item><title>用Grafana制作树莓派上的监控大盘</title><link>https://hugozhu.site/post/2016/65-running-grafana-on-raspberry-pi-3/</link><pubDate>Sun, 24 Apr 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/65-running-grafana-on-raspberry-pi-3/</guid><description>&lt;p>&lt;a href="http://grafana.org">Grafana&lt;/a>是一个优秀的开源图表系统，支持多种数据源，其中包括
&lt;a href="https://influxdata.com">InfluxDB&lt;/a>和&lt;a href="http://hugozhu.myalert.info/2016/04/17/64-set-up-monitor-system-with-prometheus-on-raspberry.html">Prometheus&lt;/a>&lt;/p></description></item><item><title>树莓派3变身iBeacon发射器</title><link>https://hugozhu.site/post/2016/63-raspberrypi-as-ibeacon-transmitter/</link><pubDate>Tue, 19 Apr 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/63-raspberrypi-as-ibeacon-transmitter/</guid><description>&lt;p>iBeacon是apple公司提出的“一种可以让附近手持电子设备检测到的一种新的低功耗、低成本信号传送器”的一套可用于室内定位系统的协议。iBeacon技术通过低功耗蓝牙（BLE），也就是我们所说的智能蓝牙来实现。&lt;/p></description></item><item><title>在树莓派3上搭建监控系统</title><link>https://hugozhu.site/post/2016/64-set-up-monitor-system-with-prometheus-on-raspberry/</link><pubDate>Sun, 17 Apr 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/64-set-up-monitor-system-with-prometheus-on-raspberry/</guid><description>&lt;p>之前用过&lt;a href="https://github.com/alibaba/tsar">tsar&lt;/a>做监控，但没有基于浏览器的图表展示，而且tsar收集数据很频繁，容易写坏SD卡。后来一直用&lt;a href="https://personal.xively.com">Xively&lt;/a> SaaS服务，但因为服务在国外，访问速度一直不尽人意。直到今天早上读到InfoQ的一篇文章才知道了&lt;a href="https://prometheus.io">Prometheus&lt;/a>，看了一下介绍后发现Prometheus的以下特点非常合适在树莓派上部署：&lt;/p>
&lt;ol>
&lt;li>采用Go实现支持，天然支持跨平台，配置相当简单，维护和二次开发的成本小；&lt;/li>
&lt;li>采集数据支持Pull和Push模式，可以自定义不同采集点的采样频率，适合轻量型应用降低能耗；&lt;/li>
&lt;li>二次计算和查询方式很灵活&lt;/li>
&lt;li>自带 &lt;code>Grafana&lt;/code>数据可视化工具；&lt;/li>
&lt;li>可配置的内存+磁盘存储大小，采用的时间序列文件和Level DB做索引效率较高，不会让监控软件本身消耗过多的树莓派计算和存储资源&lt;/li>
&lt;/ol></description></item><item><title>树莓派3初体验</title><link>https://hugozhu.site/post/2016/62-raspberrypi-3/</link><pubDate>Wed, 13 Apr 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/62-raspberrypi-3/</guid><description>&lt;p>树莓派基金会今年推出的新品Raspberry Pi 3已经到手，官方宣传性能比树莓派2代快50%，比树莓派1代快10倍，第一次使用的64位四核处理器（博通BCM2837）配备了ARM Cortex-A53处理器，内置了802.11 b/g/n 2.4GHz WIFI和蓝牙4.1，显卡没变，还是双核VideoCore IV（并不支持4K视频）。CPU升级也对能耗有了更高的要求，官方说法最好是使用5V 2.5A的电源输入（iPad充电器），实测在无外设的情况下，2A的电流输出也可以让Pi 3正常运行。价格和树莓派2也一样，官方售价税前35美金，国内可以在淘宝上买到，238元一枚，&lt;a href="https://item.taobao.com/item.htm?spm=a230r.1.14.19.82ysfy&amp;amp;id=527525039334&amp;amp;ns=1&amp;amp;abbucket=18#detail">点此购买&lt;/a>&lt;/p>
&lt;p>&lt;img src="http://ww4.sinaimg.cn/bmiddle/6bc40342jw1f1vev06fbij20rs0hkn2a.jpg" alt="image">&lt;/p>
&lt;p>&lt;strong>我深深的认为每个程序员都需要有一块树莓派，24*7的运行在家里的网络上&lt;/strong> ，投入成本在300人民币以内（树莓派加电源：250，SD卡：50），每年电费在10元以内。树莓派支持各种编程语言的开发，安装体验各种操作系统非常简单，丰富的外部接口，支持很多类型的传感器和控制器外设，可以让你轻松设计和实现智能硬件，技术让生活更美好~&lt;/p>
&lt;h1 id="外观">外观&lt;/h1>
&lt;p>树莓派3的规格大小则和树莓派2完全一样，你甚至可以直接用树莓派2的外壳，完全贴合。&lt;/p>
&lt;p>&lt;img src="http://ww4.sinaimg.cn/bmiddle/6bc40342gw1f1sd7r0iwrj20zk0qodnp.jpg" alt="image">&lt;/p>
&lt;p>背面看略有不同，中间的芯片是1G内存，树莓派3的内存速度快了1倍，右边是CF卡插槽，树莓派2是回弹式卡槽（取出CF卡时只要往力再摁一下就会弹出），树莓派3可能为了降低成本或是因为板卡空间的问题改成了更紧凑的插入式，装上外壳后取出的时候有点费劲，我需要用瑞士军刀的镊子夹出来。&lt;/p>
&lt;p>&lt;img src="http://ww2.sinaimg.cn/bmiddle/6bc40342gw1f1sd7pk73sj20qo0zkdpq.jpg" alt="image">&lt;/p>
&lt;p>（下图是树莓派3）&lt;/p>
&lt;h1 id="安装启动">安装启动&lt;/h1>
&lt;p>如果你不需要GUI,推荐安装&lt;a href="https://downloads.raspberrypi.org/raspbian_lite_latest">Raspbian Jessie Lite&lt;/a>，大小只有298.3M，下载完成后解压缩成img文件后用dd命令写到CF卡上去。你也可以下载&lt;a href="https://downloads.raspberrypi.org/NOOBS_latest">NOOBS&lt;/a>完整安装。&lt;/p>
&lt;h1 id="wifi">WIFI&lt;/h1>
&lt;p>编辑无线配置文件&lt;code>/etc/wpa_supplicant/wpa_supplicant.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ctrl_interface&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">DIR&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wpa_supplicant&lt;/span> &lt;span class="n">GROUP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">netdev&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">update_config&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">network&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">ssid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;无线AP的名称&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">psk&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;无线密码&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果有多个无线网络可以接入，增加&lt;code>network&lt;/code>即可&lt;/p>
&lt;p>修改好后如果没有自动生效连上网络可以通过以下命令强制生效&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ifdown wlan0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ifup wlan0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>非常重要的一点是：如果你希望无线网络一直连接，需要关闭掉无线模块的电源管理，否则没有网络流量后，WIFI会自动关闭。。。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo iwconfig wlan0 power off
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>测试wifi速度：从通过网线连接到极路由2的Mac拷贝文件到树莓派3上，内置网卡的传输速度在4MB/s左右，如果换上300Mbps的USB无线网卡&lt;code>EDUP EP-N1557&lt;/code>则可以达到9MB/s左右，速度要快1倍。结论是内置的wifi模块速度只有150Mbps，如果对网络速度要求较高，最稳定的方法还是插根网线。&lt;/p>
&lt;p>安装好&lt;code>nginx&lt;/code>后，用&lt;code>ab&lt;/code>测试最简单的HTML网页性能，树莓派3可以轻松超过1000 QPS，满足个人网站的性能需求。&lt;/p>
&lt;h1 id="cpu">CPU&lt;/h1>
&lt;p>树莓派3使用的4核Cortex-A53 BCM2837 SoC为了向下兼容，架构上和树莓派2使用的4核Cortex-A7 BCM2836差不多，在32位模式运行下，速度要快50~60%（时钟频率1.2GHz vs 900MHz），尽管CPU已经支持64位，官方的操作系统Raspbian还是32位，当然树莓派3内存只有1G，运行64位操作系统可能会有点累,。
如果要体验真64位系统，目前可以考虑带2G内存，千兆网口的&lt;a href="https://item.taobao.com/item.htm?spm=a230r.1.14.1.aQSAa0&amp;amp;id=527695599811&amp;amp;ns=1&amp;amp;abbucket=18#detail">ODROID-C2&lt;/a>，可装Ubuntu 16.04和Android 5.1。&lt;/p>
&lt;p>一般情况下，不带散热片的CPU温度在45度左右，我有个脚本会每五分钟上传一下温度：&lt;a href="https://personal.xively.com/feeds/1480103458">https://personal.xively.com/feeds/1480103458&lt;/a>&lt;/p>
&lt;h1 id="nodejs">Node.js&lt;/h1>
&lt;p>安装5.0.0&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://nodejs.org/dist/v5.0.0/node-v5.0.0-linux-armv7l.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -xvf node-v5.0.0-linux-armv7l.tar.gz 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd node-v5.0.0-linux-armv7l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -R * /usr/local/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>升级&lt;/p></description></item><item><title>用iptables搭建稳定的加速代理</title><link>https://hugozhu.site/post/2016/61-smart-router-with-iptable/</link><pubDate>Wed, 06 Apr 2016 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2016/61-smart-router-with-iptable/</guid><description>&lt;h1 id="设置步骤">设置步骤&lt;/h1>
&lt;p>在阿里云中国和美国都购买一个VPS，用同样的操作系统，都安装好 &lt;code>shadowsocks-libev&lt;/code> ( &lt;a href="https://github.com/shadowsocks/shadowsocks-libev">https://github.com/shadowsocks/shadowsocks-libev&lt;/a> )&lt;/p></description></item><item><title>在树莓派上运行Docker</title><link>https://hugozhu.site/post/2015/60-run-docker-on-raspberry-pi/</link><pubDate>Sun, 12 Apr 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/60-run-docker-on-raspberry-pi/</guid><description>&lt;h1 id="docker">Docker&lt;/h1>
&lt;p>Docker是目前非常流行的代码运行容器，操作系统虚拟化，运维自动化架构和开源的解决方案。&lt;/p>
&lt;p>Docker的基础是Linux容器（LXC）技术，相比传统的VM虚拟化技术, LXC更轻量，性能更好。&lt;/p>
&lt;p>Docker采用Golang语言开发，在LXC基础上Docker进行了封装，简化了容器的管理。&lt;/p></description></item><item><title>使用树莓派搭建低成本，便携，多用户的弱网模拟器：高效测试手机App在弱网下的可用性</title><link>https://hugozhu.site/post/2015/59-use-raspberrypi-to-build-an-augmented-traffic-control-system/</link><pubDate>Sat, 28 Mar 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/59-use-raspberrypi-to-build-an-augmented-traffic-control-system/</guid><description>&lt;h1 id="背景">背景&lt;/h1>
&lt;p>我们的手机经常会处于弱网情况下，电梯里，高铁上，在地铁站，电影院里。。。如果手机应用不针对弱网做优化，就会出现：白屏页面刷不出来，界面卡死，错误提示一堆，菊花转不停，用户抓狂。。。&lt;/p>
&lt;p>移动应用开发团队应该将App在弱网下的可用性作为一个重要的性能指标，在设计和开发阶段考虑在弱网下的体验。&lt;/p></description></item><item><title>自己搭建Airplay高清音乐播放系统</title><link>https://hugozhu.site/post/2015/58-diy-airplay-hifi-audio-system/</link><pubDate>Sun, 15 Mar 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/58-diy-airplay-hifi-audio-system/</guid><description>&lt;p>先看一下在iPhone 6 plus上用虾米播放高音质音乐的效果：&lt;/p></description></item><item><title>在树莓派上用Node.js监视网页变化并通知手机</title><link>https://hugozhu.site/post/2015/57-use-node-module-phantom-to-monitor-webpage-updates/</link><pubDate>Sat, 07 Mar 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/57-use-node-module-phantom-to-monitor-webpage-updates/</guid><description>Use Node.js module phantom to monitor webpage updates on Raspberry Pi</description></item><item><title>用16M的SD卡启动树莓派，在U盘上安装和运行Linux</title><link>https://hugozhu.site/post/2015/56-boot-raspberrypi-from-16m-sdcard-and-install-raspbian-on-usb-sticker/</link><pubDate>Thu, 05 Mar 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/56-boot-raspberrypi-from-16m-sdcard-and-install-raspbian-on-usb-sticker/</guid><description>&lt;p>树莓派官方的操作系统Raspbian最少需要4G的SDCard，如果你恰好有比较小的SD卡怎么办呢？设计上树莓派只能从SD卡引导启动，但我们可以在SD卡上装一个最小的引导系统，然后把树莓派引导到U盘上启动。SD卡连续运行，读写比较频繁也容易损坏（我已经坏掉3张了。。。），相比之下U盘价格便宜些，读写速度可以比SD卡还高。&lt;/p>
&lt;h1 id="制作引导sd卡">制作引导SD卡&lt;/h1>
&lt;p>这个引导系统只需要16M容量的SD卡，先把SD卡格式化成FAT（windows），然后拷贝下面的文件到根目录。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/hugozhu/mini_raspbian_boot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改 &lt;code>cmdline.txt&lt;/code> 中的 &lt;code>root=/dev/mmcblk0p2&lt;/code> 为 &lt;code>root=/dev/sda2&lt;/code> 以指定用U盘启动&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">dwc_otg.lpm_enable=0 console=ttyAMA0,115200 kgdboc=ttyAMA0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait cgroup_enable=memory
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="安装操作系统raspbian到u盘">安装操作系统Raspbian到U盘&lt;/h1>
&lt;p>方法和安装到SD卡一样，在Mac上使用 &lt;code>dd&lt;/code> 命令安装，在Windows上可以用win32diskimager：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo dd bs=1m if=2015-01-31-raspbian.img of=/dev/disk4 #/dev/disk4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="扩展分区">扩展分区&lt;/h1>
&lt;p>如果你的U盘容量大于4G，那么上一步安装完后，你的U盘只能看到4G空间，大容量的SD卡的这个问题可以通过自带的&lt;code>raspi-config&lt;/code>命令来解决。
Linux下可以用&lt;code>fdisk&lt;/code>来解决，我的方法是把该U盘插到已经正常启动的树莓派的USB口上，正常识别后，执行&lt;code>sudo fdisk /dev/sda&lt;/code>&lt;/p>
&lt;ol>
&lt;li>按&lt;code>p&lt;/code>后打印出分区表：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/dev/sda1 8192 122879 57344 c W95 FAT32 (LBA)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/sda2 122880 6399999 3138560 83 Linux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>
&lt;p>记住/dev/sda2的起始点&lt;code>122880'，然后按&lt;/code>d&lt;code>，删除掉二个分区，接着按&lt;/code>n&lt;code>重新创建一个分区，起始点就设置为&lt;/code>122880`，结束点可以设置为最大&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最后按&lt;code>w&lt;/code>保存新的分区表&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>插上引导SD卡和系统U盘后树莓派就可以愉快的运行起来了，如果U盘的速度足够快，你会发现系统还变快了。&lt;/p>
&lt;h1 id="参考文章">参考文章&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://www.raspberrypi.org/boot-from-a-16mb-sd-card/">http://www.raspberrypi.org/boot-from-a-16mb-sd-card/&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>用Telegram和树莓派交互</title><link>https://hugozhu.site/post/2015/55-use-telegram-to-chat-with-raspberrypi/</link><pubDate>Fri, 27 Feb 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/55-use-telegram-to-chat-with-raspberrypi/</guid><description>&lt;p>如果你的树莓派不能通过路由器端口转发直接从家庭网络外访问，你还可以用类似聊天App一样的方式来和防火墙后的树莓派轻松交互，通过命令来控制树莓派。&lt;/p>
&lt;h1 id="telegram">Telegram&lt;/h1>
&lt;p>&lt;img src="https://telegram.org/img/t_logo.png" alt="image">&lt;/p>
&lt;p>Telegram是一个跨平台的即时通讯软件，客户端和通讯及加密协议完全公开且开源。官方有正式发布Android，iOS，Mac OS X， Web等客户端版本；Telegram允许多端同时登录。我们在手机上安装Telegram客户端，同时在树莓派上用同一个帐号或另一个帐号也登录Telegram，那么就可以用手机和树莓派聊天了，更高级的一些用法可以是把树莓派帐号加到群聊中，实现类似&lt;a href="http://www.msxiaoice.com/v2/DesktopLanding">微软小冰&lt;/a>的功能；也可以由树莓派主动向你的手机Push消息实现提醒功能。&lt;/p>
&lt;h2 id="安装telegram-cli">安装telegram-cli&lt;/h2>
&lt;p>Linux的Telegram客户端telegram-cli源代码在 &lt;a href="https://github.com/vysheng/tg">https://github.com/vysheng/tg&lt;/a>，按照Readme在树莓派上编译好。telegram-cli支持消息事件对lua脚本中的函数进行回调，支持的函数列表在：&lt;a href="https://github.com/vysheng/tg/blob/master/README-LUA">https://github.com/vysheng/tg/blob/master/README-LUA&lt;/a>，也支持外部程序通过telegram-cli侦听的端口发送交互命令（一次连接只能一个命令）&lt;/p>
&lt;h2 id="lua交互脚本">Lua交互脚本&lt;/h2>
&lt;p>脚本命名为：&lt;code>tg_raspberrypi.lua&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">now&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;树莓派通知&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="n">telegram的会话名称&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;uptime&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;uptime&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ps&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ps ax&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;netstat&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;netstat -na&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;df&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;df&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ss&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ss&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;free&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;free&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_msg_receive&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	 &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="o">--&lt;/span> &lt;span class="n">mark_read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">print_name&lt;/span>&lt;span class="p">)&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="o">--&lt;/span> &lt;span class="n">vardump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">cmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">if&lt;/span> &lt;span class="n">cmd&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;ping&amp;#34;&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">send_msg&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">chat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pong&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ok_cb&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">elseif&lt;/span> &lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">~=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">send_msg&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">chat&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">safe_commands&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="p">]),&lt;/span> &lt;span class="n">ok_cb&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_our_id&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_secret_chat_created&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">peer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_user_update&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_chat_update&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_get_difference_end&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">on_binlog_replay_end&lt;/span> &lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">local&lt;/span> &lt;span class="n">output&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">assert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">popen&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">lines&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">output&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">output&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">line&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">output&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">trim&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">gsub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;^&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">*(.-)&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">*$&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;%1&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">function&lt;/span> &lt;span class="n">vardump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">local&lt;/span> &lt;span class="n">linePrefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">local&lt;/span> &lt;span class="n">spaces&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="o">~=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">linePrefix&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;[&amp;#34;&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="s2">&amp;#34;] = &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">depth&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">depth&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">spaces&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">spaces&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> &lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;table&amp;#39;&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mTable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getmetatable&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">mTable&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">spaces&lt;/span> &lt;span class="o">..&lt;/span>&lt;span class="n">linePrefix&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="s2">&amp;#34;(table) &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">spaces&lt;/span> &lt;span class="o">..&lt;/span>&lt;span class="s2">&amp;#34;(metatable) &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mTable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span>		
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">tableKey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tableValue&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">pairs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vardump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tableValue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tableKey&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">elseif&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span>	&lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;function&amp;#39;&lt;/span> &lt;span class="ow">or&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span>	&lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;thread&amp;#39;&lt;/span> &lt;span class="ow">or&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span>	&lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;userdata&amp;#39;&lt;/span> &lt;span class="ow">or&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>		&lt;span class="o">==&lt;/span> &lt;span class="n">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">spaces&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">tostring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">spaces&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">linePrefix&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="s2">&amp;#34;(&amp;#34;&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="s2">&amp;#34;) &amp;#34;&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">tostring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">exec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;uptime&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="启动telegram-cli">启动telegram-cli&lt;/h1>
&lt;h2 id="第一次启动">第一次启动&lt;/h2>
&lt;p>第一次启动telegram-cli会需要你输入手机号码，输入短信验证码后登录，成功登录后会在~/.telegram-cli下保存登录信息，后面就不需要再登录了。&lt;/p></description></item><item><title>用树莓派2代打造智能家庭路由</title><link>https://hugozhu.site/post/2015/54-raspberrypi2-pptp-redsocks2-chinadns/</link><pubDate>Thu, 26 Feb 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/54-raspberrypi2-pptp-redsocks2-chinadns/</guid><description>&lt;p>家里的宽带上下行都有10Mbps了吧？除了可以BT下载外还能让你的移动设备在外的时候也能科学上网。&lt;/p>
&lt;p>区别于在海外架设VPN服务：&lt;/p>
&lt;ul>
&lt;li>国内和大部分国外网站都可以直连而不降低速度；不像海外VPN所有流量（国内和国外网站）都要经过海外服务器，速度有一定的延迟&lt;/li>
&lt;li>这个方案代理可以使用免费的Goagent服务；或低成本的ssh帐号；而租用海外VPS服务器自建服务或购买VPN帐号费用较高些；&lt;/li>
&lt;li>利用的是家里的宽带，只有树莓派的硬件成本，没有主机托管成本；&lt;/li>
&lt;/ul>
&lt;p>假设家里的路由器IP地址为:&lt;strong>192.168.1.1&lt;/strong>，树莓派2的IP地址为:&lt;strong>192.168.1.3&lt;/strong>，以下是需要安装和设置步骤。&lt;/p>
&lt;h1 id="pptp和l2tp-vpn-server">PPTP和L2TP VPN Server&lt;/h1>
&lt;p>首先在树莓派上安装和设置VPN服务器，移动设备就可以通过运营商网络连接回家里的树莓派（iPhone和Android都内置了PPTP和L2TP客户端），这样移动设备将以树莓派为路由访问网站，通过一些设置我们可以让树莓派提供科学上网服务。&lt;/p>
&lt;p>关于PPTP和L2TP VPN设置和安装可以参考： &lt;a href="http://hugozhu.myalert.info/2013/03/01/setup-l2tp-pptp-openvpn-on-ubuntu.html">http://hugozhu.myalert.info/2013/03/01/setup-l2tp-pptp-openvpn-on-ubuntu.html&lt;/a>&lt;/p>
&lt;p>但在树莓派上安装L2TP时不能直接&lt;code>apt-get install openswan&lt;/code>，需要手动下载来安装，原因是因为最新的版本在协议上有些不兼容：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget http://snapshot.raspbian.org/201403301125/raspbian/pool/main/o/openswan/openswan_2.6.37-3_armhf.deb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo dpkg -i openswan_2.6.37-3_armhf.deb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>假设VPN服务端的local ip我们设置为&lt;code>192.168.3.1&lt;/code>，PPTP客户端IP分配区间为：&lt;code>192.168.3.200~192.168.3.210&lt;/code>，L2TP 客户端IP分配区间为：&lt;code>192.168.3.100~192.168.3.110&lt;/code>，我们可以通过&lt;code>iptables&lt;/code>对IP来源为192.168.3.0/24网段的流量做特殊的处理以达到科学上网的目的。&lt;/p>
&lt;p>完成这一步后，需要在路由器上设置端口转发，使得使用运营商网络如移动4G的手机可以通过PPTP或L2TP连到树莓派上。&lt;/p>
&lt;p>PPTP需要设置的端口转发 - tcp: 1723&lt;/p>
&lt;p>L2TP需要设置的端口转发 - tcp: 50, udp: 500,4500,1701&lt;/p>
&lt;p>两种VPN服务相比较：PPTP拨号速度比较快，但是不安全；L2TP有加密，相对安全。&lt;/p>
&lt;h1 id="redsocks2">Redsocks2&lt;/h1>
&lt;p>&lt;a href="http://github.com/hugozhu/redsocks">redsocks2&lt;/a>是一个透明TCP代理，其实现使用了libevent库，性能较好，其最大的特点是如果目标IP可以直连则不会转发流量给加密代理，如果IP不能直连（通过连接超时判断）则会将流量转发给加密代理。这样可以将最少的流量转发到代理上，访问一般的国外网站如yahoo.com也不会经过代理而减速，在配置方面则做到了零配置，不需要手工维护网站名单。代理也能支持很多中类型，如socks5, shadowsocks, goagent, http-proxy等，redsocks2安装和配置可以见链接： &lt;a href="http://github.com/hugozhu/redsocks">http://github.com/hugozhu/redsocks&lt;/a>&lt;/p>
&lt;p>这里我们假设redsocks2的端口使用&lt;strong>12345&lt;/strong>&lt;/p>
&lt;h1 id="iptables">iptables&lt;/h1>
&lt;p>使用iptables我们可以将VPN客户端&lt;code>192.168.3.0/24&lt;/code>的流量转发到redsocks5的端口&lt;code>12345&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo iptables -F
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -F
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -X
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -s 192.168.3.0/24 -p tcp --dport 80 -j REDIRECT --to-ports 12345 #转发VPN客户端的HTTP流量到端口12345
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -s 192.168.3.0/24 -p tcp --dport 443 -j REDIRECT --to-ports 12345 #转发VPN客户端的HTTPS流量到端口12345
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A POSTROUTING -s 192.168.3.0/24 -o eth0 -j MASQUERADE #转发VPN客户端的TCP流量到网络出口，并进行IP伪装；如果树莓派使用无线网卡则将eth0改成wlan0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="dns加固">DNS加固&lt;/h1>
&lt;p>上面的设置我们解决了VPN拨号到树莓派的客户端通过redsocks2透明代理分流为直连或通过加密代理连接和访问目标网站，我们还需要解决一下DNS查询被纂改为不存在的IP地址的问题。&lt;/p></description></item><item><title>零佣金的券商靠什么赚钱？</title><link>https://hugozhu.site/post/2015/53-robinhood-zero-commission-brokerage/</link><pubDate>Tue, 10 Feb 2015 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2015/53-robinhood-zero-commission-brokerage/</guid><description>&lt;p>最近一家叫&lt;a href="https://www.robinhood.com/">Robinhood&lt;/a>的创业公司推出了零佣金的股票交易服务公测，用户可以通过iOS上的专用App交易。&lt;/p>
&lt;p>这家公司的两个创始人斯坦福大学毕业后去了纽约给华尔街的大型股票经济公司做交易系统，做了几年后突然有一天发现券商公司对每一笔交易付出的成本微乎其微，但要收取每个客户多达10美金的佣金。。。于是他们毅然决定辞职，回到硅谷创业去了。&lt;/p>
&lt;p>公司打出的口号是就是&lt;strong>零佣金&lt;/strong>，如果你交易的资金来源于自己，那么买入和卖出交易，以及银行转入和转出（不包括电汇）都是免费的。&lt;/p>
&lt;p>零佣金对资金不那么充裕的年轻人来说非常有吸引力。那么问题来了，这家公司靠什么赚钱呢？&lt;/p>
&lt;ol>
&lt;li>
&lt;p>交易过股票的人大概都知道，券商会提供融资服务给流动资金不充足的投资者，融资交易（Securities Margin Trading）就是投资者以资金或证券作为质押，向券商借入资金用于证券买卖，并在约定的期限内偿还借款本金和利息。相应的还有融券服务，融券交易是投资者以资金或证券作为质押，向券商借入证券卖出，在约定的期限内，买入相同数量和品种的证券归还券商并支付相应的融券费用。所以Robinhood首先可以通过融资融券服务盈利；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>对于投资者在Robinhood账户里的未购买股票的闲余资金，Robinhood可以通过金融市场获得一部分利息收入；&lt;/p>
&lt;/li>
&lt;li>
&lt;p>提供收费接口给小型的量化和对冲基金；&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>目前Robinhood已经完成了千万美元的风险投资，现阶段提供颠覆性的交易体验，吸引更多年轻的新投资者，赢得用户的信任显然更为重要。用户多了，盈利就不是问题了。。。&lt;/p>
&lt;img src="http://files.techcrunch.cn/2014/09/robinhood-app.png?w=556&amp;amp;h=600"/>
&lt;p>App界面&lt;/p>
&lt;img src="http://files.techcrunch.cn/2014/09/baiju-and-vlad-2.jpg?w=600&amp;amp;h=400"/>
&lt;p>创始人&lt;/p>
&lt;h1 id="参考文档">参考文档&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://techcrunch.cn/2014/09/25/robinhood-stock-app/">http://techcrunch.cn/2014/09/25/robinhood-stock-app/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://robinhoodapp.zendesk.com/hc/en-us/articles/202853769-How-does-Robinhood-make-money-">https://robinhoodapp.zendesk.com/hc/en-us/articles/202853769-How-does-Robinhood-make-money-&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://baike.baidu.com/view/431144.htm?fromtitle=">http://baike.baidu.com/view/431144.htm?fromtitle=&lt;/a>融资融券&amp;amp;fromid=1628138&amp;amp;type=syn&lt;/li>
&lt;/ol></description></item><item><title>使用Gradle生成包含所有依赖库(.jar或.aar)的aar包</title><link>https://hugozhu.site/post/2014/52-assemble-aar-with-all-dependencies-with-gradle/</link><pubDate>Wed, 05 Nov 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/52-assemble-aar-with-all-dependencies-with-gradle/</guid><description>&lt;p>Android Library项目中如果使用Android Gradle plugin打aar包，通过maven依赖的库，或者是local依赖的aar都不会包含在生成的aar包里，如果项目是发布一个SDK，为了方便开发者使用，我们倾向于生成一个包含所有依赖库以及.so等文件的aar包。&lt;/p>
&lt;p>通过反复研究和测试，以下Gradle脚本能满足需求，如果需要对代码运行ProGuard混淆，则需要使用Gradle 2.1&lt;/p>
&lt;p>方法是为项目增加一个sub project（如&lt;code>pkg_project&lt;/code>）专门用于打包，该项目中&lt;code>build.gradle&lt;/code>内容如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">apply&lt;/span> &lt;span class="n">plugin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;java&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">buildscript&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repositories&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mavenCentral&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dependencies&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">classpath&lt;/span> &lt;span class="s1">&amp;#39;com.android.tools.build:gradle:19.1.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">repositories&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mavenCentral&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dependencies&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">compile&lt;/span> &lt;span class="n">project&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;:&amp;lt;your_library_project&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">此处填写需要打包的&lt;/span>&lt;span class="n">Android&lt;/span> &lt;span class="n">Library&lt;/span> &lt;span class="n">Project&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">task&lt;/span> &lt;span class="n">sync_jars&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	 &lt;span class="o">//&lt;/span>&lt;span class="err">把所有依赖的&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar库都拷贝到build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">aar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">copy&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">into&lt;/span> &lt;span class="n">buildDir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;/aar/libs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">from&lt;/span> &lt;span class="n">configurations&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findAll&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">it&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getName&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">endsWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.jar&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">task&lt;/span> &lt;span class="n">sync_aars&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dependsOn&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s1">&amp;#39;:&amp;lt;your_library_project&amp;gt;:assembleRelease&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	 &lt;span class="o">//&lt;/span>&lt;span class="err">把所有依赖的&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">aar库里包含的classes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar都拷贝到build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">aar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs下&lt;/span>&lt;span class="err">，并重命名以不被覆盖&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">jar_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">aar_path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">dest_dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">buildDir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;/aar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">configurations&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">findAll&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">it&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getName&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">endsWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.aar&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">collect&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">aar_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">jar_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;libs/&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getName&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.aar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;.jar&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">copy&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">from&lt;/span> &lt;span class="n">zipTree&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aar_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">into&lt;/span> &lt;span class="n">dest_dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;**/*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rename&lt;/span> &lt;span class="s1">&amp;#39;classes.jar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">jar_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">task&lt;/span> &lt;span class="n">fataar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dependsOn&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="n">sync_aars&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sync_jars&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">task&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">obfuse_classes_jar&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">proguard&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ProGuardTask&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 	&lt;span class="o">//&lt;/span>&lt;span class="err">把&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">aar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">jar混淆后生成build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">aar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">classes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">configuration&lt;/span> &lt;span class="s2">&amp;#34;proguard.cfg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">injars&lt;/span> &lt;span class="n">buildDir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;/aar/libs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">outjars&lt;/span> &lt;span class="n">buildDir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;/aar/classes.jar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraryjars&lt;/span> &lt;span class="s2">&amp;#34;${System.getProperty(&amp;#39;java.home&amp;#39;)}/lib/rt.jar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraryjars&lt;/span> &lt;span class="s2">&amp;#34;${System.getProperty(&amp;#39;java.home&amp;#39;)}/Contents/Classes/classes.jar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraryjars&lt;/span> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ANDROID_HOME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;/platforms/android-19/android.jar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">task&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">gen_aar&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Zip&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 	&lt;span class="o">//&lt;/span>&lt;span class="err">把生成最终的&lt;/span>&lt;span class="n">aar包&lt;/span>&lt;span class="err">，注意&lt;/span>&lt;span class="n">libs目录需要被排除&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">dest_dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">buildDir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;/aar/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">baseName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;mysdk-all&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">extension&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;aar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">destinationDir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">buildDir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getPath&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">from&lt;/span> &lt;span class="n">dest_dir&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">exclude&lt;/span> &lt;span class="s2">&amp;#34;libs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>最后就可以使用&lt;code>gradlew pkg_project:fataar&lt;/code>来打包了&lt;/p></description></item><item><title>常用Linux命令</title><link>https://hugozhu.site/post/2014/51-useful-linux-command/</link><pubDate>Thu, 04 Sep 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/51-useful-linux-command/</guid><description>&lt;h1 id="拷贝文件">拷贝文件&lt;/h1>
&lt;p>如果想事实看到拷贝的速度可以用&lt;code>rsync -aP&lt;/code>&lt;/p></description></item><item><title>简单手机应用同步协议设计和实现</title><link>https://hugozhu.site/post/2014/49-fast-sync-between-mobile-phone-and-server/</link><pubDate>Wed, 27 Aug 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/49-fast-sync-between-mobile-phone-and-server/</guid><description>&lt;p>版本：&lt;strong>Ver 0.3&lt;/strong>&lt;/p>
&lt;p>在手机上我们需要持久化应用的一些数据(典型的如本地的设置信息)，同时又希望能重装应用或换一台手机登录后能把这些数据再同步回来。业界有&lt;a href="http://en.wikipedia.org/wiki/SyncML">SyncMl&lt;/a>标准，覆盖的功能很完善，正因为要保证兼容性，开源的实现都较重。如何借鉴这个标准自己来实现一个多端双向同步可扩展的功能呢？&lt;/p>
&lt;p>App使用同步协议可以将原本必须在线操作的功能（如：删除一个联系人，修改一个联系人的备注信息）也可以在断网情况下完成。&lt;/p>
&lt;p>我们假设一些前提：&lt;/p>
&lt;ol>
&lt;li>同一时刻只有一端（iPhone，iPad或其他移动设备）能和服务器同步；&lt;/li>
&lt;li>&lt;del>客户端和服务端的时间一致或误差较小；可在长连建立时通过协议记录时间差&lt;/del>&lt;/li>
&lt;li>客户端保存全量数据（对于客户端只保存部分数据的情况后面再做讨论）；&lt;/li>
&lt;/ol>
&lt;h1 id="应用场景">应用场景&lt;/h1>
&lt;ol>
&lt;li>通讯录同步&lt;/li>
&lt;li>最近联系人&lt;/li>
&lt;li>App客户端设置&lt;/li>
&lt;li>最近会话列表&lt;/li>
&lt;li>黑名单&lt;/li>
&lt;li>群设置&lt;/li>
&lt;li>群成员&lt;/li>
&lt;li>用户的一些设置和开关&lt;/li>
&lt;/ol>
&lt;h1 id="名词解释">名词解释&lt;/h1>
&lt;ol>
&lt;li>LCID - Local Unique Identifiers， 客户端生成的记录ID，客户端唯一；&lt;/li>
&lt;li>GUID - Global Unique Identifiers， 服务端生成的记录ID，全局唯一；&lt;/li>
&lt;li>Anchor - 同步锚点，可以使用递增的序列号或时间戳来表示，用来发现两端数据变化的部分；&lt;/li>
&lt;li>Session - 同步会话，由客户端发起，Session Id唯一。&lt;/li>
&lt;/ol>
&lt;h1 id="客户端表设计">客户端表设计&lt;/h1>
&lt;p>每条记录包含两个同步用的字段：&lt;/p>
&lt;p>&lt;em>status&lt;/em> － 用来标识记录的状态&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>Status&lt;/th>
 &lt;th>含义&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>0&lt;/td>
 &lt;td>本地新增&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>-1&lt;/td>
 &lt;td>标记删除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>本地更新&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>9&lt;/td>
 &lt;td>已同步&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>&lt;em>anchor&lt;/em> － 用来记录服务端同步过来的时间戳。&lt;/p>
&lt;h1 id="服务端表设计">服务端表设计&lt;/h1>
&lt;p>&lt;em>modified&lt;/em> － 记录在服务端的修改时间&lt;/p>
&lt;h1 id="双向同步流程示例">双向同步流程示例&lt;/h1>
&lt;h2 id="1-client-增加2条记录">1. Client 增加2条记录&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>id&lt;/th>
 &lt;th>key&lt;/th>
 &lt;th>value&lt;/th>
 &lt;th>status&lt;/th>
 &lt;th>modified&lt;/th>
 &lt;th>anchor&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>Foo&lt;/td>
 &lt;td>Bar&lt;/td>
 &lt;td>0&lt;/td>
 &lt;td>1&lt;/td>
 &lt;td>0&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>2&lt;/td>
 &lt;td>Hello&lt;/td>
 &lt;td>World&lt;/td>
 &lt;td>0&lt;/td>
 &lt;td>2&lt;/td>
 &lt;td>0&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>客户端新增记录时，需要将Status设为0&lt;/p></description></item><item><title>使用Gradle生成一个App的不同版本，且可以同时安装在一个手机上</title><link>https://hugozhu.site/post/2014/50-use-gradle-to-customize-apk-build/</link><pubDate>Sun, 03 Aug 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/50-use-gradle-to-customize-apk-build/</guid><description>&lt;h1 id="背景">背景&lt;/h1>
&lt;p>开发一个App一般会生成内测版和正式版，甚至还会有不同渠道的版本，不同版本的配置可能会不一样，比如内测版会需要记录完整的日志。&lt;/p>
&lt;p>Android手机对于同样的Application Id的App只能安装一个版本，如果我们需要同时安装内测版和正式版，就必须修改其中一个版本的Application Id。&lt;/p>
&lt;h1 id="解决方案">解决方案&lt;/h1>
&lt;p>Gradle支持buildTypes和productFlavors两种定制方法，这里只介绍通过buildType的解决方案。通过productFlavors则可有效解决渠道包，arm，x86等分平台以及付费版和广告版的打包问题。&lt;/p>
&lt;h2 id="修改debug版的包名">修改debug版的包名&lt;/h2>
&lt;p>配置如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">android {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> buildTypes {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> release {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> debug {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> applicationIdSuffix &amp;#39;.debug&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修正资源文件里的包名">修正资源文件里的包名&lt;/h2>
&lt;p>如果你的项目里使用了自定义的View，且有自定义的属性时，会需要修正一下xml命名空间里的包名。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">android&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applicationVariants&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">variant&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">buildType&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">buildType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">encoding&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">charset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Charset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">defaultCharset&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">buildType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applicationIdSuffix&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">defaultPackageId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">packageName&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replaceAll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">buildType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applicationIdSuffix&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mergeResources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">doLast&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;${buildDir}/intermediates/res/${variant.dirName}/layout&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listFiles&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">each&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">String&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replaceAll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;res/&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">defaultPackageId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;res/&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">packageName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="定制apk的应用名称">定制APK的应用名称&lt;/h2>
&lt;p>如果同时安装两个版本，那么最好能从应用名称上来区别一下，一般我们在&lt;code>AndroidManifest.xml&lt;/code>中使用String resource来命名，如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> &amp;lt;application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 	...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> android:label=&amp;#34;@string/app_name&amp;#34; &amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在&lt;code>build.gradle&lt;/code>里增加下面的代码就可以为debug版一个特殊的命名了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">android&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applicationVariants&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">variant&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">buildType&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">buildType&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">encoding&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">charset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Charset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">defaultCharset&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">buildType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applicationIdSuffix&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">defaultPackageId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">packageName&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replaceAll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">buildType&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">applicationIdSuffix&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">variant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mergeResources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">doLast&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;${buildDir}/intermediates/res/${variant.dirName}/values/values.xml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">String&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replaceAll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;来往&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;来往Beta&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">encoding&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修改contentprovider-authority">修改ContentProvider Authority&lt;/h2>
&lt;p>如果你的应用里还提供ContentProvider的话，如下：&lt;/p></description></item><item><title>安装第三方App到电视盒子</title><link>https://hugozhu.site/post/2014/48-install-3rd-party-app-on-tv-box/</link><pubDate>Sat, 26 Jul 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/48-install-3rd-party-app-on-tv-box/</guid><description>&lt;h1 id="安装第三方app方法1">安装第三方App方法1&lt;/h1>
&lt;ol>
&lt;li>准备一个U盘，注意用FAT格式（Windows能读写就OK）&lt;/li>
&lt;li>将需要安装的App下载到U盘，文件后缀名必须是.apk&lt;/li>
&lt;li>将U盘插入电视盒子，然后通过盒子自身带的文件管理App安装：如Magic Box：应用－－&amp;gt; 本地播放，进入后选中U盘上的.apk文件即可安装&lt;/li>
&lt;/ol>
&lt;h1 id="安装第三方app方法2">安装第三方App方法2&lt;/h1>
&lt;ol>
&lt;li>如果盒子不带USB盘，还可以用adb远程安装&lt;/li>
&lt;li>adb connect &amp;lt;your_magic_box_ip&amp;gt;&lt;/li>
&lt;li>adb install &amp;lt;you_app_to_install&amp;gt;.apk&lt;/li>
&lt;/ol>
&lt;h1 id="直播和回放app">直播和回放App&lt;/h1>
&lt;ol>
&lt;li>在电脑上用浏览器下载：http://app.shafa.com/shafa.apk 到U盘&lt;/li>
&lt;li>按方法1安装好后，在“应用“中找到“沙发管家”&lt;/li>
&lt;li>启动“沙发管家”，安装直播App：如“龙龙直播”，也有支持回放的App，如“电视猫视频”等。&lt;/li>
&lt;/ol></description></item><item><title>Gradle的Properties</title><link>https://hugozhu.site/post/2014/47-use-gradle-properties-to-set-alternative-android-build-tools/</link><pubDate>Wed, 23 Jul 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/47-use-gradle-properties-to-set-alternative-android-build-tools/</guid><description>&lt;h1 id="问题背景">问题背景&lt;/h1>
&lt;p>团队一起在开发一个Android项目，工程师有的使用Eclipse，有个使用Intellij IDEA，有的使用Android Studio。每个人安装的Android SDK build-tools可能都不一样，有的是19.0.3，有的是19.1.0，不同版本的build-tools对Gradle Plugin也有相应的要求，如19.0.3对应的是com.android.tools.build:gradle:0.10.+，19.1.0对应的是com.android.tools.build:gradle:0.12.+，下面是一个典型的build.gradle配置文件。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">buildscript&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repositories&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mavenCentral&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dependencies&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">classpath&lt;/span> &lt;span class="s1">&amp;#39;com.android.tools.build:gradle:0.10.+&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apply&lt;/span> &lt;span class="n">plugin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;android-library&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">android&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">compileSdkVersion&lt;/span> &lt;span class="mi">19&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">buildToolsVersion&lt;/span> &lt;span class="mf">19.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">defaultConfig&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minSdkVersion&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">targetSdkVersion&lt;/span> &lt;span class="mi">19&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在合作开发中遇到的一个尴尬的问题是，IDEA最新版还不能很好的支持Gradle Plugin 0.12+，而Android Studio最新版则要求使用0.12+。大家又共用一个Git仓库。可能的解决方案是，从Git checkout出来的项目需要有一个基础的版本号，但是开发者可以在本地通过一处文件（不check in到git）来重载版本号。&lt;/p>
&lt;h1 id="解决方案">解决方案&lt;/h1>
&lt;p>Gradle支持三种Properties, 这三种Properties的作用域和初始化阶段都不一样，下面分别列出了其部分特点。:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;em>System Properties：&lt;/em>&lt;/p>
&lt;ol>
&lt;li>可通过gradle.properties文件，环境变量或命令行-D参数设置	2. 可在setting.gradle或build.gradle中动态修改，在setting.gradle中的修改对buildscript block可见；&lt;/li>
&lt;li>所有工程可见，不建议在build.gradle中修改&lt;/li>
&lt;li>多子工程项目中，子工程的gradle.properties会被忽略掉，只有root工程的gradle.properties有效；&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;em>Project Properties：&lt;/em>&lt;/p>
&lt;ol>
&lt;li>可通过gradle.properties文件，环境变量或命令行-P参数设置，优先级是:&lt;/li>
&lt;li>可在build.gradle中动态修改，但引用不存在的project properties会立即抛错&lt;/li>
&lt;li>动态修改过的project properties在buildscript block中不可见&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>&lt;em>Project ext properties：&lt;/em>&lt;/p>
&lt;ol>
&lt;li>可在项目的build.gradle中声明和使用，本工程和子工程可见&lt;/li>
&lt;li>不能在setting.gradle中访问&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>如果有多处设置，加载次序如下（注意：gradle 2.0是这样的, 1.10~1.12有bug）, 后面的覆盖前面的设置&lt;/p>
&lt;ol>
&lt;li>from gradle.properties located in project build dir.&lt;/li>
&lt;li>from gradle.properties located in gradle user home.&lt;/li>
&lt;li>from system properties, e.g. when -Dsome.property is used in the command line.&lt;/li>
&lt;li>setting.gradle&lt;/li>
&lt;li>build.gradle&lt;/li>
&lt;/ol>
&lt;p>根据其特点，这里给出一个使用System Properties来解决问题的方案。&lt;/p></description></item><item><title>Android异步编程</title><link>https://hugozhu.site/post/2014/46-async-android/</link><pubDate>Sun, 29 Jun 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/46-async-android/</guid><description>&lt;h1 id="android的线程和内存模型">Android的线程和内存模型&lt;/h1>
&lt;p>Android操作系统在boot后，会启动一个Zygote(受精卵)进程，Zygote进程负责创建大部分应用程序进程。Zygote进程启动加载核心程序库和数据结构到内存后会创建一个Dalvik虚拟机（DVM）进程－-SystemServer，此进程会包含大部分的系统服务（包括管理Activity的服务ActivityManagerService），SystemServer初始化后，Zygote进程会侦听本地的socket端口, 等待进一步的指令。当新的app被启动时，Zygote会为这个app创建一个DVM&amp;mdash;-直接fork出一个子进程，这种架构的好处是同时启动多个App时，多个App进程可以访问共享内存。&lt;/p>
&lt;img src="data:image/png;base64,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"/>
&lt;p>Android App的进程也是一个DVM，内部有许多线程在执行，比如，主UI线程（Main Thread），垃圾回收线程等。其中主UI线程负责执行我们写的应用代码。对于只做很少的I/O操作或耗时操作的App，单一线程开发模式问题不大，但是如果有大量IO或者CPU计算的任务，我们就必须在其他线程内完成了。&lt;/p>
&lt;p>因为主UI线程需要根据硬件刷新率[^3]同步用户界面的重绘。手机应用体验流畅要求界面帧率[^3]达到每秒60，也就是说每16.67毫秒就需要重绘一帧，这意味着如果我们在主线程上执行的任务超过16毫秒，就会出现丢帧现象，也就是界面会开始变卡。。。&lt;/p>
&lt;p>Android异步执行任务的方法有以下几种：&lt;/p>
&lt;h1 id="asynctask">AsyncTask&lt;/h1>
&lt;p>AsyncTask是最常用的异步方法，功能结构设计的也很丰富，给使用者足够的控制，使用上主要是将异步执行的任务放在下面方法里。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">protected Result doInBackground(Params... params)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后调用&lt;code>.execute(params)&lt;/code>方法即可。&lt;/p>
&lt;p>AsyncTask的执行逻辑在API Level 3只能串行执行， 在API Level 4改成了最多128个线程的线程池执行，API Level 11则改成了缺省所有的AsyncTask是在一个线程中顺序执行的，这样可以保证执行和提交的次序一致，如果希望能并发的执行，可以用下面的方法在线程池内执行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>AsyncTask.THREAD_POOL_EXECUTOR&lt;/code>是&lt;code>ThreadPoolExecutor&lt;/code>的一个实例，配置是最少5个线程，最多128个。如果需要自己来配置线程池大小，你可以传递自己配置的一个实例到上述方法。&lt;/p>
&lt;p>使用AsyncTask需要注意的几个问题：&lt;/p>
&lt;h2 id="碎片化问题">碎片化问题&lt;/h2>
&lt;p>因为不同版本的Android AsyncTask缺省执行逻辑并不一样，可能在不同机型上表现不一致。如果要自己控制AsyncTask的并发度，解决这个问题的建议是复制Android SDK的AsyncTask源码自己实现一个AsyncTask。&lt;/p>
&lt;h2 id="activity生命周期问题">Activity生命周期问题&lt;/h2>
&lt;p>Activity可能早于AsyncTask执行完被销毁，如果AsyncTask还继续执行，有可能会浪费资源，并且如果AsyncTask里引用了Activity或部分的View Hierarchy，还会造成引用的对象不会被垃圾回收而引起内存泄漏。通常AsyncTask会定义为Activity的一个匿名inner class，这会建立一个隐式的引用到Activity。&lt;/p>
&lt;p>解决的方法是：&lt;/p>
&lt;ol>
&lt;li>在Activity里的&lt;code>onPause&lt;/code>方法里及时取消不需要再执行的AsyncTask（这种方法在切换到横屏时会重启异步任务，有点浪费）&lt;/li>
&lt;li>更好的是使用retained headless fragment来解决生命周期问题，具体演示代码见参考链接&lt;/li>
&lt;/ol>
&lt;p>Async比较合适的是较短的（1，2秒），CPU密集计算或读写文件等阻塞IO操作。耗时较长的网络调用用Async不是最合适的。&lt;/p>
&lt;h1 id="handler--handlerthread">Handler &amp;amp; HandlerThread&lt;/h1>
&lt;p>Handler的异步编程是基于消息队列模型的。执行任务的线程称之为Looper线程，其他线程则将需要异步执行的任务发送给Looper线程&amp;ndash;插入其消息队列，方法有：post（较方便使用，但每次需要创建新对象）或sendMessage（较高效，复用消息实例，适合执行大量类似的异步任务）&lt;/p>
&lt;h2 id="looper">Looper&lt;/h2>
&lt;p>Looper和它的名字意思一样就是Looper线程会永远循环，当没有消息的时候，Looper线程（消费者）会使用(&lt;code>Object.wait&lt;/code>)方法等待其他线程（生产者）插入新的任务消息，这时候其他线程(&lt;code>Object.notify&lt;/code>)&lt;/p>
&lt;p>Android的主线程其实就是一个Looper线程。&lt;/p>
&lt;p>需要注意的是，使用Handler和AsyncTask一样，要注意匿名inner class对Activity的隐式引用而造成内存泄漏，所以使用的时候要记得清理；&lt;/p>
&lt;p>解决方法是使用对使用的Activity中的View对象用Weak Reference，并处理当View对象为null的情况。&lt;/p>
&lt;p>Handler适合更长一点的（&amp;gt;2秒）的异步任务处理。&lt;/p>
&lt;h1 id="loader">Loader&lt;/h1>
&lt;p>Loader在Android编程框架中被广泛用于后台加载数据（从文件，数据库甚至网络）。&lt;/p>
&lt;h2 id="asynctaskloader">AsyncTaskLoader&lt;/h2>
&lt;p>具体的Loader实现。&lt;/p>
&lt;h2 id="cursorloader">CursorLoader&lt;/h2>
&lt;p>用户数据库数据后台加载。&lt;/p>
&lt;p>Loader在使用上比较大的优势是和Activity的部分解耦，更见到的生命周期管理。&lt;/p>
&lt;h1 id="intentservice">IntentService&lt;/h1>
&lt;p>IntentService是Service的一个实现类。其内部实现包含了一个HandlerThread，当任务提交给IntentService时，会被加到队列并顺序处理。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="n">MyIntentService&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="n">IntentService&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public&lt;/span> &lt;span class="n">MyIntentService&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;thread-name&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protected&lt;/span> &lt;span class="n">void&lt;/span> &lt;span class="n">onHandleIntent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Intent&lt;/span> &lt;span class="n">intent&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">executes&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">background&lt;/span> &lt;span class="n">HandlerThread&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Intent&lt;/span> &lt;span class="n">intent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">Intent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">MyIntentService&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="k">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">intent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">setData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">uri&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="n">intent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">putExtra&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;param&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;some value&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">startService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">intent&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>IntentService返回任务结果给Activity可以有下面几种方法（Service和Activity的通信方法）：&lt;/p></description></item><item><title>提高Android开发效率的小贴士</title><link>https://hugozhu.site/post/2014/45-android-development-productivity-tips/</link><pubDate>Mon, 10 Feb 2014 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2014/45-android-development-productivity-tips/</guid><description>&lt;h1 id="查看日志-adb-logcat">查看日志 adb logcat&lt;/h1>
&lt;p>下面命令将只显示错误日志，和所有Tag＝mytag的调试日志，-C 会用不同颜色区分不同级别的日志，但只有Android 4.3以后才支持。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">adb logcat [-C] *:E &amp;lt;mytag&amp;gt;:D
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="远程调试-adb-over-tcp">远程调试 adb over TCP&lt;/h1>
&lt;p>首先在手机或Pad上执行以下命令（要求root）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">su
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setprop service.adb.tcp.port 5555
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stop adbd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">start adbd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>再执行下面命令则可以看到手机的网络地址&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">netcfg | grep wlan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>在电脑上则执行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">adb connect &amp;lt;mobile_phone_ip&amp;gt; 5555
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adb shell
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>安装运行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">gradle installDebug &amp;amp;&amp;amp; adb shell am start -n com.laiwang.protocol.android/.MainActivity
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="over">Over&lt;/h1></description></item><item><title>拷贝Android应用的数据</title><link>https://hugozhu.site/post/2013/44-copy-android-app-data/</link><pubDate>Wed, 27 Nov 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/44-copy-android-app-data/</guid><description>&lt;h1 id="有root权限">有root权限&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">adb shell su -c cat /data/data/app.package.name/databases/application.sqlite | sed &amp;#39;s/\r$//&amp;#39; &amp;gt; application.sqlite
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="应用可调试的话">应用可调试的话&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">adb shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">run-as app.package.name \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /data/data/package.name/databases/application.sqlite /sdcard/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adb pull /sdcard/application.sqlite ~/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="使用备份方法">使用备份方法&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">adb backup -f ~/data.ab -noapk app.package.name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dd if=data.ab bs=1 skip=24 | python -c &amp;#34;import zlib,sys;sys.stdout.write(zlib.decompress(sys.stdin.read()))&amp;#34; | tar -xvf -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="参考链接">参考链接&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://blog.shvetsov.com/2013/02/access-android-app-data-without-root.html">http://blog.shvetsov.com/2013/02/access-android-app-data-without-root.html&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>使用夏普GP2Y1010AU0F灰尘传感器检测空气质量</title><link>https://hugozhu.site/post/2013/42-sharp-gp2y1010au0f-optical-dust-sensor/</link><pubDate>Sun, 21 Jul 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/42-sharp-gp2y1010au0f-optical-dust-sensor/</guid><description>&lt;p>夏普&lt;a href="http://item.taobao.com/item.htm?spm=a230r.1.14.1.X4yMiN&amp;amp;id=25584528001&amp;amp;_u=oqa3375a">GP2Y1010AU0F&lt;/a>灰尘传感器价格较便宜，能检测出室内空气中的灰尘和烟尘含量。另外还有韩国SYHITECH生产的&lt;a href="http://item.taobao.com/item.htm?spm=a230r.1.14.9.NNhRMO&amp;amp;id=15543884159">DSM501A&lt;/a>粉尘传感器也有类似功能。&lt;/p>
&lt;h1 id="检测原理">检测原理&lt;/h1>
&lt;p>其原理如下图，传感器中心有个洞可以让空气自由流过，定向发射LED光，通过检测经过空气中灰尘折射过后的光线来判断灰尘的含量。&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/50d1faab-e7fc-45c6-9a0f-2b5f6743ce7f/4422cbee4a324b25d1ebaabba3eb350f/deep/0/www.beck-elektronik.de/fileadmin/templates/beck_folder/opto/sensor/sharp/an-gp2y1010au.pdf.png" width="500"/>
&lt;h1 id="电路图">电路图&lt;/h1>
&lt;img src="https://www.evernote.com/shard/s26/sh/d34f08d5-0a93-44cc-b360-0b0686efa11d/e8548764c41977130e79b645e8b82cc3/deep/0/www.beck-elektronik.de/fileadmin/templates/beck_folder/opto/sensor/sharp/an-gp2y1010au.pdf.png" width="500"/>
&lt;img src="http://ww1.sinaimg.cn/bmiddle/6bc40342jw1e6x61e41ykj218g0xcamc.jpg" width="500"/>
&lt;p>因为数据是通过pin 5的电压模拟信号输出的，而树莓派的引脚不支持模拟信号直接读取（需要增加数模转换芯片），所以先用Arduino来实验。&lt;/p>
&lt;h1 id="arduino-代码">Arduino 代码&lt;/h1>
&lt;img src="https://www.evernote.com/shard/s26/sh/5159a7b8-8e50-49ac-9a5f-63deb93c539d/5cee487cce5d3b3cbc530bc9e979908b/deep/0/%E6%88%91%E7%9A%84%E5%BE%AE%E5%8D%9A%20%E6%96%B0%E6%B5%AA%E5%BE%AE%E5%8D%9A-%E9%9A%8F%E6%97%B6%E9%9A%8F%E5%9C%B0%E5%88%86%E4%BA%AB%E8%BA%AB%E8%BE%B9%E7%9A%84%E6%96%B0%E9%B2%9C%E4%BA%8B%E5%84%BF.png" width="400"/>
&lt;p>根据电路图， 把Arduino和传感器连接起来：&lt;/p>
&lt;ol>
&lt;li>Sharp pin 1 (V-LED) =&amp;gt; 5V 串联1个&lt;a href="http://detail.tmall.com/item.htm?id=13437610350&amp;amp;spm=a230r.1.14.1.BiUeau&amp;amp;ad_id=&amp;amp;am_id=&amp;amp;cm_id=140105335569ed55e27b&amp;amp;pm_id=">150欧姆的电阻&lt;/a>（最好在电阻一侧和GND之间再串联一个&lt;a href="http://detail.tmall.com/item.htm?id=13661538754&amp;amp;spm=a230r.1.14.17.KlljiT&amp;amp;ad_id=&amp;amp;am_id=&amp;amp;cm_id=140105335569ed55e27b&amp;amp;pm_id=">220uf的电容&lt;/a>）&lt;/li>
&lt;li>Sharp pin 2 (LED-GND) =&amp;gt; GND&lt;/li>
&lt;li>Sharp pin 3 (LED) =&amp;gt; Arduino PIN 2 （开关LED）&lt;/li>
&lt;li>Sharp pin 4 (S-GND) =&amp;gt; GND&lt;/li>
&lt;li>Sharp pin 5 (Vo) =&amp;gt; Arduino A0 pin （空气质量数据通过电压模拟信号输出）&lt;/li>
&lt;li>Sharp pin 6 (Vcc) =&amp;gt; 5V&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Interface to Sharp GP2Y1010AU0F Particle Sensor
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Program by Christopher Nafis 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Written April 2012
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> http://www.sparkfun.com/datasheets/Sensors/gp2y1010au_e.pdf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> http://sensorapp.net/?p=479
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Sharp pin 1 (V-LED) =&amp;gt; 5V (connected to 150ohm resister)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Sharp pin 2 (LED-GND) =&amp;gt; Arduino GND pin
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Sharp pin 3 (LED) =&amp;gt; Arduino pin 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Sharp pin 4 (S-GND) =&amp;gt; Arduino GND pin
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Sharp pin 5 (Vo) =&amp;gt; Arduino A0 pin
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> Sharp pin 6 (Vcc) =&amp;gt; 5V
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;SPI.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">dustPin&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">ledPower&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">delayTime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">280&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">delayTime2&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">float&lt;/span> &lt;span class="n">offTime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">9680&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">dustVal&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">float&lt;/span> &lt;span class="n">ppm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">32&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">float&lt;/span> &lt;span class="n">voltage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">float&lt;/span> &lt;span class="n">dustdensity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">float&lt;/span> &lt;span class="n">ppmpercf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Serial&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">begin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">9600&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">pinMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ledPower&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">OUTPUT&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// give the ethernet module time to boot up:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ppm&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">loop&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">digitalWrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ledPower&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">LOW&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// power on the LED
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">delayMicroseconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">delayTime&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dustVal&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nf">analogRead&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dustPin&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// read the dust value
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">ppm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ppm&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">dustVal&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">delayMicroseconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">delayTime2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">digitalWrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ledPower&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">HIGH&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// turn the LED off
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">delayMicroseconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">offTime&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">voltage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ppm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mf">0.0049&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dustdensity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.17&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">voltage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ppmpercf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">voltage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.0256&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">120000&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ppmpercf&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ppmpercf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">dustdensity&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dustdensity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">dustdensity&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dustdensity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">String&lt;/span> &lt;span class="n">dataString&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataString&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nf">dtostrf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">voltage&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataString&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s">&amp;#34;,&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataString&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nf">dtostrf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dustdensity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataString&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="s">&amp;#34;,&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dataString&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nf">dtostrf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ppmpercf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ppm&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Serial&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dataString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>把传感器和Ardiuno连接好后，可以连续打印出传感器的输出电压值。输出电压大小和灰尘含量的曲线入下图：&lt;/p></description></item><item><title>在树莓派上使用Phantomjs自动登录微博</title><link>https://hugozhu.site/post/2013/41-use-phantomjs-on-raspberry-pi-to-login-weibo/</link><pubDate>Sun, 21 Jul 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/41-use-phantomjs-on-raspberry-pi-to-login-weibo/</guid><description>&lt;p>使用过新浪开放平台的朋友都知道用户对小应用（用户数较少的）的授权Token很容易&lt;a href="http://open.weibo.com/wiki/%E6%8E%88%E6%9D%83%E6%9C%BA%E5%88%B6%E8%AF%B4%E6%98%8E#.E6.8E.88.E6.9D.83.E6.9C.89.E6.95.88.E6.9C.9F">过期&lt;/a>，自动续期要求授权过的用户在过期前重新打开授权页。如果你想实现一个自动备份自己微博的App，就不得每天（周）自己去访问授权页（想死的心都有了吧？）。这里介绍一种通过脚本自动登录微博获取最新oAuth token的方法（需要微博登录名和密码），合适自己玩。将脚本部署在树莓派上后，我再也不用每周都去登录一次授权页了，只是收到报警消息后（经常是帐号被冻结了）需要手动处理一下。&lt;/p>
&lt;h1 id="phantomjs">Phantomjs&lt;/h1>
&lt;img src="http://phantomjs.org/images/phantomjs-logo.png"/>
&lt;p>&lt;a href="http://phantomjs.org/">Phantomjs&lt;/a> 是一个开源的，没有界面可运行在命令行，跨平台，基于WebKit的全功能浏览器，可以用来做网站自动化测试。从源代码&lt;a href="http://phantomjs.org/build.html">编译&lt;/a>比较费时间，可以直接下载&lt;a href="http://phantomjs.org/download.html">二进制版本&lt;/a>，树莓派的版本在&lt;a href="https://github.com/aeberhardo/phantomjs-linux-armv6l">这里&lt;/a>可下载。Phantomjs下载好了后就一个可执行文件，依赖非常少，我很喜欢这种方式。&lt;/p>
&lt;h1 id="代码">代码&lt;/h1>
&lt;p>以下代码使用提供的微博用户名和密码登录，获得Token后还会打开微博首页看帐号是否被冻结了。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;webpage&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">system&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;system&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;fs&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">address&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">weibo_userid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">system&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">weibo_passwd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">system&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">startUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://api.weibo.com/oauth2/authorize?client_id=&amp;lt;your_app_key&amp;gt;&amp;amp;redirect_uri=&amp;lt;your_return_url&amp;gt;/&amp;amp;response_type=token&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">verify_weibo_freeze&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">onResourceReceived&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">network&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stage&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;end&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s2">&amp;lt;-&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;authorize?client_id&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">startUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;?access_token&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">pos1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;access_token=&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">pos2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;amp;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">access_token&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos1&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;access_token=&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pos2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">weibo_userid&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; login OK, access_token is: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">access_token&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">verify_weibo_freeze&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">verify_weibo_freeze&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;http://weibo.com/&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://weibo.com/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">pos1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">pos2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;?&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">weibo_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos1&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">pos2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">weibo_name&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34; status verified OK&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">phantom&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">onLoadFinished&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">verify_weibo_freeze&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://weibo.com/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">phantom&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">onConsoleMessage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">startUrl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">includeJs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="n">offset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">evaluate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;#userId&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;#passwd&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">val&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.WB_btn_login&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hasClass&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;formbtn_01&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Found button!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.WB_btn_login&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">offset&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">undefined&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="n">weibo_userid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">weibo_passwd&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">page&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sendEvent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;click&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">offset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">left&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">offset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">top&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="执行方法">执行方法&lt;/h1>
&lt;p>&lt;code>timeout 120 phantomjs weibo_login.js &amp;lt;your_weibo_login_id&amp;gt; &amp;lt;your_weibo_login_password&amp;gt;&lt;/code>&lt;/p></description></item><item><title>在Mac上使用Sublime 3写Go代码</title><link>https://hugozhu.site/post/2013/40-try-out-sublime-3-beta-on-mac/</link><pubDate>Thu, 11 Jul 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/40-try-out-sublime-3-beta-on-mac/</guid><description>&lt;img src="http://www.sublimetext.com/anim/rename2_packed.png" width="540"/>
&lt;p>&lt;a href="http://www.sublimetext.com">Sublime&lt;/a> 是一个相当好用的文本编辑器，界面简洁，功能强大。最近&lt;a href="http://www.sublimetext.com/3">Sublime 3 Beta&lt;/a> 出来了, 体验了一下，发现启动速度比之前快了很多。&lt;/p>
&lt;h1 id="下载安装">下载安装&lt;/h1>
&lt;p>下载地址： &lt;a href="http://www.sublimetext.com/3">http://www.sublimetext.com/3&lt;/a>&lt;/p>
&lt;h1 id="安装package-control">安装Package Control&lt;/h1>
&lt;p>Sublime 支持插件来丰富其功能，&lt;a href="http://wbond.net/sublime_packages/package_control">package control&lt;/a> 本身也是一个插件，可以用来管理其他插件，所以我们要先安装Package Control，Sublime 3需要安装Pacakge Control Alpha.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd &amp;#34;Library/Application Support/Sublime Text 3&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd Packages/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/wbond/sublime_package_control.git &amp;#34;Package Control&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd &amp;#34;Package Control&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git checkout python3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="安装gosublime">安装GoSublime&lt;/h1>
&lt;p>重启Sublime后&lt;/p>
&lt;ol>
&lt;li>按cmd+shift+p (OS X)或press ctrl+shift+p (Windows, Linux)&lt;/li>
&lt;li>在弹出的输入框中输入&lt;code> PacInstall&lt;/code> 选择 &lt;code>Package Control: Install Package&lt;/code>&lt;/li>
&lt;li>在稍后弹出的输入框内输入&amp;quot;Gosublime&amp;quot;，选择安装&lt;/li>
&lt;/ol>
&lt;p>好了，就这样可以开始写Go代码了。&lt;/p>
&lt;h1 id="tips">Tips&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>我的Sublime配置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;font_face&amp;#34;: &amp;#34;Microsoft YaHei&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;font_options&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	[
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;font_size&amp;#34;: 18.0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;line_padding_top&amp;#34;: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>按快捷键&lt;code>Shift + Command + L&lt;/code>可以按列编辑&lt;/p></description></item><item><title>替换树莓派的U盘</title><link>https://hugozhu.site/post/2013/39-replace-usb-disk-on-raspberry-pi/</link><pubDate>Thu, 11 Jul 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/39-replace-usb-disk-on-raspberry-pi/</guid><description>&lt;p>除了SD卡上的存储，树莓派还可以使用U盘来做存储，有时候我们可能需要替换已有的U盘为更大容量的。在Mac上可以采用下面的方法：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>备份已有的U盘，把U盘从树莓派上拔下来插在Mac上，找出U盘对应的盘符（下例为&lt;code>/dev/disk2&lt;/code>）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">20:51:19 hugozhu-mac-mini ~ $ diskutil list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/disk0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #: TYPE NAME SIZE IDENTIFIER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0: GUID_partition_scheme *500.1 GB disk0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1: EFI 209.7 MB disk0s1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2: Apple_HFS Macintosh HD 499.2 GB disk0s2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3: Apple_Boot Recovery HD 650.0 MB disk0s3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/disk2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #: TYPE NAME SIZE IDENTIFIER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0: FDisk_partition_scheme *2.1 GB disk2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>使用 dd 命令把U盘拷贝到&lt;code>raspberrypi.img&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo dd if=/dev/disk2 of=raspberrypi.img conv=notrunc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>从Mac上取下旧U盘，把新的U盘插入同一个USB口，注意新U盘容量要大于旧的&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo dd of=/dev/disk2 if=raspberrypi.img conv=notrunc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>把新U盘插入树莓派，并mount上，用以下命令把U盘的多余空间用起来&lt;/p></description></item><item><title>Java并发中正确使用volatile</title><link>https://hugozhu.site/post/2013/38-java-volatile-variable/</link><pubDate>Sun, 30 Jun 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/38-java-volatile-variable/</guid><description>&lt;p>前几天并发编程群里有同学对volatile的用法提出了疑问，刚好我记得Twitter有关实时搜索的这个&lt;a href="http://2011.lucene-eurocon.org/attachments/0002/8787/Busch_twitter_realtime_search_eurocon_11.pdf">PPT&lt;/a>对这个问题解释的很清晰并有一个实际的应用场景，于是周末把这个问题摘录了一些和并发相关的内容如下：&lt;/p>
&lt;h1 id="并发---定义">并发 - 定义&lt;/h1>
&lt;h2 id="悲观锁---pressimistic-locking">悲观锁 - Pressimistic locking&lt;/h2>
&lt;ol>
&lt;li>一个线性在执行一个操作时持有对一个资源的独占锁。（互斥）&lt;/li>
&lt;li>一般用在冲突比较可能发生的场景下&lt;/li>
&lt;/ol>
&lt;h2 id="乐观锁---optimistic-locking">乐观锁 - Optimistic locking&lt;/h2>
&lt;ol>
&lt;li>尝试采用原子操作，而不需要持有锁；冲突可被检测，如果发生冲突，具有相应的重试逻辑&lt;/li>
&lt;li>通常用在冲突较少发生的场景下&lt;/li>
&lt;/ol>
&lt;h2 id="非阻塞算法---non-blocking-algorithm">非阻塞算法 - Non-blocking algorithm&lt;/h2>
&lt;ol>
&lt;li>算法确保对线程间竞争共享资源时候，不会因为互斥而使任一线程的执行无限延迟；&lt;/li>
&lt;/ol>
&lt;h2 id="无锁算法---lock-free-algorithm">无锁算法 - Lock-free algorithm&lt;/h2>
&lt;ol>
&lt;li>如果系统整个流程的执行是无阻塞的(系统某一部分可能被短暂阻塞)，这种非阻塞算法就是无锁的。&lt;/li>
&lt;li>无锁算法比传统的基于锁的算法对系统的开销更小，且更容易在多核多CPU处理器上扩展；&lt;/li>
&lt;li>在实时系统中可以避免锁带来的延迟；&lt;/li>
&lt;li>CAS (compare and swap)或LL/SC(load linked/store conditional)，以及内存屏障相关的指令经常被用在算法实现中。&lt;/li>
&lt;/ol>
&lt;h2 id="无等待算法---wait-free-algorithm">无等待算法 - Wait-free algorithm&lt;/h2>
&lt;ol>
&lt;li>如果每个线程的执行都是无阻塞的，这种非阻塞算法就是无等待的（比无锁算法更好）&lt;/li>
&lt;/ol>
&lt;h1 id="java的并发">Java的并发&lt;/h1>
&lt;ol>
&lt;li>Java的内存模型并不保证一个线程可以一直以程序执行的顺序看到另一个线程对变量的修改，除非两个线程都跨越了同一个内存屏障。（Safe publication）&lt;/li>
&lt;/ol>
&lt;h1 id="java内存模型">Java内存模型&lt;/h1>
&lt;h2 id="代码顺序规则">代码顺序规则&lt;/h2>
&lt;ol>
&lt;li>一个线程内的每个动作 happens-before 同一个线程内在代码顺序上在其后的所有动作&lt;/li>
&lt;/ol>
&lt;h2 id="volatile变量规则">volatile变量规则&lt;/h2>
&lt;ol>
&lt;li>对一个volatile变量的读，总是能看到（任意线程）对这个volatile变量最后的写入&lt;/li>
&lt;/ol>
&lt;h2 id="传递性">传递性&lt;/h2>
&lt;ol>
&lt;li>如果A happens-before B, B happens-before C，那 A happens-before C&lt;/li>
&lt;/ol>
&lt;h1 id="safe-publication案例">Safe publication案例&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">class VolatileExample {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> int x = 0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volatile int b = 0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private void write() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> x = 5;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> b = 1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private void read() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> int dummy = b;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while (x!=5) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> final VolatileExample example = new VolatileExample();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Thread thread1 = new Thread(new Runnable() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void run() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> example.write();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Thread thread2 = new Thread(new Runnable() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void run() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> example.read();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> thread1.start();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> thread2.start();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> thread1.join();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> thread2.join();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;img src="https://www.evernote.com/shard/s26/sh/569ae14f-957d-4ca0-97d7-72f66479d298/b4fb554c924ec7c2356d3ca94d7be61a/deep/0/Screenshot%206/30/13%2010:48%20AM.png"/>
&lt;p>x并不需要定义为&lt;code>volatile&lt;/code>, 程序里可以有需要类似x的变量，我们只需要一个volatile变量b来确保线程a能看到线程1对x的修改：&lt;/p></description></item><item><title>在Android上使用tcpdump</title><link>https://hugozhu.site/post/2013/37-tcpdump_on_android/</link><pubDate>Mon, 24 Jun 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/37-tcpdump_on_android/</guid><description>&lt;p>tcpdump工具是分析网络协议和数据包的利器，也可以在Android上使用（需要root）。&lt;/p>
&lt;p>首先在android上安装tcpdump&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget http://www.strazzere.com/android/tcpdump
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adb push tcpdump /data/local/tmp/tcpdump
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adb chmod 755 /data/local/tmp/tcpdump
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后使用root用户启动tcpdump，在android上进行相应的操作后，按ctrl+c中断&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">adb shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell@android:/ $ su
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@android:/ # /data/local/tmp/tcpdump -h 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tcpdump version 3.9.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">libpcap version 0.9.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage: tcpdump [-aAdDeflLnNOpqRStuUvxX] [-c count] [ -C file_size ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		[ -E algo:secret ] [ -F file ] [ -i interface ] [ -M secret ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		[ -r file ] [ -s snaplen ] [ -T type ] [ -w file ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		[ -W filecount ] [ -y datalinktype ] [ -Z user ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		[ expression ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@android:/ # /data/local/tmp/tcpdump -p -vv -s 0 w /sdcard/capture.pcap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>tcpdump会在/sdcard下生成文件，可以通过&lt;code>adb pull /sdcard/capture.pcap&lt;/code>把文件传到PC上用&lt;a href="http://wireshark.org/">wireshark&lt;/a>看，也可以直接在android上通过&lt;a href="https://play.google.com/store/apps/details?id=lv.n3o.sharkreader">SharkReader&lt;/a>看。&lt;/p></description></item><item><title>使用Ping来检查网络连通性</title><link>https://hugozhu.site/post/2013/36-use-ping-to-check-network-connectivity/</link><pubDate>Sat, 01 Jun 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/36-use-ping-to-check-network-connectivity/</guid><description>&lt;p>树莓派使用了一个无线网卡连接家里的无线路由器，在实际使用过程中发现连续运行多天后会掉线，而且掉线后基本上就再也连不上网了，需要重启树莓派才能恢复，十分麻烦。&lt;/p>
&lt;p>假设无线路由器IP是192.168.1.1，于是每隔15分钟检查一下，是否能从树莓派上ping通路由器；如果不能则重启无线网络，脚本如下：&lt;/p>
&lt;p>&lt;strong>network.sh&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ping_count&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">count&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sb">`&lt;/span>timeout &lt;span class="m">5&lt;/span> ping 192.168.1.1 &lt;span class="p">|&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="nb">read&lt;/span> LINE&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LINE&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span>~ &lt;span class="s2">&amp;#34;64 bytes from&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">let&lt;/span> &lt;span class="s2">&amp;#34;count = &lt;/span>&lt;span class="nv">$count&lt;/span>&lt;span class="s2"> + 1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;export count=&lt;/span>&lt;span class="nv">$count&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$count&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="k">$(&lt;/span>ping_count&lt;span class="k">)&lt;/span> &amp;lt; &lt;span class="m">1&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ifconfig wlan0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ifconfig wlan0 down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ifconfig wlan0 up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> netcfg -r wlan0-Hugo-Nas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="k">$(&lt;/span>ping_count&lt;span class="k">)&lt;/span> &amp;lt; &lt;span class="m">1&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Fatal error: wifi is down, rebooting now...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以用ifconfig wlan0 down &amp;amp;&amp;amp; ./network.sh来测试脚本是否能正常工作，测试完成后就可以放到crontab里执行了。&lt;/p></description></item><item><title>树莓派的GPIO接口输出电流限制</title><link>https://hugozhu.site/post/2013/35-understanding-output/</link><pubDate>Tue, 14 May 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/35-understanding-output/</guid><description>&lt;p>树莓派提供了一个连接头让我们访问CPU的17个GPIO接口，如下图&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/92d52938-5bd9-46a7-9b05-478e9f30f5d7/b29dcc510983784a07472c8282330b30/deep/0/Screenshot%205/14/13%208:51%20PM.png"/>
&lt;p>这些接口可配置成输入或输出。本文主要讨论GPIO引脚作为输出时电流的限制。&lt;/p>
&lt;h1 id="阻抗-impendance">阻抗 (impendance)&lt;/h1>
&lt;p>阻抗和和电阻的区别（resistance）在于电阻的阻值是固定的，不会随着电流变化，阻抗则不然，可能随着外部变化，如电流或频率变化。从另一个角度来说，电阻是线性的，但阻抗不是。比如放大器的阻抗会随着输出的信号频率变化。&lt;/p>
&lt;p>树莓派的的每个GPIO引脚都有一个寄存器可以设置引脚的驱动强度，也就是在保持输出电压为逻辑0和1的情况下，可以改变阻抗的大小从而改变GPIO引脚的输出电流大小。&lt;/p>
&lt;p>通过如下电路测量相同电流下不同阻抗对应的GPIO电压输出（其中用到了一个电位器调节电流保持恒定）：&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/11008332-acac-4625-9b6a-963c97ec7498/1e6d153774b7e95214fe0c2bba9121d8/deep/0/Screenshot%205/14/13%2010:22%20PM.png"/>
&lt;p>通过计算后，下表是当输出电流为2，4 … 16mA时，对应的阻抗大小以及如果发生短路时的短路电流大小。&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/7a411df0-56b1-4f76-bce5-54961bcfcfc7/4e46d9e28d7d01a34eb9e66ee28a5ba8/deep/0/Screenshot%205/14/13%2010:39%20PM.png"/>
&lt;p>可以看出短路电流都是超过16mA的。&lt;/p>
&lt;p>一个发光二极管压降约为1.5&lt;del>2.0v，工作电流为3&lt;/del>10v&lt;/p>
&lt;p>GPIO引脚的电流是通过板上的3.3V电压调整器输出的，树莓派是按平均每个引脚3mA来设计的，所以总的电流不能超过17 * 3 = 51mA。&lt;/p>
&lt;h1 id="结论">结论&lt;/h1>
&lt;p>树莓派引脚电流大小的限制是：&lt;strong>每个引脚最大输出电流为16毫安(mA)，且同一时刻所有引脚的总输出电流不超过51毫安&lt;/strong>&lt;/p>
&lt;h1 id="参考链接">参考链接&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://www.thebox.myzen.co.uk/Raspberry/Understanding_Outputs.html">http://www.thebox.myzen.co.uk/Raspberry/Understanding_Outputs.html&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>使用8位移位寄存器74HC595扩展树莓派的IO端口</title><link>https://hugozhu.site/post/2013/34-use-74hc595-8-bit-shift-register-with-raspberry-pi/</link><pubDate>Mon, 13 May 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/34-use-74hc595-8-bit-shift-register-with-raspberry-pi/</guid><description>&lt;p>树莓派的GPIO接口数目有限，驱动一个步进电机需要占用4个， 一个Nokia 5110液晶也要占4个， 传感器输入至少需要一个，多玩几个外设后接口就不够用了。如果接口可以复用就可以让树莓派驱动更多的外设了，本文讨论如何使用74HC595集成电路芯片来扩展树莓派的I/O接口。&lt;/p>
&lt;h1 id="芯片介绍">芯片介绍&lt;/h1>
&lt;p>SN74HC595N是德州仪器公司生产的集成电路芯片，是一个8位串行输入变串行输出或并行输出移位寄存器，具有高阻关断，高电平和低电平三态输出。在IO扩充上，可以最多串联15片，也就是高达120个IO扩充。&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/b90034cc-cdf8-426d-a79d-16bbbcbb49b2/0ba3371f3039afa71a17bad845eede7a/deep/0/Screenshot%205/12/13%2010:42%20PM.png"/>
&lt;p>（注意到芯片上的小凹槽了吗，拿芯片的时候以这个为参考物就不会搞反了）&lt;/p>
&lt;p>接口的常用命名方式有以下两种：&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>接口代号(编号)&lt;/th>
 &lt;th>说明&lt;/th>
 &lt;th>接口代号(编号)&lt;/th>
 &lt;th>说明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>Q7&amp;rsquo;(9)&lt;/td>
 &lt;td>serial data output&lt;/td>
 &lt;td>QH&amp;rsquo; (9)&lt;/td>
 &lt;td>serial data output&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>MR (10)&lt;/td>
 &lt;td>Master Reset (Active Low)&lt;/td>
 &lt;td>SRCLR (10)&lt;/td>
 &lt;td>Shift register CLeaR&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>SH_CP (11)&lt;/td>
 &lt;td>shift register clock input&lt;/td>
 &lt;td>SRCLK (11)&lt;/td>
 &lt;td>Shift Register CLocK input&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>ST_CP (12)&lt;/td>
 &lt;td>storage register clock input&lt;/td>
 &lt;td>RCLK (12)&lt;/td>
 &lt;td>storage Register CLocK input&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>OE (13)&lt;/td>
 &lt;td>output enable input (Active Low)&lt;/td>
 &lt;td>OE (13)&lt;/td>
 &lt;td>Output Enable&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>DS (14)&lt;/td>
 &lt;td>serial data input&lt;/td>
 &lt;td>SER (14)&lt;/td>
 &lt;td>SERial data input&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Qx (15，1-7)&lt;/td>
 &lt;td>data output&lt;/td>
 &lt;td>Qx (15，1-7)&lt;/td>
 &lt;td>data output&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h1 id="控制流程">控制流程&lt;/h1>
&lt;p>如果要在8个引脚输出01010101&lt;/p></description></item><item><title>树莓派网站容灾：利用DNSPod，Google App Engine和Github</title><link>https://hugozhu.site/post/2013/33-use-google-app-engine-failover-your-blog-between-raspberrypi-and-github/</link><pubDate>Mon, 22 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/33-use-google-app-engine-failover-your-blog-between-raspberrypi-and-github/</guid><description>&lt;h1 id="背景介绍">背景介绍&lt;/h1>
&lt;p>&lt;a href="http://hugozhu.myalert.info/2013/02/27/%E5%9C%A8Pi%E5%92%8CGithub%E4%B8%8A%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html">把网站托管在树莓派上&lt;/a>后如果家里停电或是宽带故障，会造成网站中断。本文提供一个免费的解决方案（前提是你需要有自己的一个域名，并由DNSPod解析）&lt;/p>
&lt;h1 id="dnspod">DNSPod&lt;/h1>
&lt;p>首先需要在DNSPod里设置好需要failover的域名CNAME：比如&lt;code>hugozhu.myalert.info&lt;/code>&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/95d90628-5c74-4773-aaff-c2110e1863a6/6b592609ef02c42e46664d1fa1493e1c/deep/0/Screenshot%204/22/13%204:57%20PM.png" width="528"/>
&lt;p>其中&lt;code>默认&lt;/code>指向&lt;code>pi.myalert.info&lt;/code>, 这是一个域名的A Record，会由运行在树莓派上的&lt;a href="http://hugozhu.myalert.info/2013/02/26/dynamic-dns-script.html">脚本&lt;/a>来更新动态IP，&lt;code>国外&lt;/code>则指向github。当停电时我们需要自动把｀默认｀这条纪录修改成github。&lt;/p>
&lt;p>使用下面命令获得相应CNAME的domain_id：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">curl -k https://dnsapi.cn/Domain.List -d &amp;#34;login_email=xxx&amp;amp;login_password=xxx&amp;#34; 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>使用下面命令获得相应CNAME的record_id：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">curl -k https://dnsapi.cn/Record.List -d &amp;#34;login_email=xxx&amp;amp;login_password=xxx&amp;amp;domain_id=xxx&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="google-app-engine">Google App Engine&lt;/h1>
&lt;h2 id="切换dns脚本">切换DNS脚本&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">dnspod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;io/ioutil&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;net/url&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">login_email&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;your_login_email&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">login_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;your_login_password&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">domain_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;domain_id&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">record_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;record_id&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">sub_domain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;your_subdomain&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">record_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;CNAME&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">record_line&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;默认&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">ttl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;600&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">Update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">client&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Client&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cname&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">string&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">body&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Values&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;login_email&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">login_email&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;login_password&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">login_password&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">format&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;domain_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">domain_id&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;record_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">record_id&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;sub_domain&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">sub_domain&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;record_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">record_type&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;record_line&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">record_line&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">cname&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="s2">&amp;#34;ttl&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">ttl&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewRequest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;POST&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;https://dnsapi.cn/Record.Modify&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strings&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Encode&lt;/span>&lt;span class="p">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Accept&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;text/json&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Content-type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;application/x-www-form-urlencoded&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">resp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Do&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">return&lt;/span> &lt;span class="n">err&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">defer&lt;/span> &lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Body&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">bytes&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">ioutil&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ReadAll&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">resp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Body&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">return&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bytes&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="检测接口">检测接口&lt;/h2>
&lt;p>部署一个web应用到Google App Engine上，该应用接受树莓派上的一个URL（注意这里不应该用需failver的域名），并请求该域名以检查网站是否正常。这里也可以使用监控宝来监控，但只有付费专业版才支持出错后回调URL。&lt;/p></description></item><item><title>使用Goroutine和Channel实现按键超时交互</title><link>https://hugozhu.site/post/2013/32-use-goroutine-and-channel-to-implement-interaction-with-timeout/</link><pubDate>Sun, 21 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/32-use-goroutine-and-channel-to-implement-interaction-with-timeout/</guid><description>&lt;h1 id="背景介绍">背景介绍&lt;/h1>
&lt;p>前面的文章（见&lt;a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">参考链接&lt;/a>）已经介绍了如何使用按键作为树莓派的输入。在实际应用中可以通过按下按键循环显示预先设定的脚本输出到显示屏幕，需求如下：&lt;/p>
&lt;ol>
&lt;li>如果按键不被触动，则定时5秒执行脚本获取最新内容显示；&lt;/li>
&lt;li>因为不同的脚本获取内容速度会不一样，我们要求如果超过500ms脚本还未返回，需要在屏幕上显示“loading…”这样的过渡内容，如果脚本在500ms内返回，则不显示。&lt;/li>
&lt;/ol>
&lt;p>使用Goroutine和Channel可以很方便的实现这个需求。&lt;/p>
&lt;h1 id="代码">代码&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">screen_chan&lt;/span> &lt;span class="n">chan&lt;/span> &lt;span class="ne">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">switch_chan&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chan&lt;/span> &lt;span class="ne">bool&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">goroutine&lt;/span>&lt;span class="err">：&lt;/span> &lt;span class="err">检查按键是否被按&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">last_time&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnixNano&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">1000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">btn_pushed&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">total_mode&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">for&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">WiringPiISR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PIN_GPIO_6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">INT_EDGE_FALLING&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="k">if&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">n&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnixNano&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">1000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">delta&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">last_time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="k">if&lt;/span> &lt;span class="n">delta&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">300&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="err">如果两次按键变化的间隔时间&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="err">，是因为接触信号不稳定可以忽略掉&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">last_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">btn_pushed&lt;/span>&lt;span class="o">++&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">btn_pushed&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">total_mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">goroutine&lt;/span>&lt;span class="err">：&lt;/span> &lt;span class="err">根据管道消息刷新屏幕&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="n">loop_update_display&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="err">选择确实的屏幕内容脚本编号&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">goroutine&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">定时&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s向管道发送更新屏幕内容的信号&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">ticker&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewTicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">ticker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">C&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">...&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">loop_update_display&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">current_screen&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">for&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">screen_chan&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">switch_screen&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">if&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		 &lt;span class="o">//&lt;/span>&lt;span class="err">说明是按钮触发的消息，而不是定时器触发的&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="k">if&lt;/span> &lt;span class="n">msg&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">current_screen&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="o">//&lt;/span>&lt;span class="n">btn&lt;/span> &lt;span class="n">pushed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">current_screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">msg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">switch_screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">select&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="k">case&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">After&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Millisecond&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">						&lt;span class="n">display_loading&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">						&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">switch_chan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="k">case&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">switch_chan&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">switch&lt;/span> &lt;span class="n">current_screen&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">case&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">display_screen0&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">case&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">display_screen1&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">case&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">display_screen2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">if&lt;/span> &lt;span class="n">switch_screen&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">switch_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">select&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">case&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">After&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Millisecond&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">display_loading&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">current_screen&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">switch_chan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">case&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">switch_chan&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>超时控制的代码就是上面几行了。首先如果是按键触发，主goroutine会创建一个检查超时的goroutine，该goroutine执行&lt;code>select&lt;/code>语句时会试图从两个管道里获取消息，先获取到消息的管道会继续执行相应分支的代码。&lt;/p></description></item><item><title>Go语言内存模型</title><link>https://hugozhu.site/post/2013/31-golang-memory-model/</link><pubDate>Sat, 20 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/31-golang-memory-model/</guid><description>&lt;h1 id="名词定义">名词定义&lt;/h1>
&lt;p>执行体 - Go里的Goroutine或Java中的Thread&lt;/p>
&lt;h1 id="背景介绍">背景介绍&lt;/h1>
&lt;p>内存模型的目的是为了定义清楚变量的读写在不同执行体里的可见性。理解内存模型在并发编程中非常重要，因为代码的执行顺序和书写的逻辑顺序并不会完全一致，甚至在编译期间编译器也有可能重排代码以最优化CPU执行, 另外还因为有CPU缓存的存在，内存的数据不一定会及时更新，这样对内存中的同一个变量读和写也不一定和期望一样。&lt;/p>
&lt;p>和&lt;a href="http://ifeve.com/java-memory-model-1/">Java的内存模型规范&lt;/a>类似，Go语言也有一个内存模型，相对JMM来说，Go的内存模型比较简单，Go的并发模型是基于CSP（&lt;a href="http://en.wikipedia.org/wiki/Communicating_sequential_processes">Communicating Sequential Process&lt;/a>）的，不同的Goroutine通过一种叫Channel的数据结构来通信；Java的并发模型则基于多线程和共享内存，有较多的概念（violatie, lock, final, construct, thread, atomic等）和场景，当然java.util.concurrent并发工具包大大简化了Java并发编程。&lt;/p>
&lt;p>Go内存模型规范了在什么条件下一个Goroutine对某个变量的修改一定对其它Goroutine可见。&lt;/p>
&lt;h1 id="happens-before">Happens Before&lt;/h1>
&lt;p>在一个单独的Goroutine里，对变量的读写和代码的书写顺序一致。比如以下的代码:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="ne">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>尽管在编译期和执行期，编译器和CPU都有可能重排代码，比如，先执行b=2，再执行a=1，但c=a+2是保证在a=1后执行的。这样最后的执行结果一定是&lt;code>1 2 3&lt;/code>，不会是&lt;code>1 2 2&lt;/code>。但下面的代码则可能会输出&lt;code>0 0 0&lt;/code>，&lt;code>1 2 2&lt;/code>, &lt;code>0 2 3&lt;/code> (b=2比a=1先执行), &lt;code>1 2 3&lt;/code>等各种可能。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="ne">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="happens-before-定义">Happens-before 定义&lt;/h2>
&lt;p>Happens-before用来指明Go程序里的内存操作的局部顺序。如果一个内存操作事件e1 happens-before e2，则e2 happens-after e1也成立；如果e1不是happens-before e2,也不是happens-after e2，则e1和e2是并发的。&lt;/p></description></item><item><title>树莓派I2C编程</title><link>https://hugozhu.site/post/2013/30-raspberrypi-i2c-programming/</link><pubDate>Thu, 18 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/30-raspberrypi-i2c-programming/</guid><description>&lt;p>(！未完！)&lt;/p>
&lt;p>除了&lt;a href="http://hugozhu.myalert.info/2013/04/05/25-get-spi-working-on-raspberry-pi-spi.html">SPI&lt;/a>协议外，树莓派还支持&lt;a href="http://zh.wikipedia.org/wiki/I%C2%B2C">I2C&lt;/a>。I2C是为了连接低速周边装置设计的，只需要用两根线（SDA和SCL，也就是树莓派的端口8和9-wiringPi编号）。&lt;/p>
&lt;h1 id="i2c">I2C&lt;/h1>
&lt;img src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/I2C.svg/350px-I2C.svg.png"/>
&lt;p>上图是一个主控使用I2C驱动3个设备的示意图&lt;/p>
&lt;h1 id="参考链接">参考链接&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://zh.wikipedia.org/wiki/I">http://zh.wikipedia.org/wiki/I&lt;/a>²C&lt;/li>
&lt;li>&lt;a href="https://projects.drogon.net/raspberry-pi/wiringpi/i2c-library/">https://projects.drogon.net/raspberry-pi/wiringpi/i2c-library/&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>使用Go语言在树莓派上编程</title><link>https://hugozhu.site/post/2013/29-use-wiringpi-go-binding/</link><pubDate>Sun, 14 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/29-use-wiringpi-go-binding/</guid><description>&lt;p>&lt;a href="https://projects.drogon.net/raspberry-pi/wiringpi/">WiringPi&lt;/a>是树莓派上比较好的一个开发库，是用C语言写的。使用cgo，我们可以在Go语言里方便的调用WiringPI的函数，于是我包装了一个&lt;a href="https://github.com/hugozhu/rpi">WiringPi-Go&lt;/a>，目前支持wiringPi的基本功能，硬件SPI协议驱动Nokia 5110屏幕，以及中断，未来还会增加PWM和I2C协议的支持。&lt;/p>
&lt;p>下面是一个完整的使用例子，结合了之前的两个电路：&lt;a href="http://hugozhu.myalert.info/2013/04/08/27-interrupts-with-gpio-pins.html">链接1&lt;/a>，&lt;a href="http://hugozhu.myalert.info/2013/04/05/25-get-spi-working-on-raspberry-pi-spi.html">链接2&lt;/a>&lt;/p>
&lt;p>通过push button可以切换液晶屏显示不同脚本的输出内容。&lt;/p>
&lt;p>lcd_switch.go&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34;github.com/hugozhu/rpi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;github.com/hugozhu/rpi/pcd8544&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;os/exec&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">DIN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PIN_MOSI&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">SCLK&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PIN_SCLK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">DC&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PIN_GPIO_2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">RST&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PIN_GPIO_0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">CS&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PIN_CE0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">PUSHBUTTON&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PIN_GPIO_6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">CONTRAST&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">40&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="n">may&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">tweak&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="n">Nokia&lt;/span> &lt;span class="mi">5110&lt;/span> &lt;span class="n">screen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">screen_chan&lt;/span> &lt;span class="n">chan&lt;/span> &lt;span class="ne">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">TOTAL_MODES&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">WiringPiSetup&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDInit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SCLK&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DIN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">DC&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CS&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">RST&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">CONTRAST&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chan&lt;/span> &lt;span class="ne">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">goroutine&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">button&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">event&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">last_time&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnixNano&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">1000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">btn_pushed&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">for&lt;/span> &lt;span class="n">pin&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">WiringPiISR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">PUSHBUTTON&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">INT_EDGE_FALLING&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="k">if&lt;/span> &lt;span class="n">pin&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">n&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnixNano&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">1000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">delta&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">last_time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="k">if&lt;/span> &lt;span class="n">delta&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">300&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="n">software&lt;/span> &lt;span class="n">debouncing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;btn pushed&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">last_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">btn_pushed&lt;/span>&lt;span class="o">++&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">					&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="n">btn_pushed&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">TOTAL_MODES&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="k">switch&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="n">display&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="n">groutine&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="n">display&lt;/span> &lt;span class="n">every&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="n">seconds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">go&lt;/span> &lt;span class="n">loop_update_display&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="o">//&lt;/span>&lt;span class="n">set&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="n">display&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">ticker&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewTicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Second&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">for&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="o">&amp;lt;-&lt;/span>&lt;span class="n">ticker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">C&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">screen_chan&lt;/span> &lt;span class="o">&amp;lt;-&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">//&lt;/span>&lt;span class="n">refresh&lt;/span> &lt;span class="n">current&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="n">every&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="n">seconds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">loop_update_display&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">current_screen&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">for&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="nb">range&lt;/span> &lt;span class="n">screen_chan&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">if&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="k">if&lt;/span> &lt;span class="n">screen&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">current_screen&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="o">//&lt;/span>&lt;span class="n">btn&lt;/span> &lt;span class="n">pushed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">current_screen&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">screen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">				&lt;span class="n">display_loading&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">switch&lt;/span> &lt;span class="n">current_screen&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">case&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">display_screen0&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">case&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">display_screen1&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">case&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			&lt;span class="n">display_screen2&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">display_loading&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDclear&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdrawstring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Loading ...&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdisplay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">display_screen0&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/bin/screen_0.sh&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CombinedOutput&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDclear&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdrawstring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdisplay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">display_screen1&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/bin/screen_1.sh&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CombinedOutput&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDclear&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdrawstring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdisplay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">display_screen2&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/bin/screen_2.sh&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CombinedOutput&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDclear&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdrawstring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">pcd8544&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LCDdisplay&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>/bin/screen_2.sh&lt;/p></description></item><item><title>使用tsar记录和监控树莓派CPU温度</title><link>https://hugozhu.site/post/2013/28-use-tsar-to-monitor-raspberry-pi/</link><pubDate>Sat, 13 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/28-use-tsar-to-monitor-raspberry-pi/</guid><description>&lt;p>夏天到了，树莓派的CPU温度也开始节节攀升，虽然我们也可以用云服务&lt;a href="https://cosm.com">cosm&lt;/a>来监控，但每5分钟采样一次精度不够高，每分钟采样一次则上传次数又太多了点。最好的方法还是使用&lt;a href="http://github.com/alibaba/tsar">tsar&lt;/a>这样的工具本地高频（如每1分钟）采样，然后再定时将5分钟的均值上传到cosm绘图。&lt;/p>
&lt;p>Tsar是淘宝的一个用来收集服务器系统和应用信息的采集报告工具，如收集服务器的系统信息（cpu，mem等），以及应用数据（nginx、swift等），收集到的数据存储在服务器磁盘上，可以随时查询历史信息，也可以将数据发送到nagios报警。Tsar能够比较方便的增加模块，只需要按照tsar的要求编写数据的采集函数和展现函数，就可以把自定义的模块加入到tsar中。&lt;/p>
&lt;h1 id="更新">&lt;strong>更新&lt;/strong>&lt;/h1>
&lt;p>[2013-04-14] mod_rpi已经被合并到了主干代码：&lt;a href="https://github.com/alibaba/tsar/blob/master/modules/mod_rpi.c">https://github.com/alibaba/tsar/blob/master/modules/mod_rpi.c&lt;/a> 只需要增加文件：&lt;code>/etc/tsar/conf.d/rpi.conf&lt;/code>，内容为以下即可开始使用mod_rpi模块：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mod_rpi on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">####add it to tsar default output
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output_stdio_mod mod_rpi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="mod_rpi模块开发方法">mod_rpi模块开发方法&lt;/h1>
&lt;p>首先按照安装说明，见&lt;a href="https://github.com/alibaba/tsar">https://github.com/alibaba/tsar&lt;/a>将tsar和tsardevel安装好。&lt;/p>
&lt;p>首先运行下面的命令生成mod_rpi模块：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">hugo@raspberrypi2 ~/projects/tsardevel $ tsardevel rpi 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">build:make
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">install:make install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uninstall:make uninstall
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo@raspberrypi2 ~/projects/tsardevel $ ls rpi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Makefile mod_rpi.c mod_rpi.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后修改mod_rpi.c，增加读取CPU温度的逻辑：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * (C) 2010-2011 Alibaba Group Holding Limited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Licensed under the Apache License, Version 2.0 (the &amp;#34;License&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * you may not use this file except in compliance with the License.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * You may obtain a copy of the License at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * http://www.apache.org/licenses/LICENSE-2.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Unless required by applicable law or agreed to in writing, software
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * distributed under the License is distributed on an &amp;#34;AS IS&amp;#34; BASIS,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * See the License for the specific language governing permissions and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * limitations under the License.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#include &amp;#34;tsar.h&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Structure for rpi infomation.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">struct stats_rpi {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	unsigned int cpu_temp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#define STATS_TEST_SIZE (sizeof(struct stats_rpi))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">static char *rpi_usage = &amp;#34; --rpi Rapsberry Pi information (CPU temprature ...)&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">static void read_rpi_stats(struct module *mod, char *parameter)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	FILE *fp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	char buf[64];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	memset(buf, 0, sizeof(buf));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	struct stats_rpi st_rpi;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	memset(&amp;amp;st_rpi, 0, sizeof(struct stats_rpi));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	if ((fp = fopen(&amp;#34;/sys/class/thermal/thermal_zone0/temp&amp;#34;, &amp;#34;r&amp;#34;)) == NULL) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		return;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	int cpu_temp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	fscanf(fp, &amp;#34;%d&amp;#34;, &amp;amp;cpu_temp);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	st_rpi.cpu_temp = cpu_temp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	int pos = sprintf(buf, &amp;#34;%u&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			/* the store order is not same as read procedure */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">			st_rpi.cpu_temp);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	buf[pos] = &amp;#39;\0&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	set_mod_record(mod, buf);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	fclose(fp);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	return;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">static struct mod_info rpi_info[] = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	{&amp;#34; temp&amp;#34;, SUMMARY_BIT, 0, STATS_NULL}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">static void set_rpi_record(struct module *mod, double st_array[],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		U_64 pre_array[], U_64 cur_array[], int inter)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	st_array[0] = cur_array[0]/1000.0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">void mod_register(struct module *mod)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	register_mod_fileds(mod, &amp;#34;--rpi&amp;#34;, rpi_usage, rpi_info, 1, read_rpi_stats, set_rpi_record);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>最后&lt;code>make &amp;amp;&amp;amp; sudo make install&lt;/code>将mod_rpi自定义tsar模块安装好。&lt;/p></description></item><item><title>Raspberry Pi的GPIO中断编程</title><link>https://hugozhu.site/post/2013/27-interrupts-with-gpio-pins/</link><pubDate>Mon, 08 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/27-interrupts-with-gpio-pins/</guid><description>&lt;h1 id="背景介绍">背景介绍&lt;/h1>
&lt;p>树莓派的GPIO引脚不仅可以输出高低电平，也可以当做输入端口（可以想象成键盘输入），当GPIO接入的是高电平，GPIO的值可以认为是1，如果是低电平则是0。如下图所示，可以使用一个Push Button开关按键来控制GPIO 25（BCM Numbering）的高低电平以达到控制的目的。&lt;/p>
&lt;img src="https://www.evernote.com/shard/s26/sh/bd720803-1b71-454d-98a2-cf0e907df688/649d6eb30376f8a378ef3e8a7cc3c552/deep/0/Screenshot%204/8/13%2011:25%20PM.jpg?noteKey=649d6eb30376f8a378ef3e8a7cc3c552&amp;suffix=deep%2F0%2FScreenshot+4%2F8%2F13+11%3A25+PM.jpg&amp;noteGuid=bd720803-1b71-454d-98a2-cf0e907df688"/>
&lt;p>GPIO 25和VCC（3.3V）之间通过R1（10K欧姆）和R2（1K欧姆）&lt;a href="https://zh.wikipedia.org/zh/%E4%B8%8A%E6%8B%89%E7%94%B5%E9%98%BB">上拉电阻&lt;/a>相连，当按键未被按下时，GPIO 25上拉到VCC，程序可以读到1，当按键按下时，GPIO 25被下拉电阻R2拉到GND（0V），程序可以读到0。如果不加R1，而GPIO 25不小心被设置成输出低电平时，将直接和VCC相连而造成短路，这样可能会烧掉这个引脚，所以加上限流电阻R1后，即使发生这样的情况，也不会出现短路情况。&lt;/p>
&lt;h1 id="应用">应用&lt;/h1>
&lt;p>如果我们需要根据GPIO 25的值来控制树莓派，比如按下按钮时希望点亮某个LED或在液晶上显示当前时间，就需要通过程序来获取状态的变化。&lt;/p>
&lt;p>一种常见的做法是在循环里不断读取该引脚的状态，当发生对应的变化的时执行控制逻辑，但显而易见，这种做法很消耗CPU，如果在循环增加&lt;code>sleep(1000)&lt;/code>这样的调用，又很容易错过按键变化。较好的做法则是通过&lt;a href="http://zh.wikipedia.org/wiki/%E4%B8%AD%E6%96%AD">中断&lt;/a>来实现。&lt;/p>
&lt;p>最新的树莓派Raspbian和Arch Linux内核都已经包含了GPIO的中断处理支持。但使用前需要将指定GPIO引脚输出，方法如下：&lt;/p>
&lt;p>首先可以通过命令&lt;code>echo 25 &amp;gt; /sys/class/gpio/export&lt;/code>导出GPIO 25端口，执行成功后在相应的目录下看到以下文件，得益于Linux下&lt;strong>一切都是文件&lt;/strong>的设计理念，GPIO的状态可以通过&lt;code>value&lt;/code>文件来获取，这样就可以利用Linux的poll/epoll来获取&lt;code>value&lt;/code>文件的变化(这点和Linux高性能网络编程是类似的)。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@raspberrypi2 ~/projects/interrupt_test # ls -l /sys/class/gpio/gpio25/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 root root 4096 Apr 8 23:56 active_low
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 root root 4096 Apr 8 22:29 direction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 root root 4096 Apr 8 22:29 edge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 root root 0 Apr 8 23:56 power
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx 1 root root 0 Apr 8 23:56 subsystem -&amp;gt; ../../../../class/gpio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 root root 4096 Apr 8 22:08 uevent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 root root 4096 Apr 8 22:29 value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@raspberrypi2 ~/projects/interrupt_test # 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="wiringpi">wiringPi&lt;/h1>
&lt;p>&lt;a href="https://projects.drogon.net/raspberry-pi/wiringpi/functions/">wiringPi&lt;/a>库封装了一个简单的接口，传入一个回调函数，当事件发生时传入的函数将被调用。&lt;/p></description></item><item><title>备份Raspberry Pi</title><link>https://hugozhu.site/post/2013/26-backup-raspberry-pi/</link><pubDate>Mon, 08 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/26-backup-raspberry-pi/</guid><description>&lt;p>树莓派的操作系统安装在SD卡，使用一段时间后还是很有必要备份一下，以防哪天SD卡就坏了。&lt;/p>
&lt;p>备份的目的地最方便的还是使用网络存储，我使用的是西部数据的&lt;a href="http://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.1.Cz5Mlq&amp;amp;id=13865367896&amp;amp;is_b=1&amp;amp;cat_id=50099232&amp;amp;q=mybooklive&amp;amp;rn=638aa11bdda81f8d589bb0e052c57187">MyBooklive&lt;/a>3T网络硬盘。挺不错的一个产品，功能基本满足我的需求。&lt;/p>
&lt;p>准备好备份目标盘，将Nas的备份目录mount到树莓派:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir /mnt/backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount -t cifs //mybooklive/Public/Backup /mnt/backup -o guest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="完整备份">完整备份&lt;/h1>
&lt;p>确定相应的SD卡设备ID&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@raspberrypi2 ~/bin # fdisk -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Disk /dev/mmcblk0: 1973 MB, 1973420032 bytes, 3854336 sectors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Units = sectors of 1 * 512 = 512 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sector size (logical/physical): 512 bytes / 512 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I/O size (minimum/optimal): 512 bytes / 512 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Disk identifier: 0x0004f23a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Device Boot Start End Blocks Id System
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mmcblk0p1 * 2048 186367 92160 c W95 FAT32 (LBA)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mmcblk0p2 186368 3667967 1740800 83 Linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Disk /dev/sda: 2107 MB, 2107637760 bytes, 4116480 sectors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Units = sectors of 1 * 512 = 512 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sector size (logical/physical): 512 bytes / 512 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I/O size (minimum/optimal): 512 bytes / 512 bytes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>执行备份&lt;/p></description></item><item><title>在Raspberry Pi上使用硬件SPI</title><link>https://hugozhu.site/post/2013/25-get-spi-working-on-raspberry-pi-spi/</link><pubDate>Fri, 05 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/25-get-spi-working-on-raspberry-pi-spi/</guid><description>&lt;h1 id="什么是spi">什么是SPI&lt;/h1>
&lt;p>SPI (Serial Peripheral Interface)，是一种高速，全双工，同步的通信总线协议，基于SPI的设备需要4根线：&lt;/p>
&lt;p>&lt;img src="https://www.evernote.com/shard/s26/sh/61dba789-b17b-4570-b124-03925a97a4bf/4e64405c3b1a486f7aa4b9451e142b32/deep/0/Screenshot%204/5/13%204:27%20PM.jpg
"/>&lt;/p>
&lt;ol>
&lt;li>SDO / MOSI - 主设备数据输出，从设备数据输入&lt;/li>
&lt;li>SDI / MISO - 主设备数据输入，从设备数据输出&lt;/li>
&lt;li>SCLK / CLK - 时钟信号，由主设备产生&lt;/li>
&lt;li>CS / SS - 从设备使能信号，由主设备控制&lt;/li>
&lt;/ol>
&lt;p>通过CS，主设备可以控制和哪个从设备通信。&lt;/p>
&lt;h2 id="bit-banging">Bit Banging&lt;/h2>
&lt;p>Bit-banging是一种用软件替代专职硬件的串行通信的技术。软件直接对微处理器的管脚的状态进行设置和采样，其功能涵盖诸如：时钟，电平，同步等所有参数。与此不同的是（传统的串行通信技术中），专职硬件诸如 modem、UART 或者 位移寄存器等一般是用来处理这些参数并且提供一个（缓存）的数据接口，软件在这种情况下同信号处理无关。&lt;/p>
&lt;p>bit-banging 具有明显优点诸如：让相同的设备运行不同的协议而只需很小的（甚至不需）硬件的改动。借助很少的额外设备，我们也许可以从数字管脚（数字终端）可以得到视频信号。&lt;/p>
&lt;p>bit-banging 也有一些明显的缺点。在软件仿真的过程中消耗的能量比同样功能的专职硬件大。微处理器过忙地从管脚采样和发送采样信号到管脚。在同等微处理器处理能力下，系统常常会有些噪音。&lt;/p>
&lt;p>在Rasperry Pi上使用Bit Banging在实际情况下有可能因为操作系统调度造成时钟信号不稳定而使设备收到错误的消息，具体的表现就是Nokia 5110屏在长时间运行过程中出现白屏或花屏现象，如下图：&lt;/p>
&lt;img src="http://ww2.sinaimg.cn/bmiddle/6bc40342jw1e3dzvsfxblj.jpg"/>
&lt;p>采用硬件SPI，由Pi的管脚14号Pin（左边倒数第二个）SCLK发出一定频率的时钟信号。经过测试，这种方法产生的时钟信号比Bit Banging软件模拟产生的信号要稳定很多。&lt;/p>
&lt;img src="http://ww1.sinaimg.cn/small/6bc40342jw1e3f1s62pnuj.jpg"/>
软件模拟时钟信号波形
&lt;img src="http://ww1.sinaimg.cn/small/6bc40342jw1e3f6d4wsjij.jpg"/>
硬件SPI时钟信号波形
&lt;h1 id="测试pi的硬件spi">测试Pi的硬件SPI&lt;/h1>
&lt;h2 id="确认内核支持">确认内核支持&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@raspberrypi2 ~/projects/spi_test # ls -la /dev/spi*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crw------- 1 root root 153, 0 Jan 1 1970 /dev/spidev0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crw------- 1 root root 153, 1 Jan 1 1970 /dev/spidev0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="测试代码">测试代码&lt;/h2>
&lt;p>下载 &lt;a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/plain/Documentation/spi/spidev_test.c">spidev_test.c&lt;/a> 或拷贝下面的代码：&lt;/p></description></item><item><title>在Raspberry Pi上使用Google Channel服务搭建实时应用</title><link>https://hugozhu.site/post/2013/24-google-channel-service/</link><pubDate>Wed, 03 Apr 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/24-google-channel-service/</guid><description>&lt;p>前面提到了有关个人网站的&lt;a href="http://hugozhu.myalert.info/2013/03/27/21-realtime-online-user-counter.html">实时在线人数&lt;/a>问题，本文要讨论的是如何自己来实现一个这样的统计服务。因为网站也同时部署在Github上，海外用户访问Github镜像网站的访问日志Pi是拿不到的，这怎么办？&lt;/p>
&lt;h1 id="google-channel-service">Google Channel Service&lt;/h1>
&lt;p>&lt;a href="https://developers.google.com/appengine/docs/go/channel/overview">Google Channel Service&lt;/a>允许应用和&lt;a href="http://appengine.google.com/">GAE (Google App Engine)&lt;/a> 保持一个长连接，允许应用实时发送消息给JavaScript客户端，而不用让客户端用效率很低的定时轮询获取新消息。这个服务是允许有多个发布者和多个订阅者，也能创建多个主题来关联发布者和订阅者。&lt;/p>
&lt;p>使用这个服务分两步：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>客户端请求服务器端（部署在GAE上）获取一个Channel的Token：
&lt;img src="https://developers.google.com/appengine/images/channel_overview01.png"/>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>客户端根据Channel Token和服务器建立长连接，并开始接收消息，这时其它的客户端（或服务器端）可以想这个通道发送消息
&lt;img src="https://developers.google.com/appengine/images/channel_overview02.png"/>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="在线人数统计实现">在线人数统计实现&lt;/h1>
&lt;h2 id="在页面上部署beacon">在页面上部署beacon&lt;/h2>
&lt;p>通常的网站流量统计是依赖部署在页面上的beacon（Javascript或图片标签）来实现的，这样做的好处是可以直接过滤掉一些机器流量，并且可以将日志集中存储在日志收集服务器上，和网站分离开。&lt;/p>
&lt;p>于是可以利用GAE实现一个简单的Beacon服务，这里采用Go语言来实现，用Java或Python也是可以的。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">counter&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;encoding/base64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;appengine&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="s2">&amp;#34;appengine/channel&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">GIF&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="n">byte&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">TOPIC&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;counter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">GIF&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">base64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StdEncoding&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DecodeString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/beacon.gif&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/new_token&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler_new_token&lt;/span>&lt;span class="p">)&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">context&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">appengine&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">now&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Now&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">expire&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">AddDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">zcookie&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Cookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;z&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">zcookie&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">zcookie&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Cookie&lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">zcookie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">zcookie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">make_hash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;your_salt&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RemoteAddr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UnixNano&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">zcookie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Expires&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">expire&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">zcookie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetCookie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">zcookie&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Content-type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;image/gif&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Cache-control&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;no-cache, must-revalidate&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Expires&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Sat, 26 Jul 1997 05:00:00 GMT&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Fprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GIF&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">channel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">TOPIC&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">zcookie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Value&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RemoteAddr&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Referer&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UserAgent&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">handler_new_token&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">c&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">appengine&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">NewContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">tok&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">TOPIC&lt;/span>&lt;span class="p">)&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="n">callback&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FormValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;callback&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Couldn&amp;#39;t create Channel&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StatusInternalServerError&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">c&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Errorf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;channel.Create: %v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="n">callback&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Header&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Content-type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;text/javascript&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Fprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tok&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="n">fmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Fprintf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">callback&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34;(&amp;#39;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#39;)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tok&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>代码最后一行是将访问日志实时通过Channel发送出去，该通道有一个指定的主题，这样订阅该主题的客户端都可以收到相应的消息。&lt;/p></description></item><item><title>Arduino初试</title><link>https://hugozhu.site/post/2013/23-arduino-1st-day/</link><pubDate>Thu, 28 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/23-arduino-1st-day/</guid><description>&lt;p>今天拿到一块Arduino UNO R3板，迫不及待就开始试用了。相比Raspberry Pi是一个全能的电脑，Arduino则是个硬件开源的单片机，因为开源，资料和配件网上就很很多了，也就容易让初学者上手了。&lt;/p>
&lt;p>Arduino特点:&lt;/p>
&lt;ol>
&lt;li>开源，硬件标准化，配套传感器等模块很多；&lt;/li>
&lt;li>结构简单&lt;/li>
&lt;li>实时系统，稳定，启动只要0.5秒&lt;/li>
&lt;/ol>
&lt;h1 id="arduino-ide">Arduino IDE&lt;/h1>
&lt;p>&lt;a href="http://arduino.cc/en/Main/Software">下载Arduino IDE&lt;/a>&lt;/p>
&lt;h1 id="上电测试">上电测试&lt;/h1>
&lt;p>用USB线接在电脑USB口，然后在GND和PIN 13上插一个二极管，注意二极管正极插在PIN 13上, 如下图：
&lt;img src="http://ww1.sinaimg.cn/bmiddle/6bc40342jw1e35tmsg0tjj.jpg"/>&lt;/p>
&lt;p>(注：还应该串联一个300欧姆的限流电阻才保险！)&lt;/p>
&lt;h1 id="上传代码">上传代码&lt;/h1>
&lt;p>在Arduino IDE编辑好下面的代码，然后点Upload后就会运行了，会看到LED一闪一闪。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Blink
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Turns on an LED on for one second, then off for one second, repeatedly.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> This example code is in the public domain.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// Pin 13 has an LED connected on most Arduino boards.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// give it a name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">int led = 13;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// the setup routine runs once when you press reset:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">void setup() { 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // initialize the digital pin as an output.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pinMode(led, OUTPUT); 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// the loop routine runs over and over again forever:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">void loop() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> digitalWrite(led, HIGH); // turn the LED on (HIGH is the voltage level)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delay(1000); // wait for a second
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> digitalWrite(led, LOW); // turn the LED off by making the voltage LOW
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delay(1000); // wait for a second
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="参考链接">参考链接&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://arduino.cc/en/Tutorial/Blink">http://arduino.cc/en/Tutorial/Blink&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>并发编程之内存屏障</title><link>https://hugozhu.site/post/2013/22-memory-barriers-or-fences/</link><pubDate>Thu, 28 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/22-memory-barriers-or-fences/</guid><description>&lt;p>原文地址：&lt;a href="http://mechanical-sympathy.blogspot.com/2011/07/memory-barriersfences.html">&lt;code>http://mechanical-sympathy.blogspot.com/2011/07/memory-barriersfences.html&lt;/code>&lt;/a> 或 &lt;a href="http://ifeve.com/memory-barriersfences/">&lt;code>http://ifeve.com/memory-barriersfences/&lt;/code>&lt;/a>&lt;/p>
&lt;p>关键词：Load Barrier, Store Barrier, Full Barrier&lt;/p>
&lt;p>本文我将和大家讨论并发编程中最基础的一项技术：内存屏障或内存栅栏，也就是让一个CPU处理单元中的内存状态对其它处理单元可见的一项技术。&lt;/p>
&lt;p>CPU使用了很多优化技术来达成一个事实：CPU执行单元的速度要远超主存访问速度。在我上一篇文章 &amp;ldquo;Write Combing - 合并写&amp;quot;中我已经介绍了其中的一项技术。CPU避免内存访问延迟最常见的技术是将指令管道化，然后尽量重排这些管道的执行以最大利用缓存而把因为缓存未命中引起的延迟降到最小。&lt;/p>
&lt;p>当一个程序执行时指令是否被重排并不重要，只要最终的结果是一样的。例如，在一个循环里，如果循环体内没用到这个计数器，循环的计数器什么时候更新（在循环开始，中间还是最后）并不重要。编译器和CPU可以自由的重排指令以最佳的利用CPU，只要下一次循环前更新该计数器即可。并且在循环执行中，这个变量可能一直存在寄存器上，并没有被推到缓存或主存，这样这个变量对其他CPU来说一直都是不可见的。&lt;/p>
&lt;p>CPU核内部包含了多个执行单元。例如，现代Intel CPU包含了6个执行单元，可以组合进行算术运算，逻辑条件判断及内存操作。每个执行单元可以执行上述任务的某种组合。这些执行单元是并行执行的，这样指令也就是在并行执行。但如果站在另一个CPU角度看，这也就产生了程序顺序的另一种不确定性。&lt;/p>
&lt;p>最后，当一个缓存失效发生时，现代CPU可以先假设一个内存载入的值并根据这个假设值继续执行，直到内存载入返回确切的值。&lt;/p>
&lt;img src="http://ifeve.com/wp-content/uploads/2013/03/cpu.png"/>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">CPU核
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> V
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">寄存器
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> V
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">执行单元 -&amp;gt; Load/Store缓冲区-&amp;gt;L1 Cache ---&amp;gt;L3 Cache--&amp;gt;内存控制器--&amp;gt;主存
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +-&amp;gt; Write Combine缓冲区-&amp;gt;L2 Cache ---+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>代码顺序并不是真正的执行顺序，CPU和编译器可以各种优化只要有空间提高性能。缓存和主存的读取会利用load, store和write-combining缓冲区来缓冲和重排。这些缓冲区是查找速度很快的关联队列，当一个后来发生的load需要读取上一个store的值，而该值还没有到达缓存，查找是必需的，上图描绘的是一个简化的现代多核CPU，从上图可以看出执行单元可以利用本地寄存器和缓冲区来管理和缓存子系统的交互。&lt;/p>
&lt;p>在多线程环境里需要使用技术来使得程序结果尽快可见。这篇文章里我不会涉及到 Cache Conherence 的概念。请先假定一个事实：一旦内存数据被推送到缓存，就会有消息协议来确保所有的缓存会对所有的共享数据同步并保持一致。这个使内存数据对CPU核可见的技术被称为内存屏障或内存栅栏。&lt;/p>
&lt;p>内存屏障提供了两个功能。首先，它们通过确保从另一个CPU来看屏障的两边的所有指令都是正确的程序顺序，而保持程序顺序的外部可见性；其次它们可以实现内存数据可见性，确保内存数据会同步到CPU缓存子系统。&lt;/p>
&lt;p>大多数的内存屏障都是复杂的话题。在不同的CPU架构上内存屏障的实现非常不一样。相对来说Intel CPU的强内存模型比DEC Alpha的弱复杂内存模型（缓存不仅分层了，还分区了）更简单。因为x86处理器是在多线程编程中最常见的，下面我尽量用x86的架构来阐述。&lt;/p>
&lt;h1 id="store-barrier">Store Barrier&lt;/h1>
&lt;p>Store屏障，是x86的&amp;rdquo;&lt;strong>sfence&lt;/strong>&amp;ldquo;指令，强制所有在store屏障指令之前的store指令，都在该store屏障指令执行之前被执行，并把store缓冲区的数据都刷到CPU缓存。这会使得程序状态对其它CPU可见，这样其它CPU可以根据需要介入。一个实际的好例子是Disruptor中的&lt;a href="http://code.google.com/p/disruptor/source/browse/trunk/code/src/main/com/lmax/disruptor/BatchEventProcessor.java">BatchEventProcessor&lt;/a>。当序列Sequence被一个消费者更新时，其它消费者(Consumers)和生产者（Producers）知道该消费者的进度，因此可以采取合适的动作。所以屏障之前发生的内存更新都可见了。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">private volatile long sequence = RingBuffer.INITIAL_CURSOR_VALUE;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// from inside the run() method
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">T event = null;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">long nextSequence = sequence.get() + 1L;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">while (running)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> final long availableSequence = barrier.waitFor(nextSequence);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while (nextSequence &amp;lt;= availableSequence)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> event = ringBuffer.get(nextSequence);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> boolean endOfBatch = nextSequence == availableSequence;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> eventHandler.onEvent(event, nextSequence, endOfBatch);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nextSequence++;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sequence.set(nextSequence - 1L); 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // store barrier inserted here !!!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> catch (final Exception ex)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exceptionHandler.handle(ex, nextSequence, event);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sequence.set(nextSequence);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // store barrier inserted here !!!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nextSequence++;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="load-barrier">Load Barrier&lt;/h1>
&lt;p>Load屏障，是x86上的&amp;rdquo;&lt;strong>ifence&lt;/strong>&amp;ldquo;指令，强制所有在load屏障指令之后的load指令，都在该load屏障指令执行之后被执行，并且一直等到load缓冲区被该CPU读完才能执行之后的load指令。这使得从其它CPU暴露出来的程序状态对该CPU可见，这之后CPU可以进行后续处理。一个好例子是上面的BatchEventProcessor的sequence对象是放在屏障后被生产者或消费者使用。&lt;/p></description></item><item><title>个人网站实时在线人数接口</title><link>https://hugozhu.site/post/2013/21-realtime-online-user-counter/</link><pubDate>Wed, 27 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/21-realtime-online-user-counter/</guid><description>&lt;p>感觉把个人网站正在访问的在线人数显示在Nokia 5110液晶屏挺好玩，就稍微研究了一下如何提取实时在线人数。&lt;/p>
&lt;h1 id="实现方法">实现方法&lt;/h1>
&lt;h2 id="google-analytics">Google Analytics&lt;/h2>
&lt;p>Google Analytics具有很强大的实时流量分析功能，不过网站主必须登陆到后台才能看，但并没有提供Open API，所以就不能用这个服务了。&lt;/p>
&lt;h2 id="日志分析">日志分析&lt;/h2>
&lt;p>不修改网站通过web服务器的日志分析，用一个脚本统计15分钟内日志的Unique IP可以粗略的获得一个在线人数。
但多个用户可能通过一个IP过来，这种做法肯定不精确。一般我们可以通过在页面上部署Javascript脚本，由Javascript为每一个浏览器产生一个独特的持久化Cookie，用这个Cookie代替IP来统计。但用Raspberry Pi来做这件事情会拖慢网站，于是一种方案是采用免费的Google App Engine来实现，打算有空来实现一个。&lt;/p>
&lt;h2 id="cnzz">CNZZ&lt;/h2>
&lt;p>CNZZ也提供了15分钟内的在线人数统计功能。分析CNZZ的计数器代码后发现如下方法可以提取到在线人数:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">curl -s &amp;#34;http://online.cnzz.com/online/online.php?id=[your_cnzz_id]&amp;amp;h=[your_cnzz_server_id].cnzz.com&amp;amp;on=1&amp;amp;s=line&amp;#34; | sed -e &amp;#39;s/.*当前在线\[\([0-9]\).*/\1/g&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>于是先通过上面的脚本提取在线人数并上传到&lt;a href="https://cosm.com/feeds/92372">Cosm&lt;/a>，Cosm有个触发器功能可以当在线人数超过某个值后发Twitter或HTTP Post到指定URL，并通过程序显示在液晶屏上。&lt;/p></description></item><item><title>升级版电子钟 - 如何使用Raspberry Pi驱动Nokia 5110液晶屏</title><link>https://hugozhu.site/post/2013/20-raspberry-pi-drive-nokia-5110/</link><pubDate>Sun, 24 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/20-raspberry-pi-drive-nokia-5110/</guid><description>&lt;p>Nokia 5110屏比前面介绍过的&lt;a href="http://hugozhu.myalert.info/2013/03/23/19-raspberry-pi-drive-1602-lcd.html">1602液晶屏&lt;/a>功能好很多，淘宝上买价格相差不大（二手5110 12块左右, 全新1602 8块左右），Nokia 5110最少只需要占用4个GPIO引脚：&lt;/p>
&lt;ol>
&lt;li>带蓝色背光&lt;/li>
&lt;li>使用Philips PCD8544 LCD控制器（通过SPI接口）&lt;/li>
&lt;li>84x48点阵，可显示100多个字符&lt;/li>
&lt;/ol>
&lt;h1 id="硬件准备">硬件准备&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.6.nGxekg&amp;amp;id=17337394004&amp;amp;is_b=1&amp;amp;cat_id=2&amp;amp;q=%CA%F7%DD%AE%C5%C9&amp;amp;rn=4004716f9ba818c1d69b5eb7818891b5">树莓派&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://item.taobao.com/item.htm?id=3125173573&amp;amp;ali_trackid=2:mm_12926928_3484851_11423954:1364118594_4k1_653822857&amp;amp;clk1=0b755dfca67112cd1b605914b40146e7&amp;amp;spm=a230z.1.5634029.2.foR1Yu">Nokia 5110 拆机屏&lt;/a> 或 &lt;a href="http://item.taobao.com/item.htm?spm=a230r.1.10.154.SdjftL&amp;amp;id=13361097288&amp;amp;_u=oqa31997">焊好的？&lt;/a> 注意不要买裸屏，需要带电路板的&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com/search_product.htm?q=%B6%C5%B0%EE%CF%DF&amp;amp;user_action=initiative&amp;amp;at_topsearch=1&amp;amp;sort=st&amp;amp;type=p&amp;amp;cat=&amp;amp;style=">杜邦线&lt;/a> 母对母8条&lt;/li>
&lt;li>8P排针 用来焊接5110屏幕PCB板&lt;/li>
&lt;li>&lt;a href="http://detail.tmall.com/item.htm?id=22096296909&amp;amp;ali_trackid=2:mm_12926928_3484851_11423954:1364118800_4k4_1229281314&amp;amp;clk1=c7335b2dcbad93f47eaf5cd4d1cc140b&amp;amp;spm=a230z.1.5634029.66.6xxdfN">电烙铁&lt;/a>&lt;/li>
&lt;/ol>
&lt;h1 id="电路">电路&lt;/h1>
&lt;p>5110电路板有8个引脚，使用排针（如下图）将其焊上，方便后面用杜邦线连接，如果不会焊也可以买焊接好的。&lt;/p>
&lt;img src="http://img01.taobaocdn.com/bao/uploaded/i1/13130028971464406/T1v5oAXd0XXXXXXXXX_!!0-item_pic.jpg_600x600.jpg"/>
&lt;ol>
&lt;li>RST —— 复位 接GPIO 0&lt;/li>
&lt;li>CE —— 片选 接GPIO 1 或 不接&lt;/li>
&lt;li>DC —— 数据/指令选择 接GPIO 2&lt;/li>
&lt;li>DIN —— 串行数据线 接GPIO 3&lt;/li>
&lt;li>CLK —— 串行时钟线 接GPIO 5 （因为我的GPIO 4已经接了一个DHT11传感器）&lt;/li>
&lt;li>VCC —— 电源输入 接3.3v&lt;/li>
&lt;li>BL —— 背光控制端 接3.3v&lt;/li>
&lt;li>GND —— 地线 接地&lt;/li>
&lt;/ol>
&lt;p>PS. 编号规范看&lt;a href="http://hugozhu.myalert.info/2013/03/22/19-raspberry-pi-gpio-port-naming.html">这里&lt;/a> VCC, BK, GND可以接在面包板电源上&lt;/p></description></item><item><title>如何使用Raspberry Pi在1602液晶屏上显示当前时间--电子钟</title><link>https://hugozhu.site/post/2013/19-raspberry-pi-drive-1602-lcd/</link><pubDate>Sat, 23 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/19-raspberry-pi-drive-1602-lcd/</guid><description>&lt;h1 id="硬件准备">硬件准备&lt;/h1>
&lt;p>需要以下硬件：&lt;/p>
&lt;ol>
&lt;li>&lt;a href="http://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.6.nGxekg&amp;amp;id=17337394004&amp;amp;is_b=1&amp;amp;cat_id=2&amp;amp;q=%CA%F7%DD%AE%C5%C9&amp;amp;rn=4004716f9ba818c1d69b5eb7818891b5">树莓派&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com//search_product.htm?q=%C3%E6%B0%FC%B0%E5&amp;amp;type=p&amp;amp;style=&amp;amp;cat=all">面包板&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://s.taobao.com/search?spm=a230r.1.8.2.RvXL2p&amp;amp;q=1602+%D2%BA%BE%A7&amp;amp;commend=all&amp;amp;source=haiwaigou&amp;amp;ssid=s5-e&amp;amp;pid=mm_14507416_2297358_8935934&amp;amp;newpre=null&amp;amp;tab=mall">1602液晶屏&lt;/a>一块&lt;/li>
&lt;li>&lt;a href="http://s.taobao.com/search?source=suggest&amp;amp;haiwaifrom=1&amp;amp;q=%B5%E7%CE%BB%C6%F7+10k&amp;amp;initiative_id=staobaoz_20130323&amp;amp;suggest_query=%B5%E7%CE%BB%C6%F7+10k&amp;amp;sb_id=10&amp;amp;suggest=0_2&amp;amp;wq=%B5%E7%CE%BB%C6%F7&amp;amp;tab=mall">10K电位器&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com/search_product.htm?q=%B6%C5%B0%EE%CF%DF&amp;amp;user_action=initiative&amp;amp;at_topsearch=1&amp;amp;sort=st&amp;amp;type=p&amp;amp;cat=&amp;amp;style=">杜邦线&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://s.taobao.com/search?source=haiwaigou&amp;amp;haiwaifrom=1&amp;amp;q=%C5%C5%D5%EB&amp;amp;initiative_id=staobaoz_20130323&amp;amp;tab=mall">排针&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com//search_product.htm?q=%C3%E6%B0%FC%B0%E5+%B5%E7%D4%B4&amp;amp;type=p&amp;amp;style=&amp;amp;cat=all">面包板电源&lt;/a>&lt;/li>
&lt;/ol>
&lt;h1 id="1602-lcd液晶屏">1602 LCD液晶屏&lt;/h1>
&lt;p>LCD1602液晶屏提供了16列x2行的ASCII字符显示能力，工作电压5V，提供4位数据与8位数据两种工作模式，因为Raspberry Pi的GPIO口数量很有限，所以使用4位数据模式。LCD1602液晶屏模块提供了16个引脚，我们只需接其中的12个即可&amp;ndash;请参考&lt;a href="http://hugozhu.myalert.info/2013/03/22/19-raspberry-pi-gpio-port-naming.html">GPIO命名规则&lt;/a>：&lt;/p>
&lt;ol>
&lt;li>VSS，接地，RPi PIN 6&lt;/li>
&lt;li>VDD，接5V电源，PRi PIN 2&lt;/li>
&lt;li>VO，液晶对比度调节，接电位器中间的引脚&lt;/li>
&lt;li>RS，寄存器选择，接GPIO 14，RPi PIN 8&lt;/li>
&lt;li>RW，读写选择，接地，表示写模式，PRi PIN 6&lt;/li>
&lt;li>EN，使能信号，接GPIO 15，RPi PIN 10&lt;/li>
&lt;li>D0，数据位0，4位工作模式下不用，不接&lt;/li>
&lt;li>D1，数据位1，4位工作模式下不用，不接&lt;/li>
&lt;li>D2，数据位2，4位工作模式下不用，不接&lt;/li>
&lt;li>D3，数据位3，4位工作模式下不用，不接&lt;/li>
&lt;li>D4，数据位4，接GPIO 17，RPi PIN 11&lt;/li>
&lt;li>D5，数据位5，接GPIO 18，RPi PIN 12&lt;/li>
&lt;li>D6，数据位6，接GPIO 27，RPi PIN 13&lt;/li>
&lt;li>D7，数据位7，接GPIO 22，RPi PIN 15&lt;/li>
&lt;li>A，液晶屏背光+，接5V，RPi PIN 2&lt;/li>
&lt;li>K，液晶屏背光-，接地，RPi PIN 6&lt;/li>
&lt;/ol>
&lt;h1 id="注意事项">注意事项&lt;/h1>
&lt;ol>
&lt;li>电源VDD最后接上&lt;/li>
&lt;li>排针焊接在液晶屏时注意不要虚焊，也可以用万用表测量一下&lt;/li>
&lt;li>RW脚注意一定要接地&lt;/li>
&lt;li>调节电位器可以调节液晶对比度&lt;/li>
&lt;/ol>
&lt;h1 id="电路图">电路图&lt;/h1>
&lt;img src="http://learn.adafruit.com/system/assets/assets/000/001/729/medium640/pi-char-lcd.gif?1345220594"/>
&lt;h1 id="代码">代码&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#!/usr/bin/python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># based on code from lrvick and LiquidCrystal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># lrvic - https://github.com/lrvick/raspi-hd44780/blob/master/hd44780.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># LiquidCrystal - https://github.com/arduino/Arduino/blob/master/libraries/LiquidCrystal/LiquidCrystal.cpp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">from time import sleep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">from datetime import datetime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">from time import sleep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">class Adafruit_CharLCD:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # commands
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_CLEARDISPLAY 		= 0x01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_RETURNHOME 		 = 0x02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_ENTRYMODESET 		= 0x04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_DISPLAYCONTROL 		= 0x08
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_CURSORSHIFT 		= 0x10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_FUNCTIONSET 		= 0x20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_SETCGRAMADDR 		= 0x40
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_SETDDRAMADDR 		= 0x80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flags for display entry mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_ENTRYRIGHT 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_ENTRYLEFT 		= 0x02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_ENTRYSHIFTINCREMENT 	= 0x01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_ENTRYSHIFTDECREMENT 	= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flags for display on/off control
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_DISPLAYON 		= 0x04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_DISPLAYOFF 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_CURSORON 		= 0x02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_CURSOROFF 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_BLINKON 		= 0x01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_BLINKOFF 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flags for display/cursor shift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_DISPLAYMOVE 		= 0x08
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_CURSORMOVE 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flags for display/cursor shift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_DISPLAYMOVE 		= 0x08
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_CURSORMOVE 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_MOVERIGHT 		= 0x04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_MOVELEFT 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # flags for function set
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_8BITMODE 		= 0x10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_4BITMODE 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_2LINE 			= 0x08
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_1LINE 			= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_5x10DOTS 		= 0x04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LCD_5x8DOTS 		= 0x00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def __init__(self, pin_rs=8, pin_e=10, pins_db=[11,12,13,15], GPIO = None):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	# Emulate the old behavior of using RPi.GPIO if we haven&amp;#39;t been given
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	# an explicit GPIO interface to use
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	if not GPIO:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	 import RPi.GPIO as GPIO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> GPIO.setwarnings(False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 	self.GPIO = GPIO
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.pin_rs = pin_rs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.pin_e = pin_e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.pins_db = pins_db
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.setmode(GPIO.BOARD)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.setup(self.pin_e, GPIO.OUT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.setup(self.pin_rs, GPIO.OUT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for pin in self.pins_db:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.setup(pin, GPIO.OUT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(0x33) # initialization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(0x32) # initialization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(0x28) # 2 line 5x7 matrix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(0x0C) # turn cursor off 0x0E to enable cursor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(0x06) # shift cursor right
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol = self.LCD_DISPLAYON | self.LCD_CURSOROFF | self.LCD_BLINKOFF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displayfunction = self.LCD_4BITMODE | self.LCD_1LINE | self.LCD_5x8DOTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displayfunction |= self.LCD_2LINE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Initialize to default text direction (for romance languages) &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaymode = self.LCD_ENTRYLEFT | self.LCD_ENTRYSHIFTDECREMENT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_ENTRYMODESET | self.displaymode) # set the entry mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.clear()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def begin(self, cols, lines):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	if (lines &amp;gt; 1):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		self.numlines = lines
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 		self.displayfunction |= self.LCD_2LINE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		self.currline = 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def home(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_RETURNHOME) # set cursor position to zero
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.delayMicroseconds(3000) # this command takes a long time!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def clear(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_CLEARDISPLAY) # command to clear display
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.delayMicroseconds(3000)	# 3000 microsecond sleep, clearing the display takes a long time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def setCursor(self, col, row):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.row_offsets = [ 0x00, 0x40, 0x14, 0x54 ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	if ( row &amp;gt; self.numlines ): 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		row = self.numlines - 1 # we count rows starting w/0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_SETDDRAMADDR | (col + self.row_offsets[row]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def noDisplay(self): 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Turn the display off (quickly) &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol &amp;amp;= ~self.LCD_DISPLAYON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def display(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Turn the display on (quickly) &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol |= self.LCD_DISPLAYON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def noCursor(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Turns the underline cursor on/off &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol &amp;amp;= ~self.LCD_CURSORON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def cursor(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Cursor On &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol |= self.LCD_CURSORON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def noBlink(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Turn on and off the blinking cursor &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol &amp;amp;= ~self.LCD_BLINKON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def noBlink(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; Turn on and off the blinking cursor &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaycontrol &amp;amp;= ~self.LCD_BLINKON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def DisplayLeft(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; These commands scroll the display without changing the RAM &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_CURSORSHIFT | self.LCD_DISPLAYMOVE | self.LCD_MOVELEFT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def scrollDisplayRight(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; These commands scroll the display without changing the RAM &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_CURSORSHIFT | self.LCD_DISPLAYMOVE | self.LCD_MOVERIGHT);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def leftToRight(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; This is for text that flows Left to Right &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaymode |= self.LCD_ENTRYLEFT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_ENTRYMODESET | self.displaymode);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def rightToLeft(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; This is for text that flows Right to Left &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaymode &amp;amp;= ~self.LCD_ENTRYLEFT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_ENTRYMODESET | self.displaymode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def autoscroll(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; This will &amp;#39;right justify&amp;#39; text from the cursor &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaymode |= self.LCD_ENTRYSHIFTINCREMENT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_ENTRYMODESET | self.displaymode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def noAutoscroll(self): 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&amp;#34;&amp;#34;&amp;#34; This will &amp;#39;left justify&amp;#39; text from the cursor &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.displaymode &amp;amp;= ~self.LCD_ENTRYSHIFTINCREMENT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.write4bits(self.LCD_ENTRYMODESET | self.displaymode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def write4bits(self, bits, char_mode=False):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;#34;&amp;#34; Send command to LCD &amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.delayMicroseconds(1000) # 1000 microsecond sleep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bits=bin(bits)[2:].zfill(8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.output(self.pin_rs, char_mode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for pin in self.pins_db:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.output(pin, False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for i in range(4):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if bits[i] == &amp;#34;1&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.output(self.pins_db[::-1][i], True)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.pulseEnable()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for pin in self.pins_db:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.output(pin, False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for i in range(4,8):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if bits[i] == &amp;#34;1&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.GPIO.output(self.pins_db[::-1][i-4], True)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.pulseEnable()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def delayMicroseconds(self, microseconds):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	seconds = microseconds / float(1000000)	# divide microseconds by 1 million for seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	sleep(seconds)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def pulseEnable(self):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.GPIO.output(self.pin_e, False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.delayMicroseconds(1)		# 1 microsecond pause - enable pulse must be &amp;gt; 450ns 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.GPIO.output(self.pin_e, True)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.delayMicroseconds(1)		# 1 microsecond pause - enable pulse must be &amp;gt; 450ns 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.GPIO.output(self.pin_e, False)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	self.delayMicroseconds(1)		# commands need &amp;gt; 37us to settle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def message(self, text):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;#34;&amp;#34; Send string to LCD. Newline wraps to second line&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for char in text:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if char == &amp;#39;\n&amp;#39;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.write4bits(0xC0) # next line
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> else:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.write4bits(ord(char),True)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">if __name__ == &amp;#39;__main__&amp;#39;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lcd = Adafruit_CharLCD()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lcd.noBlink()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while True:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lcd.clear() 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lcd.message(datetime.now().strftime(&amp;#39; %I : %M : %S \n%a %b %d %Y&amp;#39;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="完成后的效果">完成后的效果&lt;/h1>
&lt;img src="http://ww3.sinaimg.cn/mw690/6bc40342jw1e2xngyc634j.jpg"/>
&lt;h1 id="参考链接">参考链接&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="http://learn.adafruit.com/drive-a-16x2-lcd-directly-with-a-raspberry-pi/wiring">http://learn.adafruit.com/drive-a-16x2-lcd-directly-with-a-raspberry-pi/wiring&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.freemindworld.com/blog/tag/">http://www.freemindworld.com/blog/tag/&lt;/a>树莓派&lt;/li>
&lt;/ol></description></item><item><title>Raspberry Pi GPIO的编号规范</title><link>https://hugozhu.site/post/2013/19-raspberry-pi-gpio-port-naming/</link><pubDate>Fri, 22 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/19-raspberry-pi-gpio-port-naming/</guid><description>&lt;p>树莓派和普通电脑不一样的地方在于它还带了17个可编程的&lt;a href="http://en.wikipedia.org/wiki/General_Purpose_Input/Output">GPIO&lt;/a>（General Purpose Input/Output），可以用来驱动各种外设（如传感器，步进电机等）。但GPIO的编号方法有些混乱，不同的API（如wiringPi，RPi.GPIO等）对GPIO的端口号编号并不一样，下面则用图表标明了对应的叫法，这样在看程序例子的时候可以确定物理是哪个接口。&lt;/p>
&lt;h1 id="gpio库">GPIO库&lt;/h1>
&lt;ol>
&lt;li>&lt;a href="https://github.com/WiringPi/WiringPi">wiringPi&lt;/a> C，有Perl, PHP, Ruby, Node.JS和**&lt;a href="http://github.com/hugozhu/rpi">Golang&lt;/a>**的扩展，支持wiringPi Pin和BCM GPIO两种编号&lt;/li>
&lt;li>&lt;a href="https://pypi.python.org/pypi/RPi.GPIO">RPi.GPIO&lt;/a> Python，支持Board Pin和BCM GPIO两种编号&lt;/li>
&lt;li>&lt;a href="http://code.google.com/p/webiopi/">Webiopi&lt;/a>，Python, 使用BCM GPIO编号&lt;/li>
&lt;li>&lt;a href="http://github.com/hugozhu/rpi">WiringPi-Go&lt;/a>, Go语言，支持以上三种编号&lt;/li>
&lt;/ol>
&lt;h1 id="编号规范">编号规范&lt;/h1>
&lt;ol>
&lt;li>第一列是wiringPi API中的缺省编号，&lt;code>wiringPiSetup()&lt;/code>采用这列编号&lt;/li>
&lt;li>第二列（Name）往往是转接板的编号&lt;/li>
&lt;li>第三列是树莓派板子上的自然编号（左边引脚为1-15，右边引脚为2-26），&lt;code>RPi.GPIO.setmode(GPIO.BOARD)&lt;/code>采用这列编号&lt;/li>
&lt;li>树莓派主芯片提供商Broadcom的编号方法，相当于调用了&lt;code>WiringPiSetupGpio()&lt;/code>或&lt;code>RPi.GPIO.setmode(GPIO.BCM)&lt;/code>采用这列编号&lt;/li>
&lt;/ol>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>wiringPi Pin&lt;/th>
 &lt;th>Name&lt;/th>
 &lt;th>Board Pin&lt;/th>
 &lt;th>BCM GPIO&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>0&lt;/td>
 &lt;td>GPIO 0&lt;/td>
 &lt;td>11&lt;/td>
 &lt;td>17&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>GPIO 1&lt;/td>
 &lt;td>12&lt;/td>
 &lt;td>18&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>2&lt;/td>
 &lt;td>GPIO 2&lt;/td>
 &lt;td>13&lt;/td>
 &lt;td>21&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>3&lt;/td>
 &lt;td>GPIO 3&lt;/td>
 &lt;td>15&lt;/td>
 &lt;td>22&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>4&lt;/td>
 &lt;td>GPIO 4&lt;/td>
 &lt;td>16&lt;/td>
 &lt;td>23&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5&lt;/td>
 &lt;td>GPIO 5&lt;/td>
 &lt;td>18&lt;/td>
 &lt;td>24&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>6&lt;/td>
 &lt;td>GPIO 6&lt;/td>
 &lt;td>22&lt;/td>
 &lt;td>25&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>7&lt;/td>
 &lt;td>GPIO 7&lt;/td>
 &lt;td>7&lt;/td>
 &lt;td>4&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>8&lt;/td>
 &lt;td>SDA&lt;/td>
 &lt;td>3&lt;/td>
 &lt;td>0&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>9&lt;/td>
 &lt;td>SCL&lt;/td>
 &lt;td>5&lt;/td>
 &lt;td>1&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>10&lt;/td>
 &lt;td>CE0&lt;/td>
 &lt;td>24&lt;/td>
 &lt;td>8&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>11&lt;/td>
 &lt;td>CE1&lt;/td>
 &lt;td>26&lt;/td>
 &lt;td>7&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>12&lt;/td>
 &lt;td>MOSI&lt;/td>
 &lt;td>19&lt;/td>
 &lt;td>10&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>13&lt;/td>
 &lt;td>MISO&lt;/td>
 &lt;td>21&lt;/td>
 &lt;td>9&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>14&lt;/td>
 &lt;td>SCLK&lt;/td>
 &lt;td>23&lt;/td>
 &lt;td>11&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>15&lt;/td>
 &lt;td>TXD&lt;/td>
 &lt;td>8&lt;/td>
 &lt;td>14&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>16&lt;/td>
 &lt;td>RXD&lt;/td>
 &lt;td>10&lt;/td>
 &lt;td>15&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>Rev.2 新增的引脚：&lt;/p></description></item><item><title>如何使用Raspberry Pi测量室内温度和湿度并绘制曲线</title><link>https://hugozhu.site/post/2013/03-17-interfacing-temperature-and-humidity-sensor-with-raspberry-pi/</link><pubDate>Sun, 17 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/03-17-interfacing-temperature-and-humidity-sensor-with-raspberry-pi/</guid><description>&lt;h1 id="硬件准备">硬件准备&lt;/h1>
&lt;p>需要以下硬件：&lt;/p>
&lt;ol>
&lt;li>可以工作的&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxxrJ35Nnc0iO6niAHo44Chb01aWIu4ho12MwdcCLV6ff8kJMg0iz0FTGXaJAqMvt94sTe0NIrCAdd8LW">树莓派&lt;/a>一个&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com/search_product.htm?q=%C3%E6%B0%FC%B0%E5&amp;amp;type=p&amp;amp;style=&amp;amp;cat=all&amp;amp;ali_trackid=2:mm_12926928_3484851_11423971:1364041941_4k1_1171281511&amp;amp;upsid=8daf4a561f161cd669d949c6bf367733&amp;amp;clk1=8daf4a561f161cd669d949c6bf367733">面包板&lt;/a>和&lt;a href="http://list.tmall.com//search_product.htm?q=%B6%C5%B0%EE%CF%DF&amp;amp;type=p&amp;amp;style=&amp;amp;cat=all">公对母杜邦线&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com/search_product.htm?q=10K+%B5%E7%CE%BB%C6%F7&amp;amp;user_action=initiative&amp;amp;at_topsearch=1&amp;amp;sort=st&amp;amp;type=p&amp;amp;cat=&amp;amp;style=">10K 电位器&lt;/a>一个&lt;/li>
&lt;li>&lt;a href="http://list.tmall.com//search_product.htm?q=DHT11&amp;amp;type=p&amp;amp;style=&amp;amp;cat=all">DHT11&lt;/a>温度和湿度传感器一个或&lt;a href="http://s.taobao.com/search?q=DHT22&amp;amp;keyword=&amp;amp;commend=all&amp;amp;ssid=s5-e&amp;amp;search_type=item&amp;amp;atype=&amp;amp;tracelog=&amp;amp;sourceId=tb.index&amp;amp;rt=1364041904459&amp;amp;source=haiwaigou&amp;amp;pid=mm_14507416_2297358_8935934&amp;amp;unid=">DHT22&lt;/a>&lt;/li>
&lt;/ol>
&lt;h1 id="传感器电路及原理">传感器电路及原理&lt;/h1>
&lt;h2 id="dht11传感器外观">DHT11传感器外观&lt;/h2>
&lt;img src="http://learn.adafruit.com/system/products/images/000/000/386/medium225/dht11_MED.jpg?1342023044"/>
&lt;h2 id="参数">参数&lt;/h2>
&lt;ol>
&lt;li>湿度测量范围：20％～90%RH(0－50℃温度补偿）；&lt;/li>
&lt;li>温度测量范围：0～+50℃；&lt;/li>
&lt;li>湿度测量精度：±5.0%RH&lt;/li>
&lt;li>温度测量精度：±2.0℃&lt;/li>
&lt;li>响应时间：&amp;lt;5s；&lt;/li>
&lt;/ol>
&lt;h2 id="电路图">电路图&lt;/h2>
&lt;p>DHT11一共4根引脚，左边第一根接电源5V (Pin 1)，第二根为数据接口，接 Pin 7，第三根不接，第四根接地；在Pin 1和Pin7 之间还需要并联10K的电阻，以保持读数稳定。&lt;/p>
&lt;img src="http://learn.adafruit.com/system/assets/assets/000/001/860/original/dht11wiring.gif?1345831788"/>
&lt;h2 id="安装好的样子">安装好的样子：&lt;/h2>
&lt;img src="http://ww3.sinaimg.cn/bmiddle/6bc40342jw1e2rx17tlckj.jpg"/>
&lt;h1 id="读取温度和湿度的代码">读取温度和湿度的代码&lt;/h1>
&lt;p>数据读取流图：&lt;/p>
&lt;img src="http://1.bp.blogspot.com/-_sMwYSZMGLw/UJpY2RYIA9I/AAAAAAAAAS0/rJ9ZQwZ3IfM/s640/DHT11+timing+diagram.jpg"/>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;wiringPi.h&amp;gt; &lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt; &lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdlib.h&amp;gt; &lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdint.h&amp;gt; &lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define MAX_TIME 85 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define DHT11PIN 7 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">};&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">errors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">dht11_read_val&lt;/span>&lt;span class="p">()&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">uint8_t&lt;/span> &lt;span class="n">lststate&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">HIGH&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">uint8_t&lt;/span> &lt;span class="n">counter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">uint8_t&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">float&lt;/span> &lt;span class="n">farenheit&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">pinMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DHT11PIN&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">OUTPUT&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">digitalWrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DHT11PIN&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">LOW&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">18&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">digitalWrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DHT11PIN&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">HIGH&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">delayMicroseconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">pinMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DHT11PIN&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">INPUT&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">MAX_TIME&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">counter&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">digitalRead&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DHT11PIN&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="n">lststate&lt;/span>&lt;span class="p">){&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">counter&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">delayMicroseconds&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">counter&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mi">255&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lststate&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nf">digitalRead&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DHT11PIN&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">counter&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mi">255&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// top 3 transistions are ignored 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;amp;&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)){&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">counter&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">|=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// verify cheksum and print the verified data 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;amp;&amp;amp;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mh">0xFF&lt;/span>&lt;span class="p">)))&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//farenheit=dht11_val[2]*9./5.+32; 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d.%d&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s">%d.%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="n">dht11_val&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">errors&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">errors&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">errors&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;0.0&lt;/span>&lt;span class="se">\t&lt;/span>&lt;span class="s">0.0&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">wiringPiSetup&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">==-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">dht11_read_val&lt;/span>&lt;span class="p">();&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">);&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>执行&lt;code>gcc sensor.c -o sensor -lwiringPi&lt;/code> ，运行&lt;code>sensor&lt;/code>后输出：&lt;/p></description></item><item><title>如何使用Raspberry Pi控制步进电机旋转高清摄像头并拍照</title><link>https://hugozhu.site/post/2013/03-16-use-raspberry-pi-control-step-motor-rotate-webcam/</link><pubDate>Sat, 16 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/03-16-use-raspberry-pi-control-step-motor-rotate-webcam/</guid><description>&lt;h1 id="硬件准备">硬件准备&lt;/h1>
&lt;p>需要以下硬件：&lt;/p>
&lt;ol>
&lt;li>可以工作的&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxxrJ35Nnc0iO6niAHo44Chb01aWIu4ho12MwdcCLV6ff8kJMg0iz0FTGXaJAqMvt94sTe0NIrCAdd8LW">树莓派&lt;/a>一个&lt;/li>
&lt;li>&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxxrJ35Nnc0iO6niAHoWKV0kwS8Wy16Cg6qBM%2BZAOnJCqNG%2BPJAy9U15g8TwJiq5U3GGcJ8eTvC7%2F6APShw%3D%3D">母对母1P杜邦线&lt;/a>6根&lt;/li>
&lt;li>&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CFcRfH0GoT805sipKjxjSLt%2BsmFEpvY8zQ4WXjoTHsLWTKD4gnL0sndE3qVPXd4UC6NUEZOQAryYUWhO7gt10i%2FUQ%3D%3D">DC 5V4相28YBJ-48步进电机&lt;/a>一个&lt;/li>
&lt;li>&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CFcRfH0GoT805sipKjxjSLuXQmw2TUIlWTNRCvS2wo483pjZyXspPuvkTH5pg4vQUqrztOAoNz2Gfp8MmwKPg%2FbQb8%3D">UL2003芯片步进电机驱动板&lt;/a>一块&lt;/li>
&lt;/ol>
&lt;h1 id="安装">安装&lt;/h1>
&lt;p>按下图将步进电机接到驱动板上，也就是白色的接口&lt;/p>
&lt;img src="http://img04.taobaocdn.com/bao/uploaded/i4/T10lS4XnXfXXaZhKrX_115008.jpg_310x310.jpg"/>
&lt;img src="http://img02.taobaocdn.com/imgextra/i2/49873130/T2534HXoBXXXXXXXXX_!!49873130.jpg" width="600"/>
&lt;h2 id="步进电机电源">步进电机电源&lt;/h2>
&lt;p>步进电机需要5V电压驱动，而树莓派的&lt;a href="http://elinux.org/RPi_Low-level_peripherals">GPIO接口&lt;/a>中已有5V输出，将图中的Pin 2（最右上角那个）5V，接到驱动板的5V正极，Pin 6接到5V负级，电源部分则搞定。&lt;/p>
&lt;img src="http://trouch.com/wp-content/uploads/2012/08/webiopi-chrome.png" width="600"/>
&lt;h2 id="步进电机驱动线路">步进电机驱动线路&lt;/h2>
&lt;p>驱动板上有IN1, IN2, IN3, IN4四个接口，根据资料得知这四个接口依次设置为低电平就可以驱动，我们分别用杜邦线将GPIO 17（Pin 11），GPIO 18（Pin 12）, GPIO 21（Pin 13）, GPIO 22（Pin 15）和IN1，IN2，IN3，IN4一一相连。 &lt;strong>注意不同的GPIO驱动程序对端口的编号不一定一样（至少有三种叫法：Board，Broadcom，GPIO）&lt;/strong>&lt;/p>
&lt;p>驱动原理：（每次将四个GPIO端口按下表依次设置好电平后，可以sleep几十毫秒来控制转速）&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>&lt;strong>序列&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>GPIO 17&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>GPIO 18&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>GPIO 21&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>GPIO 22&lt;/strong>&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>0&lt;/td>
 &lt;td>&lt;strong>LOW&lt;/strong>&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>&lt;strong>LOW&lt;/strong>&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>2&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>&lt;strong>LOW&lt;/strong>&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>3&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>&lt;strong>LOW&lt;/strong>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>4&lt;/td>
 &lt;td>&lt;strong>LOW&lt;/strong>&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;td>HIGH&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>…&lt;/td>
 &lt;td>&lt;/td>
 &lt;td>&lt;/td>
 &lt;td>&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="安装摄像头">安装摄像头&lt;/h2>
&lt;p>本来是希望用3D打印机来制作齿轮和支架来完成这部分工作的，但因为打印机还没到货，所以先用乐高积木来做了, 刚好乐高积木可以插在步进电机中轴上，而且很牢靠，还不用密封带了。&lt;/p></description></item><item><title>如何在Raspberry Pi上用LED闪烁提示网站首页新访客</title><link>https://hugozhu.site/post/2013/vistor-on-homepage-led-indicator/</link><pubDate>Wed, 13 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/vistor-on-homepage-led-indicator/</guid><description>&lt;p>本方法只适合小网站，主要是好玩。Raspberry Pi不是很合适需要实时控制的系统（比如，飞行器，遥控小车），因为Linux内核要多任务，应用程序的优先级不能保持最高，会带来延时，但做些实时性要求不高的系统还是可以的。&lt;/p>
&lt;h1 id="硬件安装">硬件安装&lt;/h1>
&lt;p>需要以下硬件：&lt;/p>
&lt;ol>
&lt;li>可以工作的&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxxrJ35Nnc0iO6niAHo44Chb01aWIu4ho12MwdcCLV6ff8kJMg0iz0FTGXaJAqMvt94sTe0NIrCAdd8LW">树莓派&lt;/a>一个&lt;/li>
&lt;li>&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxxrJ35Nnc0iO6niAHoWKV0kwS8Wy16Cg6qBM%2BZAOnJCqNG%2BPJAy9U15g8TwJiq5U3GGcJ8eTvC7%2F6APShw%3D%3D">1P杜邦线2条&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CFcRfH0GoT805sipKjxiNm9RKSkRargJCPYP6KVEIQUWKzMUFn1hvlcbkMSKk3m2pVJo%2BqQDYKVz%2Bt1%2FjL7Iywe7g%3D%3D">面包板&lt;/a>一个&lt;/li>
&lt;li>&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CITy7klxxrJ35Nnc0iO6niAHKxVk7v382jKYSyD7qi5ltcqvLWmWBL7lxLB2%2BsaWLuet8Ik65QHyGWV5mRTheUA">面包板跳线&lt;/a> 或 &lt;a href="http://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.166.XlEzyw&amp;amp;id=15208013820&amp;amp;_u=nqa35596&amp;amp;is_b=1&amp;amp;cat_id=2&amp;amp;q=%C5%C5%D5%EB&amp;amp;rn=bb53adf333ca7517208da34346ac3ffb">单排针&lt;/a> 两根&lt;/li>
&lt;li>&lt;a href="http://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.30.wnPTNf&amp;amp;id=14576731464&amp;amp;_u=nqa35af3&amp;amp;is_b=1&amp;amp;cat_id=2&amp;amp;q=%B7%A2%B9%E2%B6%FE%BC%AB%B9%DC&amp;amp;rn=b12ffd48699547ed9cb982a88014a0aa">发光二极管&lt;/a>一个&lt;/li>
&lt;li>300欧姆的&lt;a href="http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB07S4%2FK0CFcRfH0GoT805sipKjxiNm80QgaIDkojjQIBhc4L8WmRpaGVVBVD9DpAt8wKPZTmbzvVp4EIdCD2Ow2DOQmdPtlV8g%3D">电阻&lt;/a>一个&lt;/li>
&lt;/ol>
&lt;h2 id="gpio接口">GPIO接口&lt;/h2>
&lt;img src="http://ww1.sinaimg.cn/large/6bc40342gw1e2o2uls7wlj.jpg" width="630"/>
&lt;p>用杜邦线将上图的3.3V输出和GPIO 23引出（板子正面朝上，GPIO引脚在左上角），将电阻和LED串联起来（电阻防止LED电流过大烧掉），注意二极管的两根脚不一样长，长脚的接正级，这样GPIO 23如果输出高电平，二极管就不发光了，输出低电平就亮啦！&lt;/p>
&lt;p>都接好了后的样子如下：&lt;/p>
&lt;img src="http://ww3.sinaimg.cn/bmiddle/6bc40342jw1e2ni9esb2uj.jpg"/>
&lt;h1 id="gpio接口编程">GPIO接口编程&lt;/h1>
&lt;h2 id="wiringpi">WiringPi&lt;/h2>
&lt;p>An implementation of most of the Arduino Wiring functions for the Raspberry Pi。
代码地址在： &lt;a href="https://github.com/wiringPi">https://github.com/wiringPi&lt;/a>&lt;/p>
&lt;p>安装：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/WiringPi/WiringPi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd WiringPi/wiringPi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo make install	
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>让二极管闪一下的示例代码：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;wiringPi.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdlib.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">argc&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">char&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">argv&lt;/span>&lt;span class="p">[])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="kt">int&lt;/span> &lt;span class="n">pinNumber&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nf">wiringPiSetup&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="nf">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;failed to setup wiringPi&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">		&lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="p">}&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nf">pinMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pinNumber&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">OUTPUT&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nf">digitalWrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pinNumber&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nf">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nf">digitalWrite&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pinNumber&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="nf">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">	&lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>	
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>WiringPi也有Python, Perl, PHP, Ruby的接口包装，按&lt;a href="https://github.com/wiringPi">这里&lt;/a>，怎么没有Go的呢。。。&lt;/p>
&lt;h2 id="rpigpio">RPi.GPIO&lt;/h2>
&lt;p>这是GPIO的Python库，地址在：&lt;a href="https://pypi.python.org/pypi/RPi.GPIO">https://pypi.python.org/pypi/RPi.GPIO&lt;/a>
这里建议用python2，原因是web.py还不支持python 3 &amp;hellip;&lt;/p></description></item><item><title>在Raspberry Pi上安装ArchLinux</title><link>https://hugozhu.site/post/2013/setup-archliunx-on-raspberry-pi/</link><pubDate>Sat, 09 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/setup-archliunx-on-raspberry-pi/</guid><description>&lt;h1 id="介绍">介绍&lt;/h1>
&lt;p>之前买的Raspberry Pi因为要跑&lt;a href="http://hugozhu.myalert.info">这个网站&lt;/a>，不能经常拔下来玩别的，所以又买了一个，这次安装的是&lt;a href="https://www.archlinux.org">Arch Linux&lt;/a>。这个发行版安装好后非常基础，占用的空间也只有600M不到，比较合适已有Linux基础的同学玩。初学者可以玩官方推荐的&lt;a href="http://www.raspbian.org">Raspbian&lt;/a>。&lt;/p>
&lt;p>Arch Linux特点：&lt;/p>
&lt;ol>
&lt;li>启动快，上电后只要3s完成启动&lt;/li>
&lt;li>安装完没有图形界面，干净&lt;/li>
&lt;li>面向开发者的系统&lt;/li>
&lt;li>包管理系统pacman很好用，一个命令就可以完成各种操作&lt;/li>
&lt;li>ArchLinux缺省账号和密码是root/root，弄好了后要记得修改root密码&lt;/li>
&lt;li>从中国用下载包很快，比Raspbian的源快多了&lt;/li>
&lt;/ol>
&lt;h1 id="增加sudo用户">增加sudo用户&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> useradd hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> passwd hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir /home/hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chown hugo:hugo /home/hugo 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pacman -S sudo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> visudo 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>执行&lt;code>visudo&lt;/code>把新用户设置成管理员（增加sudo权限），最后面增加下面一行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> hugo ALL=(ALL) NOPASSWD: ALL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="usb盘">USB盘&lt;/h1>
&lt;p>插上USB盘后，ArchLinux并不会自动mount，手动mount的过程如下:
插上USB前后执行两次 &lt;code>lsblk -o name,kname,uuid&lt;/code>，那么输出上多出的那行就是该USB的设备名，或UUID，找到该行后就可以执行mount命令了（注意sda这个符号不同机器可能不一样）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> [root@raspberrypi2 ~]# lsblk -o name,kname,uuid 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NAME KNAME UUID
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sda sda 001B-9622
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mmcblk0 mmcblk0 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├─mmcblk0p1 mmcblk0p1 44C8-CEF1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─mmcblk0p2 mmcblk0p2 fcee8534-f5f0-42ee-83ac-f943f878ee67
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir /mnt/usb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mount /dev/sda /mnt/usb 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 或 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mount -U 001B-9622 /mnt/usb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>格式化整个USB盘可以用&lt;code>mkfs.ext4 /dev/sda&lt;/code>
然后在/etc/fstab里增加一行，以后重启就会自动mount了：&lt;/p></description></item><item><title>如何封杀尝试Raspberry Pi SSH密码的来源IP</title><link>https://hugozhu.site/post/2013/block_failed_ssh_attempts_with_iptable/</link><pubDate>Fri, 08 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/block_failed_ssh_attempts_with_iptable/</guid><description>&lt;p>Raspberry Pi整天开着，如果用缺省SSH端口对外开放，就会经常遇到扫描SSH密码的肉鸡。虽然密码不是很简单，但还是感觉很不安全的。&lt;/p>
&lt;p>系统的ssh登录日志文件在：/var/log/auth.log，登录失败时会记录以下格式的日志：&lt;/p>
&lt;pre>&lt;code>Mar 7 10:31:51 raspberrypi sshd[24510]: Failed password for root from 221.8.19.129 port 4066 ssh2
Mar 7 10:31:55 raspberrypi sshd[24514]: Failed password for root from 221.8.19.129 port 4079 ssh2
Mar 7 10:31:56 raspberrypi sshd[24518]: Failed password for sshd from 221.8.19.129 port 4080 ssh2
Mar 7 10:32:26 raspberrypi sshd[24522]: Failed password for sshd from 221.8.19.129 port 4149 ssh2
&lt;/code>&lt;/pre>
&lt;p>用最简单的Shell脚本来解决这个问题：&lt;/p>
&lt;h3 id="guardsh">guard.sh&lt;/h3>
&lt;pre>&lt;code>#!/bin/bash

last_ip=&amp;quot;&amp;quot;
tail -f /var/log/auth | while read LINE; do
{
 if [[ &amp;quot;${LINE}&amp;quot; =~ &amp;quot;Failed&amp;quot; ]]; then 
 ip=&amp;quot;$(echo ${LINE} | awk '{print $(NF-3)}')&amp;quot;
 if [[ &amp;quot;$last_ip&amp;quot; == &amp;quot;$ip&amp;quot; ]]; then
 echo &amp;quot;block $ip&amp;quot;
 #curl -s --data-ascii &amp;quot;uuid=&amp;lt;my iphone's uuid&amp;gt;&amp;quot; --data &amp;quot;body=${LINE}&amp;quot; http://raspberrypi/pushme 
 iptables -A INPUT -s &amp;quot;$ip&amp;quot; -j DROP
 fi
 last_ip=$ip
 echo $LINE
 fi
}
done
&lt;/code>&lt;/pre>
&lt;p>用root用户执行以下命令，也可以放到启动脚本里：/etc/rc.local&lt;/p></description></item><item><title>Raspberry Pi做BT下载机+高清播放器</title><link>https://hugozhu.site/post/2013/raspberry-pi-with-xmbc/</link><pubDate>Wed, 06 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/raspberry-pi-with-xmbc/</guid><description>&lt;h2 id="介绍">介绍&lt;/h2>
&lt;p>首先高清播放器功能只是Raspberry Pi的一个小功能，如果你只需要高清播放功能又不想折腾，那还是买个&lt;a href="http://s.taobao.com/search?q=%B8%DF%C7%E5%B2%A5%B7%C5%C6%F7&amp;amp;commend=all&amp;amp;ssid=s5-e&amp;amp;search_type=item&amp;amp;sourceId=tb.index&amp;amp;initiative_id=tbindexz_20130306">山寨的&lt;/a>的更简单。。。&lt;/p>
&lt;p>Raspberry Pi的图形处理器规格：Broadcom VideoCore IV, OpenGL ES 2.0, 1080p 30 h.264/MPEG-4 AVC 高清解码器，内存和CPU共享（可设置成256M），性能还是很强劲的。HDMI支持640x350和1920×1200（1080P）的分辨率。安装了&lt;a href="http://xbmc.org">XBMC&lt;/a>，基本上可以实现包括Airplay在内的Apple TV上的大部分功能，但价格只有其一半不到，可以播放下载的视频或观看在线视频，如&lt;a href="http://yisou.com">一搜&lt;/a>，优酷，搜狐视频，奇艺等。&lt;/p>
&lt;h2 id="外设">外设&lt;/h2>
&lt;p>除了Pi单片机外，你还需要以下外设附件：&lt;/p>
&lt;ol>
&lt;li>5V-1A左右的电源，可以用iPhone或iPad的充电电源，或手机的充电器，电流最少要800毫安&lt;/li>
&lt;li>micro USB线一根，和Kindle以及大多数android手机充电USB线一样&lt;/li>
&lt;li>HDMI线一根，接电视机&lt;/li>
&lt;li>SD卡一张，最少2G&lt;/li>
&lt;/ol>
&lt;h2 id="raspbmc">Raspbmc&lt;/h2>
&lt;p>&lt;a href="http://www.raspbmc.com/">Raspbmc&lt;/a> 是专为在Raspberry Pi上运行&lt;a href="http://xbmc.org">XBMC&lt;/a>的定制Linux。最小化的安装，减少了不必要的软件和资源占用，简化了安装和配置，没有Linux知识也可以上手。这个版本的维护者是一个19岁的小朋友Sam Nazarko。有时间折腾的同学可以自己编译XMBC安装。&lt;/p>
&lt;h3 id="特点">特点：&lt;/h3>
&lt;ol>
&lt;li>免费，开源&lt;/li>
&lt;li>支持多语言&lt;/li>
&lt;li>支持1080P回放&lt;/li>
&lt;li>支持直接播放NFS，SMB，FTP,HTTP或USB硬盘的有视频文件，支持大多数格式&lt;/li>
&lt;li>支持AirPlay或AirTune功能，可以把iPhone/iPad上的视频或音乐通过Pi投放到电视上，这点和Apple TV功能一样&lt;/li>
&lt;li>支持GPIO&lt;/li>
&lt;li>基于Debian，可以从Debian的软件源安装其它软件&lt;/li>
&lt;li>支持1080P DTS软解，这个不少播放器是不支持的，需要额外License&lt;/li>
&lt;li>内置了以下服务:
&lt;ol>
&lt;li>Samba&lt;/li>
&lt;li>TVHeadend Server&lt;/li>
&lt;li>FTP Server&lt;/li>
&lt;li>SSH Server&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h3 id="安装">安装&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>Windows下载&lt;a href="http://download.raspbmc.com/downloads/bin/installers/raspbmc-win32.zip">安装程序&lt;/a>，运行即可。&lt;/p>
&lt;p>&lt;img src="http://www.raspbmc.com/wp-content/uploads/2012/06/ins-300x165.jpg" alt="image">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Linux/Mac:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">curl -O http://svn.stmlabs.com/svn/raspbmc/testing/installers/python/install.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x install.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo python install.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="http://www.raspbmc.com/wp-content/uploads/2012/06/installPython.png" alt="image">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>或直接下载&lt;a href="http://download.raspbmc.com/downloads/bin/ramdistribution/installer.img.gz">安装包&lt;/a>安装&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="下载">下载&lt;/h3>
&lt;p>你可以在Pi上外接一个USB移动硬盘，但要注意硬盘要有自己电源，也可以mount网络上的硬盘分区。然后运行transmission软件下载视频。&lt;/p>
&lt;h4 id="transmission">Transmission&lt;/h4>
&lt;ol>
&lt;li>
&lt;p>安装&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo apt-get install transmission-daemon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /etc/init.d/transmission-daemon stop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/transmission-daemon/settings.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>配置&lt;/p></description></item><item><title>Java并发包中的同步队列SynchronousQueue实现原理</title><link>https://hugozhu.site/post/2013/java-synchronousqueue-notes/</link><pubDate>Tue, 05 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/java-synchronousqueue-notes/</guid><description>&lt;h2 id="介绍">介绍&lt;/h2>
&lt;p>Java 6的并发编程包中的&lt;a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html">SynchronousQueue&lt;/a>是一个没有数据缓冲的&lt;a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html">BlockingQueue&lt;/a>，生产者线程对其的插入操作put必须等待消费者的移除操作take，反过来也一样。&lt;/p>
&lt;p>不像ArrayBlockingQueue或LinkedListBlockingQueue，SynchronousQueue内部并没有数据缓存空间，你不能调用peek()方法来看队列中是否有数据元素，因为数据元素只有当你试着取走的时候才可能存在，不取走而只想偷窥一下是不行的，当然遍历这个队列的操作也是不允许的。队列头元素是第一个排队要插入数据的&lt;strong>线程&lt;/strong>，而不是要交换的数据。数据是在配对的生产者和消费者线程之间直接传递的，并不会将数据缓冲数据到队列中。可以这样来理解：生产者和消费者互相等待对方，握手，然后&lt;strong>一起&lt;/strong>离开。&lt;/p>
&lt;p>SynchronousQueue的一个使用场景是在线程池里。Executors.newCachedThreadPool()就使用了SynchronousQueue，这个线程池根据需要（新任务到来时）创建新的线程，如果有空闲线程则会重复使用，线程空闲了60秒后会被回收。&lt;/p>
&lt;h2 id="实现原理">实现原理&lt;/h2>
&lt;p>同步队列的实现方法有许多：&lt;/p>
&lt;h3 id="阻塞算法实现">阻塞算法实现&lt;/h3>
&lt;p>阻塞算法实现通常在内部采用一个锁来保证多个线程中的put()和take()方法是串行执行的。采用锁的开销是比较大的，还会存在一种情况是线程A持有线程B需要的锁，B必须一直等待A释放锁，即使A可能一段时间内因为B的优先级比较高而得不到时间片运行。所以在高性能的应用中我们常常希望规避锁的使用。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">public class NativeSynchronousQueue&amp;lt;E&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> boolean putting = false;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> E item = null;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public synchronized E take() throws InterruptedException {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while (item == null)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wait();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> E e = item;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> item = null;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> notifyAll();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return e;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public synchronized void put(E e) throws InterruptedException {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (e==null) return;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while (putting)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wait();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> putting = true;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> item = e;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> notifyAll();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> while (item!=null)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wait();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> putting = false;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> notifyAll();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="信号量实现">信号量实现&lt;/h3>
&lt;p>经典同步队列实现采用了三个信号量，代码很简单，比较容易理解：&lt;/p></description></item><item><title>OpenVPN使用多个端口</title><link>https://hugozhu.site/post/2013/openvpn-multiple-ports/</link><pubDate>Sat, 02 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/openvpn-multiple-ports/</guid><description>&lt;p>Openvpn本身不能设置多个端口，使用iptables可以解决这个问题 （假设openvpn本来56788端口）：&lt;/p>
&lt;pre>&lt;code>for port in {56780..56787}
do 
 iptables -t nat -A PREROUTING -p tcp -d &amp;lt;your_external_ip&amp;gt; --dport $port -j REDIRECT --to-port 56788
done
&lt;/code>&lt;/pre></description></item><item><title>Java的资源管理</title><link>https://hugozhu.site/post/2013/resource-management-in-java/</link><pubDate>Fri, 01 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/resource-management-in-java/</guid><description>&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>Java程序中的常见的资源有：文件，Socket，数据库连接。在使用这些资源时候要分外小心，因为操作系统可同时操作的资源是有限的，比如默认情况下系统允许同时打开的文件数为1024个，Mysql服务器默认允许的最大连接数是100，所以操作这些资源时候要注意即使在遇到错误时也要让系统能正确回收资源。如果发生错误时候，打开的文件描述符没关闭或数据库连接没关闭，积累到一定程度后，应用将会变得不可用，只能重启。&lt;/p>
&lt;h2 id="try-catch-finally">try-catch-finally&lt;/h2>
&lt;p>Java提供了try-catch-finally来保证程序遇到异常时总是有机会可以处理资源的关闭 &amp;ndash; 调用资源对象的close()方法。但经验不足的Java程序员还是会错误的管理资源，而造成资源的泄露，静态代码分析工具，如&lt;a href="http://findbugs.sourceforge.net">&lt;strong>FindBugs&lt;/strong>&lt;/a>可以帮助发现此类问题。&lt;/p>
&lt;p>首先我们来看一段文件操作代码：&lt;/p>
&lt;pre>&lt;code>private void copy(String from, String to) throws IOException {
 FileInputStream in = null; 
 FileOutputStream out = null; 
 in = new FileInputStream(from); 
 out = new FileOutputStream(to); 
 int c; 
 while ((c = in.read()) != -1)
 out.write(c); 
 in.close();
 out.close();
}
&lt;/code>&lt;/pre>
&lt;p>一眼看上去，代码挺整齐的，逻辑也容易理解。但其中有一个很大的问题是，如果out.write调用失败（比如磁盘空间满了）方法异常退出，in.close()和out.close()就不会被调用，而in和out对象内部都引用了系统资源-&lt;a href="http://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6">文件描述符&lt;/a>，这样会导致文件描述符没有关闭，不能被重新使用而直到整个Java进程退出。&lt;/p>
&lt;h4 id="file-descriptor">&lt;a href="http://en.wikipedia.org/wiki/File_descriptor">File descriptor&lt;/a>&lt;/h4>
&lt;p>Linux的每个进程（如：Java进程）都有一个文件描述符表管理当前进程访问的所有的文件，文件描述符关联了系统文件表中的file entry，系统能容纳多少file entry是有限制的，如果超过限制系统会拒绝访问，抛出Too many opened files错误。&lt;/p>
&lt;img src="https://pbs.twimg.com/media/BEUt3v3CEAAeP-m.jpg:large"/>
&lt;p>较为正确的代码应该是：&lt;/p>
&lt;pre>&lt;code>private void copy(String src, String dest) throws IOException {
 FileInputStream in = null; 
 FileOutputStream out = null; 
 try {
 in = new FileInputStream(src); 
 out = new FileOutputStream(dest); 
 int c; 
 while ((c = in.read()) != -1)
 out.write(c);
 } finally {
 try {
 if (in!=null) {
 in.close();
 }
 } finally {
 if (out!=null) {
 out.close();
 }
 }
 }
}
&lt;/code>&lt;/pre>
&lt;p>但是这样的代码写起来是不是让人有点沮丧？这样写代码犯错的可能性确实比较大。
改良过后的代码阅读性好一些：&lt;/p></description></item><item><title>在Ubuntu上配置L2TP，PPTP和OpenVPN服务</title><link>https://hugozhu.site/post/2013/setup-l2tp-pptp-openvpn-on-ubuntu/</link><pubDate>Fri, 01 Mar 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/setup-l2tp-pptp-openvpn-on-ubuntu/</guid><description>&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>MacOS, Windows, iOS都内置支持PPTP，L2TP；OpenVPN需要安装客户端，手机上一般不支持。&lt;/p>
&lt;p>先打开内核的IP转发，修改 /etc/sysctl.conf&lt;/p>
&lt;pre>&lt;code>net.ipv4.ip_forward=1
&lt;/code>&lt;/pre>
&lt;p>执行下面命令以生效&lt;/p>
&lt;pre>&lt;code>sudo sysctl -p
&lt;/code>&lt;/pre>
&lt;h2 id="pptp">PPTP&lt;/h2>
&lt;p>安装pptpd&lt;/p>
&lt;pre>&lt;code>apt-get install pptpd
&lt;/code>&lt;/pre>
&lt;p>编辑 /etc/pptpd.conf，下面两行取消注释&lt;/p>
&lt;pre>&lt;code>localip 192.168.0.1
remoteip 192.168.0.234-238,192.168.0.245
&lt;/code>&lt;/pre>
&lt;p>这行注释掉&lt;/p>
&lt;pre>&lt;code>#logwtmp 
&lt;/code>&lt;/pre>
&lt;p>从文件 /etc/pptpd.conf 中找到配置选项文件，如下为：/etc/ppp/pptpd-options&lt;/p>
&lt;pre>&lt;code>grep options /etc/pptpd.conf
# Specifies the location of the PPP options file.
# By default PPP looks in '/etc/ppp/options'
option /etc/ppp/pptpd-options
# option in the pppd options file, or run bcrelay.
&lt;/code>&lt;/pre>
&lt;p>编辑 /etc/ppp/pptpd-options，增加以下内容，最后两项为推给VPN客户端的DNS服务器IP&lt;/p>
&lt;pre>&lt;code>mtu 1492
name pptpd
refuse-pap
refuse-chap
refuse-mschap
require-mschap-v2
require-mppe-128
proxyarp
lock
nobsdcomp
novj
novjccomp
nologfd 
ms-dns 8.8.8.8
ms-dns 8.8.4.4
&lt;/code>&lt;/pre>
&lt;p>修改 /etc/ppp/chap-secrets， 增加一个VPN用户: foo ，密码设置为: bar&lt;/p></description></item><item><title>Java程序的日志</title><link>https://hugozhu.site/post/2013/logging-in-java/</link><pubDate>Thu, 28 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/logging-in-java/</guid><description>&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>一个在生产环境里运行的程序如果没有日志是很让维护者提心吊胆的，有太多杂乱又无意义的日志也是令人伤神。程序出现问题时候，从日志里如果发现不了问题可能的原因是很令人受挫的。本文想讨论的是如何在Java程序里写好日志。大多数的Web服务器（如Apache，Nginx）都有access日志和error日志，分别记录在不同的文件内；我们使用的服务器操作系统Linux有Syslog日志, /var/log目录下也有很多基础应用和服务的日志文件；桌面Windows有事件查看器, Mac有Console应用可以查看和管理日志；这些成熟的系统及工具方法都值得我们学习并在自己的项目中应用。&lt;/p>
&lt;p>一般来说日志分为两种：业务日志和异常日志。使用日志我们希望能达到以下目标：&lt;/p>
&lt;ol>
&lt;li>对程序运行情况的记录和监控；&lt;/li>
&lt;li>在必要时可详细了解程序内部的运行状态；&lt;/li>
&lt;li>对系统性能的影响尽量小；&lt;/li>
&lt;/ol>
&lt;h2 id="日志规范">日志规范&lt;/h2>
&lt;p>程序框架应该提供统一的日志记录接口，日志格式也需要有一定的规范，方便利用日志工具来分析日志。
首先我们有必要了解一下Linux普遍使用的&lt;a href="http://en.wikipedia.org/wiki/Syslog">Syslog&lt;/a>标准协议，协议规定日志中应包含产生日志的模块(Facility)，严重性（Severity Level），时间，主机名或IP，进程名，进程ID和日志内容，根据模块和严重性可以配置相应的动作：是否需要记录，日志存储路径（文件或网络）。&lt;/p>
&lt;p>下面是部分常见的Syslog模块类型：&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>&lt;strong>模块ID&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>关键词&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>描述&lt;/strong>&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>0&lt;/td>
 &lt;td>kern&lt;/td>
 &lt;td>内核消息&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>user&lt;/td>
 &lt;td>用户级别消息&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>2&lt;/td>
 &lt;td>mail&lt;/td>
 &lt;td>邮件系统&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>3&lt;/td>
 &lt;td>daemon&lt;/td>
 &lt;td>系统后台守护程序&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>4&lt;/td>
 &lt;td>auth&lt;/td>
 &lt;td>安全/鉴权消息&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5&lt;/td>
 &lt;td>syslog&lt;/td>
 &lt;td>syslogd内部产生的日志消息&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>…&lt;/td>
 &lt;td>&lt;/td>
 &lt;td>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>以及Syslog严重程度划分：&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>&lt;strong>代码&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>严重程度&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>关键词&lt;/strong>&lt;/th>
 &lt;th>&lt;strong>描述&lt;/strong>&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>0&lt;/td>
 &lt;td>Emergency&lt;/td>
 &lt;td>emerg(panic)&lt;/td>
 &lt;td>紧急，系统已经不稳定了&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>1&lt;/td>
 &lt;td>Alert&lt;/td>
 &lt;td>alert&lt;/td>
 &lt;td>需要立刻采取措施&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>2&lt;/td>
 &lt;td>Critical&lt;/td>
 &lt;td>crit&lt;/td>
 &lt;td>严重情况&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>3&lt;/td>
 &lt;td>Error&lt;/td>
 &lt;td>err (error)&lt;/td>
 &lt;td>系统出错&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>4&lt;/td>
 &lt;td>Warning&lt;/td>
 &lt;td>warning(warn)&lt;/td>
 &lt;td>系统警告&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5&lt;/td>
 &lt;td>Notice&lt;/td>
 &lt;td>notice&lt;/td>
 &lt;td>系统仍然正常，但值得注意&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>6&lt;/td>
 &lt;td>Informational&lt;/td>
 &lt;td>info&lt;/td>
 &lt;td>正常系统通告&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>7&lt;/td>
 &lt;td>Debug&lt;/td>
 &lt;td>debug&lt;/td>
 &lt;td>系统调试信息&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>在你的Java程序里日志也可以参考Syslog的设计，根据业务对程序的模块和日志级别做一定的规划和设计。&lt;/p></description></item><item><title>在线广告系统架构变迁</title><link>https://hugozhu.site/post/2013/the-evolution-of-online-advertsing-system/</link><pubDate>Thu, 28 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/the-evolution-of-online-advertsing-system/</guid><description>&lt;h1 id="overview">Overview&lt;/h1>
&lt;p>&lt;em>&lt;strong>（未完）&lt;/strong>&lt;/em>&lt;/p>
&lt;p>广告按业务划分有以下几类：&lt;/p>
&lt;ol>
&lt;li>展示广告（Banner广告）&lt;/li>
&lt;li>搜索广告（关键词广告）&lt;/li>
&lt;/ol>
&lt;p>按计费模式有：&lt;/p>
&lt;ol>
&lt;li>CPT: 按有效广告展示天数计费，可定价或竞价；&lt;/li>
&lt;li>CPM: 按有效广告展现次数计费，可定价或竞价；&lt;/li>
&lt;li>CPC: 按有效点击次数计费；&lt;/li>
&lt;li>CPS: 按效果计费，如，按成交订单额，按流量带来的有效下载或安装次数计费；&lt;/li>
&lt;/ol>
&lt;p>广告系统按结构可划分为以下子系统：&lt;/p>
&lt;ol>
&lt;li>广告投送服务器&lt;/li>
&lt;li>广告数据库及业务系统&lt;/li>
&lt;li>用户行为跟踪系统&lt;/li>
&lt;li>日志传输系统&lt;/li>
&lt;li>流式数据分析和计算平台&lt;/li>
&lt;li>离线数据分析和计算平台&lt;/li>
&lt;/ol>
&lt;h1 id="从展示广告到搜索广告再到社会化广告">从展示广告到搜索广告再到社会化广告&lt;/h1>
&lt;p>早期的互联网广告以展示广告为主，业务模式和在报纸，期刊上刊登广告相似，广告主按其广告的展现次数或时长来付费。直到1998年有个叫GoTo的公司（后公司改名为Overture，2005年被Yahoo收购）开始提供关键词广告，这是一种简单高效的定向广告，广告主可以按与其业务相关的关键词购买搜索流量，按访客的点击计费，和早期的展示广告相比这无疑是一个巨大的进步，通过关键词将用户和广告关联起来，而不是在广告位上一直展现同样的广告或随机的展现。随后Google迅速的采用了这个方法将自身的搜索流量变现，并不断优化和壮大，最终形成了Google的Adword产品，早期Google并不为搜索用户建立个性化数据，因此可用于定向的数据比较有限，于是Google又推出了AdSense产品，将触角伸向了全网，通过AdSense的合作网站，Google可以采集到访客在这些网站的访问足迹，并利用这些数据提高其广告的相关性；随着以Facebook为代表的社交网络的兴起，这些网站有个特点就是自身就具备了比较完善的用户个性化数据，利用这些数据，网站可以将定向技术使用到展示广告，这使展示广告迎来了第二春，广告产业对数据的应用价值有了极大的兴趣，也催化了大数据的技术广泛应用。近年来一种新的广告业务模式&amp;ndash;“实时竞价广告交易系统”也逐渐被网站主和广告主接受，其核心目的是让每次广告展现都创造出尽可能多的回报，以自动化的方式系统使用实时数据和竞价信息将广告空间分配给那一时刻出价最高的销售渠道。&lt;/p>
&lt;h1 id="广告系统的架构变迁">广告系统的架构变迁&lt;/h1>
&lt;p>早期的展示广告系统因为业务数据量不大，广告位按时长售卖。系统架构上比较简单。系统核心为关系数据库，广告主通过业务系统管理广告数据：账户设置，广告计划，预算，推广单元，广告创意等；通过审核后可以投放的数据进入广告投放服务器。简单的广告系统可以完全围绕数据库来实现。投放服务器直接访问数据库获取需要投放的广告数据，并通过缓存来提高性能，减少对数据库的压力。&lt;/p>
&lt;p>图[简单的广告系统架构]&lt;/p>
&lt;p>当广告系统里的广告主越来越多，广告位的流量越来越大，直接访问数据库的做法不能满足性能和扩展性的要求，主要原因是传统的关系数据库的设计目标是通用的需求。这种情况下广告系统可以定时将广告数据从数据库中导出，生成的数据文件通过网络传到投放服务器，投放服务器将数据文件载入内存供快速访问，当用户打开网站页面时候，部署在广告位的代码（可部署在客户端或服务器端）将参数传给广告投放服务器，投放服务器按一定策略和逻辑取出需要展现给用户的广告数据，按接口规范直接返回给用户浏览器渲染，或返回给调用广告引擎的服务器端程序，再由服务器端程序将广告嵌入内容页面。&lt;/p>
&lt;p>图[改进后的简单的广告系统架构]&lt;/p>
&lt;p>对于大多数中小网站，广告是其运营收入重要的一部分，在网站上部署广告一般有下面几种方法：&lt;/p>
&lt;h2 id="接入大型广告网络">接入大型广告网络&lt;/h2>
&lt;p>这是最简单的一种方式，不占用网站的服务器资源，只需要在网站广告位嵌入广告网络提供的广告代码即可。&lt;/p>
&lt;h3 id="google-adsense">Google AdSense&lt;/h3>
&lt;p>Google AdSense 是一种获取收入的快速简便的方法，适合于各种规模的网站发布商。它可以在网站的内容网页上展示相关性较高的 Google广告，并且这些广告不会过分夸张醒目。由于这些所展示的广告内容同用户在您的网站上查找的内容相关，因此，最终您的内容网页不仅仅会为您带来很好的经济效益，还能够得以充实网站内容页面。google根据网站上显示的广告被点击的次数支付佣金，当某个月底佣金累计达到100美元时即可向发布商支付广告佣金。&lt;/p>
&lt;p>Google AdSense开创了一个新的广告模式吧。以前的很多广告商，主要靠在各种页面，高频率的轰炸网友的眼球，而不管这个网友对广告内容是不是感兴趣。但是AdSense却通过分析网页内容后，提供一些和内容相关的文字广告（也会有个别图片广告），因为内容相关的广告更容易引起读者的兴趣，使广告成为一种真正有用的信息，而且也不会给网友太多的骚扰。&lt;/p>
&lt;h3 id="阿里妈妈">阿里妈妈&lt;/h3>
&lt;p>阿里妈妈是阿里巴巴集团旗下的网站联盟，将网站主与淘宝卖家之间搭起了一座桥梁，依托自身强大的技术研发能力，对商品实现今精准投放，不断改进投放内容与形式，让双方利益都得到最大化，营造了一个良性循环的生态圈。&lt;/p>
&lt;h3 id="百度联盟">百度联盟&lt;/h3>
&lt;p>百度联盟隶属于全球最大的中文搜索引擎百度。一直致力于帮助合作伙伴挖掘互联网流量的媒体价值，帮助推广客户拓展精准有效的投放通路，是现今国内颇具规模的广告联盟。&lt;/p>
&lt;h2 id="使用第三方广告托管系统">使用第三方广告托管系统&lt;/h2>
&lt;p>使用第三方广告托管系统相对于接入一个广告网络相比还可以展现自身的广告。&lt;/p>
&lt;h3 id="百度广告管家">百度广告管家&lt;/h3>
&lt;p>百度广告管家是在线媒体广告管理系统，提供了广告投放管理、收益优化、定向投放、广告托管、广告数据统计报告等功能，几乎涵盖了目前所有网站站长的广告管理需求。登录百度广告管家，看到广告投放管理可以支持对固定、弹窗、漂浮三种类型的广告位投放的管理操作，并支持提供按地域、接入方式、日期、浏览器、浏览器语言、操作系统、来源域、分辨率、被访URL等定向投放方式的管理。广告计费方式提供按日、按展现、按点击三大主流计费方式。&lt;/p>
&lt;h2 id="部署开源广告系统">部署开源广告系统&lt;/h2>
&lt;p>通过部署开源的广告系统可以对广告投放有较大的控制权，但为此需要消耗带宽和服务器成本，以及广告系统二次开发和维护成本。&lt;/p>
&lt;h3 id="openx">OpenX&lt;/h3>
&lt;p>OpenX是一个用PHP开发的开源广告管理与跟踪系统，适合各类网站使用，能够管理每个广告主拥有的多种任何尺寸横幅广告，按天查看，详细和概要统计并通过电子邮件发送报表给广告主。&lt;/p>
&lt;h2 id="自主开发">自主开发&lt;/h2>
&lt;p>大型的互联网公司一般会选择自主开发广告系统与自身业务相结合，如百度，淘宝。也有一些独立的广告联盟或新创的广告公司（如在无线广告领域）会选择自主开发。&lt;/p>
&lt;h1 id="广告系统模块">广告系统模块&lt;/h1>
&lt;h2 id="广告投放服务器">广告投放服务器&lt;/h2>
&lt;p>广告投放服务器的规模是和流量以及广告数据量成正比的。当广告数据规模较小时，一台服务器的内存就能放下所有数据，如果同时这台服务器也能承担所有广告请求流量，那投放系统就能简化到一台机器；如果一台服务器不能承担所有流量，那么可以复制出同样的多台服务器共同承担广告请求流量，并在这个集群前使用负载均衡设备将流量均匀的分配给集群内的服务器；如果数据量太大以致于单机存不下所有数据，那么可以将广告数据按一定维度分区，存在一组服务器上，这组服务器提供不同分区的访问，对外则通过统一的接口供访问，调用者首先根据分区维度的参数值确定该分区的服务器，再向该服务器直接调用。&lt;/p>
&lt;p>随着软硬件的不断升级和优化，现代的普通商用服务器单台每秒可处理几千次的广告请求。在实现上选用高性能的Web服务器，如Nginx或Lighttpd，可以支撑大量并发连接，降低处理每个广告请求的系统消耗。如果对性能的有极端的要求，有些广告系统甚至会自主开发Web服务器（如采用Erlang，C语言等），或裁剪通用开源Web服务器不需要的功能，而只保留核心功能。&lt;/p>
&lt;h2 id="kv内存数据库">K/V内存数据库&lt;/h2>
&lt;p>广告投放服务器对性能要求非常高，从收到广告请求到返回广告数据只有十几毫秒的时间完成决策和数据封装，而数据在内存中的读取速度相对最快，所以在广告投放服务器中，需要投放的广告数据都会保存在基于K/V的内存数据库中供快速读取。内存数据库和关系数据库中的数据通过消息队列保持同步，开源的K/V数据库有Memcache和Redis等。&lt;/p>
&lt;h2 id="关系数据库">关系数据库&lt;/h2>
&lt;p>广告系统需要采用关系数据库来存储结构化的数据，如：广告计划，推广单元，创意等。这些是至关重要的核心数据，对数据安全性要求很高，要求即使在出现硬件损坏的情况下，客户的数据仍然能保证完整。业界一般采用两种方法存储这些核心数据：采用商业关系数据库如：Oracle，或采用开源数据库如：Mysql或Postgresql。商业数据库功能完善，但价格往往不菲，当广告系统规模变大后，成比例上升的软件成本不可小觑，所以会逐渐转向采用开源的Mysql，其高可用性则通过多个集群及实时复制技术来保证。&lt;/p>
&lt;p>在广告系统中对广告数据的管理会通过一个或多个基于Web的应用来实现。通常采用J2EE或LAMP开发框架来开发。随着互联网广告的广泛和深入使用，广告的业务系统功能也越来越多且复杂，从架构上广告业务系统也朝着服务化和开放方向发展。&lt;/p>
&lt;h2 id="消息中间件">消息中间件&lt;/h2>
&lt;p>广告数据在关系数据库的更新需要反应到投放服务器中的内存数据库，从而更新访客看到的广告。一般来说广告主对数据同步的延迟是有一定要求的，现代的广告系统也越来越往实时同步方向发展。&lt;/p>
&lt;h2 id="cdn">CDN&lt;/h2>
&lt;p>对于带有图片或视频等富媒体内容的广告创意，为了让访客的浏览器能较快的下载广告内容，需要将这些内容文件放在离访客地理位置较近的服务器上，这正是CDN系统的优势，广告系统往往需要租用或自己搭建CDN系统。&lt;/p>
&lt;h2 id="rpc框架">RPC框架&lt;/h2>
&lt;p>大型广告系统在实现服务化后，需要进行分布式通信的服务器越来越多，采用较好的RPC框架，可使得系统各个模块之间的通信方法标准化, 简化业务开发。&lt;/p>
&lt;p>介绍一下Facebook开源的Thrift框架。Thrift是一种高效的、支持多种编程语言的远程服务调用的框架。互联网上比较流行的服务调用方式有很多种，例如基于 SOAP 消息格式的 Web Service，基于 JSON 消息格式的 RESTful 服务等。其中所用到的数据传输方式包括 XML，JSON 等，然而 XML 相对体积太大，传输效率低，JSON 体积较小，新颖，但还不够完善。Thrift则采用接口描述语言定义并创建服务，支持可扩展的跨语言服务开发，所包含的代码生成引擎可以在多种语言中，如 C++, Java, Python, PHP, Ruby, Erlang, Perl, Haskell, C#, Cocoa, Smalltalk 等创建高效的、无缝的服务，其传输数据采用二进制格式，相对 XML 和 JSON 体积更小，对于高并发、大数据量和多语言的环境更有优势。&lt;/p></description></item><item><title>使用Github合作开发项目</title><link>https://hugozhu.site/post/2013/collaborating-development-with-github/</link><pubDate>Wed, 27 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/collaborating-development-with-github/</guid><description>&lt;p>本文大部分内容来自： &lt;a href="https://help.github.com/categories/63/articles">https://help.github.com/categories/63/articles&lt;/a>&lt;/p>
&lt;p>Github上合作开发最好的方式是“&lt;strong>Fork + Pull Request&lt;/strong>”。比如我最近需要一个静态Blog生成器，市面上有很多Ruby实现的，但我想要一个Go语言的实现，Github上找到了一个 &lt;a href="https://github.com/wendal/gor">https://github.com/wendal/gor&lt;/a> ，测试了一下已有的功能基本能满足了，就用上了。&lt;/p>
&lt;p>但实际使用过程中发现了一个问题，如果在URL中有中文，生成的URL如下没有做URL安全编码：&lt;/p>
&lt;pre>&lt;code>http://hugozhu.myalert.info/2013/02/27/在Pi和Github上搭建自己的个人博客.html
&lt;/code>&lt;/pre>
&lt;p>还有一种情况是如果URL中有空格，如：&lt;/p>
&lt;pre>&lt;code>http://hugozhu.myalert.info//2013//02/25/Java properties to enviorment variables.html
&lt;/code>&lt;/pre>
&lt;p>浏览器遇到这种URL时，会主动进行编码，但这里有两个问题：&lt;/p>
&lt;ol>
&lt;li>遇到中文时，浏览器是用GBK还是UTF-8还是其它字符集编码后再发送给服务器呢？&lt;/li>
&lt;li>遇到空格时，编码成+还是%20呢？
不同浏览器实现可能不一样，在不同操作系统上也可能不一样（可能和用户设置的缺省语言有关），这样有些用户可能会遭遇404错误了，实际上我在服务器的错误日志上的确看到这样的错误&lt;/li>
&lt;/ol>
&lt;p>日志：&lt;/p>
&lt;pre>&lt;code>2013/02/27 20:41:33 [error] 7791#0: *3285 open() &amp;quot;.../2013/02/25/Java+properties+to+enviorment+variables.html&amp;quot; failed (2: No such file or directory), client: 221.179.193.78, server: hugozhu.myalert.info, request: &amp;quot;GET /2013/02/25/Java+properties+to+enviorment+variables.html HTTP/1.1&amp;quot;, host: &amp;quot;hugozhu.myalert.info&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>于是我需要动手修改代码：&lt;/p>
&lt;ol>
&lt;li>首先需要做的就是Fork一下原项目到自己的代码仓库： &lt;a href="https://github.com/hugozhu/gor">https://github.com/hugozhu/gor&lt;/a>&lt;/li>
&lt;li>修改好代码并提交到自己的仓库： &lt;a href="https://github.com/hugozhu/gor/commit/db2784623d9df4d0652436efdbfbb9caccdc1e1d">https://github.com/hugozhu/gor/commit/db2784623d9df4d0652436efdbfbb9caccdc1e1d&lt;/a>&lt;/li>
&lt;li>在你的代码仓库页面上点Pull Request:
&lt;img src="https://pbs.twimg.com/media/BEH7V0vCYAAMgcl.jpg:large"/>&lt;/li>
&lt;li>选择好你刚提交好的Commits，然后点发送;&lt;/li>
&lt;li>原项目的维护者就会收到这个Pull Request: &lt;a href="https://github.com/wendal/gor/pull/14">https://github.com/wendal/gor/pull/14&lt;/a>&lt;/li>
&lt;li>如果你提交的代码足够好，维护者可以合并到项目主干上；&lt;/li>
&lt;li>记住下一次本地修改代码前要先Merge一下原作者新提交的改动;&lt;/li>
&lt;/ol>
&lt;p>如下：&lt;/p>
&lt;pre>&lt;code>git remote add upstream https://github.com/wendal/gor
git fetch upstream
git checkout master
git merge upstream/master 
&lt;/code>&lt;/pre>
&lt;p>到此为止就完成了一次合作开发。&lt;/p></description></item><item><title>在Pi和Github上搭建自己的个人博客</title><link>https://hugozhu.site/post/2013/how-to-host-personal-blog-on-github/</link><pubDate>Wed, 27 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/how-to-host-personal-blog-on-github/</guid><description>&lt;h1 id="方法如下">方法如下：&lt;/h1>
&lt;p>本站同时托管在家里的&lt;a href="http://www.raspberrypi.org">Raspberry Pi&lt;/a>和&lt;a href="http://pages.github.com/">Github Pages&lt;/a>上，并同步保持更新，海外用户会访问Github，国内用户则会访问Pi，不同线路解析域名&lt;strong>hugozhu.myalert.info&lt;/strong>到不同的服务器是通过&lt;a href="http://dnspod.cn">DnsPod&lt;/a>的服务实现的，这么好的服务还是免费的，这里推荐一下。&lt;/p>
&lt;p>因为Github Pages只能支持静态网页，你需要一个能生成静态网页的博客生成引擎。我使用的是&lt;a href="http://github.com/wendal/gor">gor&lt;/a> ， 也可以使用&lt;a href="http://ruhoh.com">ruhoh&lt;/a>，&lt;a href="https://www.google.com/search?q=static+blog+generator&amp;amp;hl=en&amp;amp;newwindow=1&amp;amp;client=safari&amp;amp;rls=en&amp;amp;biw=1238&amp;amp;bih=868&amp;amp;ei=msAuUY-vDMKO2AWQ7IHoBQ&amp;amp;sqi=2&amp;amp;start=10&amp;amp;sa=N">Google一下还有很多&lt;/a>。&lt;/p>
&lt;h2 id="静态页面博客的好处">静态页面博客的好处：&lt;/h2>
&lt;ol>
&lt;li>性能是最好的，很合适用Raspberry Pi来做服务器，节省资源；&lt;/li>
&lt;li>文章可以用Markdown格式来编写，采用Github来做版本控制，我的Blog仓库在 &lt;a href="http://github.com/hugozhu/blog">http://github.com/hugozhu/blog&lt;/a> ，数据安全很好，误删除也不担心了；&lt;/li>
&lt;li>很容易找到托管环境，方便迁移；&lt;/li>
&lt;li>用Gor在Pi上生成速度很快；再用Nginx提供Web服务，可以直接在Pi上写Blog；&lt;/li>
&lt;li>大繁至简&lt;/li>
&lt;/ol>
&lt;h2 id="github设置">Github设置&lt;/h2>
&lt;ol>
&lt;li>在你的仓库里增加一个your_github_id.github.com，比如我的github ID是hugozhu，相应的仓库名就是&lt;a href="https://github.com/hugozhu/hugozhu.github.com">hugozhu.github.com&lt;/a>，这个仓库也就是网站的根目录了，在这里放生成好的静态文件&lt;/li>
&lt;li>如果你需要用自己的域名，而不是Github提供的，可以在根目录下增加一个&lt;a href="https://github.com/hugozhu/hugozhu.github.com/blob/master/CNAME">CNAME&lt;/a>文件,文件内容则是你的域名，在DnsPod上需要建一个CNAME记录，将你的域名指向your_github_id.github.com. 也就是github原来分配给你的，完成这个设置后，访问your_github_id.github.com会跳转到你的域名；&lt;/li>
&lt;li>每次更新后，Github会在10分钟内生效。&lt;/li>
&lt;/ol>
&lt;h2 id="更新博客">更新博客&lt;/h2>
&lt;ol>
&lt;li>Gor的使用详细说明可见 &lt;a href="https://github.com/wendal/gor">https://github.com/wendal/gor&lt;/a>&lt;/li>
&lt;li>我的整个网站的内容也通过Github开源了: &lt;a href="https://github.com/hugozhu/blog">https://github.com/hugozhu/blog&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>以我的网站为例：&lt;/p>
&lt;pre>&lt;code>git clone https://github.com/hugozhu/blog
 Cloning into 'blog'...
 remote: Counting objects: 190, done.
 remote: Compressing objects: 100% (146/146), done.
 remote: Total 190 (delta 81), reused 132 (delta 23)
 Receiving objects: 100% (190/190), 155.48 KiB | 171 KiB/s, done.
 Resolving deltas: 100% (81/81), done.
cd blog
gor compile
 2013/02/27 13:17:19 gor.go:21: gor ver 2.1
 2013/02/27 13:17:19 payload.go:572: Load Layout : default
 2013/02/27 13:17:19 payload.go:572: Load Layout : page
 2013/02/27 13:17:19 payload.go:572: Load Layout : post
 2013/02/27 13:17:19 config.go:61: Look lile a Json, try it
 2013/02/27 13:17:19 config.go:64: It is Json Map
 2013/02/27 13:17:19 widgets.go:111: Load widget from widgets/analytics/config.yml
 2013/02/27 13:17:19 widgets.go:111: Load widget from widgets/comments/config.yml
 2013/02/27 13:17:19 widgets.go:111: Load widget from widgets/google_prettify/config.yml
 2013/02/27 13:17:19 compile.go:125: Done
cd compiled
git init
git add -A 
git commit -m &amp;quot;update website&amp;quot; .
git remote add origin hugozhu@github.com:hugozhu/hugozhu.github.com
git push -u origin master
&lt;/code>&lt;/pre>
&lt;p>最后等待10分钟，再打开 &lt;a href="http://hugozhu.github.com">http://hugozhu.github.com&lt;/a> 就好了。。。&lt;/p></description></item><item><title>动态DNS程序</title><link>https://hugozhu.site/post/2013/dynamic-dns-script/</link><pubDate>Tue, 26 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/dynamic-dns-script/</guid><description>&lt;h2 id="动态根据宽带public-ip更新dnspod登记的域名">动态根据宽带public ip更新dnspod登记的域名&lt;/h2>
&lt;p>按照 &lt;a href="https://gist.github.com/833369">https://gist.github.com/833369&lt;/a> 逻辑重新用Go实现了，用更少的内存开销在Raspberry Pi上跑。&lt;/p>
&lt;p>替换上你的Email，密码，域名ID，记录ID等参数，就可以运行了。 会在后台一直运行，每隔30秒检查一遍IP，如果修改了就更新IP。&lt;/p>
&lt;p>获得domain_id可以用：&lt;/p>
&lt;pre>&lt;code>curl curl -k https://dnsapi.cn/Domain.List -d &amp;quot;login_email=xxx&amp;amp;login_password=xxx&amp;quot; 
&lt;/code>&lt;/pre>
&lt;p>获得record_id：&lt;/p>
&lt;pre>&lt;code>curl -k https://dnsapi.cn/Record.List -d &amp;quot;login_email=xxx&amp;amp;login_password=xxx&amp;amp;domain_id=xxx&amp;quot;
&lt;/code>&lt;/pre>
&lt;script src="https://gist.github.com/hugozhu/6506189.js">&lt;/script></description></item><item><title>系统调试和分析工具</title><link>https://hugozhu.site/post/2013/linux_perf_tools/</link><pubDate>Tue, 26 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/linux_perf_tools/</guid><description>&lt;p>Linux下的调试和分析工具集&lt;/p>
&lt;hr>
&lt;img src="https://hugozhu.site/assets/media/tools.jpg" width="600"/></description></item><item><title>将Java的Properties文件转换成环境变量</title><link>https://hugozhu.site/post/2013/java-properties-to-enviorment-variables/</link><pubDate>Mon, 25 Feb 2013 00:00:00 +0000</pubDate><guid>https://hugozhu.site/post/2013/java-properties-to-enviorment-variables/</guid><description>&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>在Java程序中使用properties文件很方便，但有时候需要和脚本配合使用时，需要把properties文件内的多个变量转换成环境变量，本文提供一个转换脚本示范：&lt;/p>
&lt;p>比如env.properties如下（=附近可以有空格，也可以有空行）&lt;/p>
&lt;pre>&lt;code>MYSQL_URL = jdbc:mysql://localhost:3306/test?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=gbk
MYSQL_USER = root
MYSQL_PASS = 
&lt;/code>&lt;/pre>
&lt;p>执行下面的脚本后就相当于&lt;/p>
&lt;pre>&lt;code>export MYSQL_URL=&amp;quot;//localhost:3306/test?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=gbk&amp;quot;
export MYSQL_USER=&amp;quot;root&amp;quot;
export MYSQL_PASS=&amp;quot;&amp;quot; 
&lt;/code>&lt;/pre>
&lt;p>env.sh脚本代码&lt;/p>
&lt;pre>&lt;code>#!/bin/bash

property_file=env.properties

get_prop(){
 propfile=$1
 key=$2
 grep &amp;quot;^${2}=&amp;quot; ${1}| sed &amp;quot;s%${2}=\(.*\)%\1%&amp;quot;
}

trim() {
 trimmed=$1
 trimmed=${trimmed%% }
 trimmed=${trimmed## }
 echo &amp;quot;$trimmed&amp;quot;
}

`grep -v &amp;quot;^#&amp;quot; $property_file | sed -e '/^$/d' | while read line
do
 key=$(echo $line | awk -F &amp;quot;=&amp;quot; '{print $1}')
 trimmed_key=$(trim $key)
 trimmed_val=$(trim $(get_prop $property_file &amp;quot;$key&amp;quot;)
 echo &amp;quot;export $trimmed_key=\&amp;quot;$trimmed_val\&amp;quot;)&amp;quot;
done`
&lt;/code>&lt;/pre></description></item></channel></rss>